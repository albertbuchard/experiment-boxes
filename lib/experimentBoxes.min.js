!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery"),require("chartjs"),require("experiment-mathjs")):"function"==typeof define&&define.amd?define("experimentBoxes",["jQuery","chartjs","experiment-mathjs"],e):"object"==typeof exports?exports.experimentBoxes=e(require("jQuery"),require("chartjs"),require("experiment-mathjs")):t.experimentBoxes=e(t.jQuery,t.Chart,t.math)}(this,function(t,e,n){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(e,n){e.exports=t},function(t,e,n){"use strict";function o(t){return!isNaN(parseFloat(t))&&isFinite(t)}function i(){}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw new Error("Missing parameter "+t)}function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o=0;o<e.length;o++)if(void 0===e[o])throw new Error("Argument "+o+" is undefined.");return!0}function a(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(n.allHaveConstructor(t)===!1)throw new Error("Wrong constructor in arguments.");return!0}function s(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function u(t){return new Promise(function(e){setTimeout(e,t)})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r();return new Promise(function(n){var o=Math.rand*(e-t)+t;setTimeout(n,o)})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return 0===e?new Promise(function(t){t(i)}):t.apply(n,o).then(function(r){return i=i.concat(r),c(t,e-1,n,o,i)})}function f(){var t=this;this.resolve=null,this.reject=null,this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),Object.freeze(this)}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=[];if("function"==typeof t)for(var o=0;o<e;o++)n=n.concat(t(o));else for(var i=0;i<e;i++)n=n.concat(t);return n}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.constructor!==Array)throw new Error("samplePermutation: sequence needs to be an array.");null===n&&(n=t.length);for(var o=t.slice(0),i=[],l=void 0;e&&i.length<n||!e&&o.length;){var a=Math.floor(Math.random()*o.length);l=e?o[a]:o.splice(a,1),i=i.concat(l)}return i}function p(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=[],i=0;i<t;i++){o[i]=[];for(var l=0;l<e;l++)o[i][l]=n}return o}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r();t=T.default.matrix(t);var n=t.size()[0];return T.default.subset(t,T.default.index(e,T.default.range(0,n)))}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=T.default.matrix(t);var n=t.size()[0];null===e&&(e=T.default.range(0,n-1)),e.constructor!==Array&&(e=[e]);for(var o=[],i=0;i<e.length;i++)o.push(T.default.sum(v(t,e[i])));return o}function y(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.length,o=[],i=0;i<n;i++)e&&(t[i][i]=e),o.push(t[i][i]);return[o,t]}function g(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=[],o=0;o<e.length;o++)e.substr(o,t.length)===t&&n.push(o);return n.length?n:-1}function w(){var t={},e=!1,n=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0],n+=1);for(;n<o;n++){var i=arguments.length<=n?void 0:arguments[n];!function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e&&"[object Object]"===Object.prototype.toString.call(n[o])?t[o]=w(!0,t[o],n[o]):t[o]=n[o])}(i)}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.isNumeric=e.extend=e.findAllIndices=e.noop=e.debugError=e.debugWarn=e.debuglog=e.mandatory=e.mustBeDefined=e.mustHaveConstructor=e.looksLikeAPromise=e.delay=e.jitter=e.recurse=e.Deferred=e.rep=e.samplePermutation=e.matrix=e.getRow=e.rowSum=e.diag=void 0;var x=n(13),T=function(t){return t&&t.__esModule?t:{default:t}}(x),E=n(10),_=E.DEBUG_MODE_ON?console.log.bind(console):i,k=E.DEBUG_MODE_ON?console.warn.bind(console):i,O=E.DEBUG_MODE_ON?console.error.bind(console):i;e.diag=y,e.rowSum=m,e.getRow=v,e.matrix=p,e.samplePermutation=b,e.rep=h,e.Deferred=f,e.recurse=c,e.jitter=d,e.delay=u,e.looksLikeAPromise=s,e.mustHaveConstructor=a,e.mustBeDefined=l,e.mandatory=r,e.debuglog=_,e.debugWarn=k,e.debugError=O,e.noop=i,e.findAllIndices=g,e.extend=w,e.isNumeric=o},function(t,e,n){"use strict";(function(t){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(r),a=n(1),s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),"undefined"==typeof window&&(t.window={}),this.freeHeight=!0,null!==r&&(this.freeHeight=!1),this.MAX_BINDED_PROPERTIES=15,this.INIT_WIDTH=i||400,this.INIT_HEIGHT=r||300,this.TITLE_HEIGHT=36,this.FOOTER_HEIGHT=34,this.DEFAULT_BOX_THEME="dragbox-gray",this.DEFAULT_DRAGGABLE=!0,this.DEFAULT_STICKINESS_TYPE="magnetized",this.boxId=null,this.boxElement=n,this.draggable=this.DEFAULT_DRAGGABLE,this.boxHTML=null,this.shouldStick=null,this.shouldMagnetize=null,this.isStickingX=null,this.isStickingY=null,this.stickiness=this.DEFAULT_STICKINESS_TYPE,this._beingDragged=!1,this._visibility="hidden",this._overflow="hidden",this._boxClass=this.DEFAULT_BOX_THEME,this._width=this.INIT_WIDTH,this._height=this.INIT_HEIGHT,this.map=[],this.currentMousePos={x:-1,y:-1};var a=this;(0,l.default)(document).mousemove(function(t){a.currentMousePos.x=t.pageX,a.currentMousePos.y=t.pageY}),this.boxElement?this.boxId=(0,l.default)(this.boxElement).attr("id"):(this.boxId="dragbox"+((0,l.default)('div[id*="dragbox"]').length+1),this.boxHTML='<div id="'+this.boxId+'" class="dragbox '+this._boxClass+'" style="display:none;" draggable="false">\n          <div class="col-xs-12 dragbox-container">\n            <div class="col-xs-12 dragbox-title centered"><h3>Dragbox</h3></div>\n          <div class="col-xs-12 dragbox-content"></div>\n          <div class="col-xs-12 dragbox-footer"></div>\n        </div>',(0,l.default)(document.body).append(this.boxHTML),this.boxElement=(0,l.default)("#"+this.boxId)),this.boxClass=(0,l.default)(this.boxElement).attr("class"),this.width=this._width,this.height=this._height,this.overflow="hidden",(0,l.default)(document.body).keydown(function(t){a.keyfunction(t)}),(0,l.default)(document.body).keyup(function(t){a.keyfunction(t)}),(0,l.default)(this.boxElement).click(function(){(0,l.default)(".dragbox").css("zIndex",10),(0,l.default)(a.boxElement).css("zIndex",100)}),(0,l.default)(this.boxElement).find(".dragbox-title").mousedown(function(t){a.startDrag(t)}),(0,l.default)(this.boxElement).find(".dragbox-title").mouseup(function(t){a.stopDrag(t)}),(0,l.default)(document).click(function(t){a.stopDrag(t)}),this.queryString=e.getQueryString()}return i(e,[{key:"destroy",value:function(){var t=this;(0,l.default)(this.boxElement).animate({opacity:0},25,function(){(0,l.default)(t.boxElement).remove()})}},{key:"updateSize",value:function(){if((0,l.default)(this.boxElement).width(this.width),this.freeHeight)(0,l.default)(this.boxElement).css({width:this.width});else{var t=this.boxElement.height(),e=this.boxElement.find(".dragbox-content").height(),n=t-this.height;(0,l.default)(this.boxElement).find(".dragbox-content").css({height:e-n})}}},{key:"startDrag",value:function(t){if(t.preventDefault(),this.beingDragged)return this.beingDragged=!1,null;if(!this.draggable)return null;var e={x:t.clientX-(0,l.default)(this.boxElement).offset().left,y:t.clientY-(0,l.default)(this.boxElement).offset().top};return this.beingDragged=!0,this.loopDrag(e),!1}},{key:"stopDrag",value:function(){this.beingDragged=!1}},{key:"loopDrag",value:function(t){if(this.beingDragged===!0){var n=this.currentMousePos.x-t.x,o=this.currentMousePos.y-t.y,i={offsetLeft:n,offsetTop:o,offsetWidth:(0,l.default)(this.boxElement).width(),offsetHeigth:(0,l.default)(this.boxElement).height()},r=e.stayInWindow(i),a=r.x,s=r.y;this.shouldStick&&(r.stickyX!==-2&&2!==r.stickyX||(this.isStickingX=!0),this.isStickingX&&0!==r.stickyX&&(a=r.leftSticky),0===r.stickyX&&(this.isStickingX=!1),r.stickyY!==-2&&2!==r.stickyY||(this.isStickingY=!0),this.isStickingY&&0!==r.stickyY&&(s=r.topSticky),0===r.stickyY&&(this.isStickingY=!1)),this.shouldMagnetize&&(a=r.leftSticky,s=r.topSticky);var u=this;(0,l.default)(this.boxElement).animate({left:a,top:s},25,function(){u.loopDrag(t)})}}},{key:"keyfunction",value:function(){(0,a.debuglog)("dragbox: keyfunction() called.",this)}},{key:"toggle",value:function(){"hidden"===this.visibility?this.visibility="visible":this.visibility="hidden"}},{key:"show",value:function(){this.visibility="visible"}},{key:"hide",value:function(){this.visibility="hidden"}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".dragbox-content",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.boxElement&&(null!==n&&(t='<div class="'+n+'" >'+t+"</div>"),"container"!==e?this.boxElement.find(e).append(t):this.boxElement.append(t))}},{key:"html",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".dragbox-content",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.boxElement){var n="container"!==t?this.boxElement.find(t):this.boxElement;return null!==e?(n.html(e),e):n.html()}return null}},{key:"width",set:function(t){this._width=t,this.updateSize()},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this.updateSize()},get:function(){return this._height}},{key:"beingDragged",set:function(t){this._beingDragged=t,(0,l.default)(this.boxElement).attr("beingDragged",t)},get:function(){return this._beingDragged}},{key:"boxClass",set:function(t){if(this.boxElement){if("string"!=typeof t)throw new Error("newClass must be a string");this.boxElement.removeClass(this.boxClass).addClass(t),this._boxClass=t}},get:function(){return this.boxElement?this._boxClass:null}},{key:"visibility",set:function(t){this._visibility=t,"visible"===t?(0,l.default)(this.boxElement).show():(0,l.default)(this.boxElement).hide()},get:function(){return this._visibility}},{key:"overflow",set:function(t){this._overflow=t,(0,l.default)(this.boxElement).find(".dragbox-content").css("overflow-y",t)},get:function(){return this._overflow}},{key:"contentElement",get:function(){return(0,l.default)(this.boxElement).find(".dragbox-content")},set:function(t){console.warn("DragBox.contentElement: read-only for now")}},{key:"stickiness",get:function(){return this._stickiness},set:function(t){switch(t){case"glue":this.shouldStick=!0,this.shouldMagnetize=!1,(0,a.debuglog)("stickiness set to glue");break;case"magnetized":this.shouldStick=!1,this.shouldMagnetize=!0,(0,a.debuglog)("stickiness set to magnetized");break;default:this.shouldMagnetize=!1,this.shouldStick=!1,(0,a.debuglog)("Parambox: stickiness set to none")}this._stickiness=t}},{key:"title",get:function(){this.boxElement&&(0,l.default)(this.boxElement).find(".dragbox-title").html()},set:function(t){this.boxElement&&((0,l.default)(this.boxElement).find(".dragbox-title").html(t),this.updateSize())}},{key:"content",set:function(t){this.boxElement&&(this.contentDiv.html(t),this.updateSize())},get:function(){return this.boxElement?this.contentDiv.html():null}},{key:"contentDiv",get:function(){return this.boxElement?(0,l.default)(this.boxElement).find(".dragbox-content"):null}}],[{key:"getQueryString",value:function(){for(var t={},e=window.location.search.substring(1),n=e.split("&"),o=0;o<n.length;o++){var i=n[o].split("=");if(void 0===t[i[0]])t[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof t[i[0]]){var r=[t[i[0]],decodeURIComponent(i[1])];t[i[0]]=r}else t[i[0]].push(decodeURIComponent(i[1]))}return t}},{key:"stayInWindow",value:function(t){if(void 0===t)throw new Error("element is undefined");var e=t.offsetLeft,n=t.offsetLeft+t.offsetWidth,o=t.offsetTop,i=t.offsetTop+t.offsetHeigth,r=window.innerWidth-t.offsetWidth,l=window.innerHeight-t.offsetHeigth;return{x:e<0?0:n>window.innerWidth?r:e,y:o<0?0:i>window.innerHeight?l:o,stickyX:e<=0?-2:e<=.15*t.offsetWidth?-1:n>=window.innerWidth?2:n>=window.innerWidth-.15*t.offsetWidth?1:0,stickyY:o<=0?-2:o<=.15*t.offsetHeigth?-1:i>=window.innerHeight?2:i>=window.innerHeight-.15*t.offsetHeigth?1:0,leftSticky:e<=0?0:e<=.15*t.offsetWidth?0:n>=window.innerWidth?window.innerWidth-t.offsetWidth:n>=window.innerWidth-.15*t.offsetWidth?window.innerWidth-t.offsetWidth:e,topSticky:o<=0?0:o<=.15*t.offsetHeigth?0:i>=window.innerHeight?window.innerHeight-t.offsetHeigth:i>=window.innerHeight-.15*t.offsetHeigth?window.innerHeight-t.offsetHeigth:o}}},{key:"getCoordinateInWindow",value:function(t){return{left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeigth,maxLeft:window.innerWidth-t.offsetWidth,maxTop:window.innerHeight-t.offsetHeigth}}},{key:"stickiness",get:function(){}},{key:"title",get:function(){}}]),e}();e.default=s}).call(e,n(11))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var l,a=t[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),d=n(0),c=o(d),f=n(4),h=o(f),b=n(1),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.mandatory)("object"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,b.mandatory)("property"),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=d.constraints,f=void 0===c?"":c,h=d.title,p=void 0===h?null:h;i(this,e);var v=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,u));v.VALID_FIELD_TYPE=["input","select","slider","radio"],v._field=void 0,v.fieldType=l,v.fieldHTML=null,v.allowedValues=a,v.constraints=f||"",v.tempClass="binded-"+(void 0===t?"undefined":s(t))+n,v.subfields=[],v.errorDiv=null,v.title=(p||n).replace(/(^|\s)[a-z]/g,function(t){return t.toUpperCase()}),v.parent=o;var m="";switch(v.fieldType){case"input":v.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+v.title+'</label>\n        <input type="text" class="form-control '+v.tempClass+'" data-binded="'+n+'">\n          <div class="col-sm-10 bindedfield-errordiv '+v.tempClass+'-error" >\n\n            <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n          </div>\n        </div>';break;case"select":if(!a)throw new Error("fieldType selector needs at least one allowedValues");m+='<div class="form-group">\n        <label class="bindedfield-label">'+v.title+'</label>\n        <select class="form-control '+v.tempClass+'" data-binded="'+n+'">';for(var y=0;y<v.allowedValues.length;y++)m+=v.fieldHTML+'<option value="'+v.allowedValues[y]+'">'+v.allowedValues[y]+"</option>";v.fieldHTML=m+'</select>\n        <div class="col-sm-10 bindedfield-errordiv '+v.tempClass+'-error" >\n\n          <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n        </div>\n      </div>';break;case"textaera":v.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+v.title+'</label>\n                            <textarea class="form-control '+v.tempClass+'" rows="3" data-binded="'+n+'"></textarea>\n                            <div class="col-sm-10 bindedfield-errordiv '+v.tempClass+'-error" >\n\n                              <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n                            </div>\n                          </div>';break;case"slider":v.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+v.title+'</label>\n      <input type="range" data-binded="'+n+'" class="form-control '+v.tempClass+'" min="'+v.allowedValues[0]+'" max="'+v.allowedValues[1]+'" step="'+v.allowedValues[2]+'" />\n      <div class="col-sm-10 bindedfield-errordiv '+v.tempClass+'-error" >\n        <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n      </div>\n      </div>';break;case"radio":m='<fieldset class="form-group"><label class="bindedfield-label">'+v.title+"</label>";var g=!0,w=!1,x=void 0;try{for(var T,E=v.allowedValues[Symbol.iterator]();!(g=(T=E.next()).done);g=!0){var _=T.value;m+='<div class="form-check">\n            <label class="form-check-label">\n              <input type="radio" class="form-check-input '+v.tempClass+'" name="'+n+'" value="'+_+'" data-binded="'+n+'" checked>\n              '+_+"\n            </label>\n          </div> "}}catch(t){w=!0,x=t}finally{try{!g&&E.return&&E.return()}finally{if(w)throw x}}v.fieldHTML=m+'\n          <div class="col-sm-10 bindedfield-errordiv '+v.tempClass+'-error" >\n            <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n          </div>\n        </fieldset>';break;default:throw new Error("fieldType is invalid : input, selector and slider are the only valid type for now")}return o&&v.placeInParent(),v}return l(e,t),u(e,[{key:"placeInParent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&(this.parent=e),(0,c.default)(this.parent).append(this.fieldHTML),"radio"===this.fieldType){var n=(0,c.default)("."+this.tempClass),o=!1,i="",r=!0,l=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=s.value;(0,c.default)(d).removeClass(""+this.tempClass),d.value===this.value&&(o=!0,d.checked=!0),this.subfields.push((0,c.default)(d)),(0,c.default)(d).change(function(){t.update("field")}),i=d.value}}catch(t){l=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(l)throw a}}o||this.value||(this.value=i)}else this.field=(0,c.default)("."+this.tempClass),this.field.removeClass(""+this.tempClass),this.allowedValues&&this.allowedValues.constructor===Array?"slider"===this.fieldType?(this.value||(this.value=this.allowedValues[0]),this.value<this.allowedValues[0]&&(this.value=this.allowedValues[0]),this.value>this.allowedValues[1]&&(this.value=this.allowedValues[1]),this.value%this.allowedValues[2]!=0&&(this.value=this.allowedValues[2]*Math.floor(this.value/this.allowedValues[2])),this.field.val(this.value)):this.allowedValues.indexOf(this.value)!==-1?this.field.val(this.value):this.value=this.allowedValues[0]:this.field.val(this.value),this.errorDiv=(0,c.default)("."+this.tempClass+"-error"),this.errorDiv.length?(this.errorDiv.removeClass(this.tempClass+"-error"),this.errorDiv.hide()):this.errorDiv=null,this.field.change(function(){t.update("field")}),this.field.keydown(function(e){switch(e.keyCode){case 13:t.update("field")}})}},{key:"delete",value:function(){this.field.parent().remove(),this.property=null,this.object=null}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"field";if(void 0===this.field)(0,b.debugError)("BindedField.update: undefined field.");else if("field"===t){if(this.value!==this.field.val()){this.value=this.field.val();var e=this.verify(),n=a(e,2),o=n[0],i=n[1];o?this.correct():this.incorrect(i)}(0,c.default)(this.field).get(0).blur()}else if(this.field.val()!==String(this.value)){this.field.val(this.value);var r=this.verify(),l=a(r,2),s=l[0],u=l[1];s?this.correct():this.incorrect(u)}}},{key:"correct",value:function(){this.field.removeClass("bindedfield-incorrect"),this.error=""}},{key:"incorrect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Field does not match constraints";this.field.addClass("bindedfield-incorrect"),this.error=t}},{key:"verify",value:function(){if("string"==typeof this.constraints&&""!==this.constraints){var t=this.constraints.split(";"),e=!0,n=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var l=i.value,a=l.split(":");if(a.length>2)(0,b.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l);else if(2===a.length){var s=a[0].trim(),u=a[1].split(",");switch(s){case"length":if(u[0]=Number(u[0].trim()),isNaN(u[0]))(0,b.debugError)("BindedField.parsedConstraints: Invalid constraint value - "+l);else{if(1===u.length&&this.value.length!==u[0])return[!1,"Length must be "+u[0]];if(2===u.length)if(u[1]=Number(u[1].trim()),isNaN(u[1]))(0,b.debugError)("BindedField.parsedConstraints: Invalid constraint value - "+l);else if(this.value.length<u[0]||this.value.length>u[1])return[!1,"Length out of bounds: ["+u[0]+", "+u[1]+"]"]}break;default:(0,b.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l)}}else switch(l=l.trim()){case"mandatory":if(""===this.value||null===this.value)return[!1,"Field is mandatory"];break;case"alpha":if(""!==this.value&&/^[a-zA-Z]+$/.test(this.value)===!1)return[!1,"Value must contain only alphabetic characters"];break;case"numeric":if(!(0,b.isNumeric)(this.value))return[!1,"Value must contain only numeric characters"];break;default:(0,b.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l)}}}catch(t){n=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw o}}}if(null!==this.allowedValues){if(this.allowedValues.constructor===Array){if("slider"===this.fieldType&&(this.value<this.allowedValues[0]||this.value>this.allowedValues[1]||this.value%this.allowedValues[2]!=0))return[!1,"Value not allowed"];if("slider"!==this.fieldType&&!this.allowedValues.includes(this.value))return[!1,"Value not allowed"]}if(this.allowedValues.constructor===String&&this.allowedValues!==this.value)return[!1,"Value not allowed"]}return[!0,"Ok"]}},{key:"value",set:function(t){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");this.object[this.property]=this.convertToType(t),this.update("setter")},get:function(){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");return this.object[this.property]}},{key:"field",get:function(){if(this.subfields.length){var t=!0,e=!1,n=void 0;try{for(var o,i=this.subfields[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value;if((0,c.default)(r)[0].checked)return(0,c.default)(r)}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}return(0,c.default)(this._field)},set:function(t){this._field=t}},{key:"error",set:function(t){null!==this.errorDiv&&(t?(this.errorDiv.find(".bindedfield-error").text(t),this.errorDiv.show()):(this.errorDiv.find(".bindedfield-error").text(""),this.errorDiv.hide()))},get:function(){return null}},{key:"parsedConstraints",get:function(){},set:function(t){(0,b.debugError)("BindedField.parsedConstraints: read-only")}}]),e}(h.default);e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,t),this.HANDLED_VARIABLE_TYPES=["number","string","boolean"],this.property=n,this.object=e,this.propagate=!1,this.type=null,this.hierarchy=null!==i?i:n,this.exportName=this.hierarchy.replace(/\./g,""),this.object||(this.object=window),null!==n&&this.bind(e,n)}return r(t,[{key:"bind",value:function(t,e){var n=i(this.object[this.property]);if("undefined"===n)throw new Error("Parambox: The variable '"+e+"' you are trying to bind is undefined - either this object or the property is not defined");if(this.HANDLED_VARIABLE_TYPES.indexOf(n)===-1)throw new Error("The variable you are trying to bind is of a non-handled type (string, number or boolean)");this.property=e,this.object=t,this.type=this.object[this.property].constructor}},{key:"convertToType",value:function(t){if(this.type){if(this.type===Boolean)switch(String(t).toUpperCase()){case"0":return!1;case"1":return!0;case"FALSE":return!1;case"TRUE":return!0;default:throw new Error("BindedProperty.convertToType: invalid string value for boolean type")}return this.type(t)}throw new Error("You are trying to convert a value to a the type of the binded property but the object has no property binded to it (or no type)")}},{key:"value",set:function(t){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");this.object[this.property]=this.convertToType(t)},get:function(){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");return this.object[this.property]}}]),t}();e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=o(s),d=n(2),c=o(d),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"across",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closebutton",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l));if(a.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartmodal-buttonrow"></div>',a.DEFAULT_BUTTON_HTML={closebutton:'<button type="button" class="btn btn-secondary dragbox-button  smartmodal-closebutton">Close</button>',nextbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-nextbutton">Next</button>',blankbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-blankbutton"></button>',sendbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-sendbutton">Send</button>'},a.DEFAULT_FORMAT_TYPES={centralSmall:[.2,.4,.3],centralLarge:[.2,.7,.6],across:[.3,1,.4],overlay:[.1,.8,.8]},a.callback=n,a.draggable=!1,a.formatType=t,a.buttonRowHtml=a.DEFAULT_BUTTON_ROW_HTML,!(o in a.DEFAULT_BUTTON_HTML))throw new Error("buttonType invalid");a.buttonType=o,a.rows=[],a.title="<center><h5>Smart Modal</h5></center>",a.append(a.buttonRowHtml,".dragbox-footer"),a.append(a.DEFAULT_BUTTON_HTML[a.buttonType],".smartmodal-buttonrow"),a.button=(0,u.default)(a.boxElement).find(".smartmodal-"+a.buttonType),a.callAfterConstructor();var s=a;return(0,u.default)(window).resize(function(){s.updatePosition()}),(0,u.default)(a.button).click(function(){s.callThenDestroy()}),a}return l(e,t),a(e,[{key:"callAfterConstructor",value:function(){this.updatePosition(),this.updateSize(),this.show()}},{key:"callThenDestroy",value:function(){this.callback&&this.callback(),this.destroy()}},{key:"updatePosition",value:function(){var t=window.innerHeight,e=window.innerWidth,n=this.DEFAULT_FORMAT_TYPES[this.formatType],o=n[0]*t,i=e*((1-n[1])/2),r=e*n[1],l=t*n[2];return this.width=r,this.height=l,(0,u.default)(this.boxElement).css({left:i,top:o}),!1}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=o(s),d=n(2),c=o(d),f=n(3),h=o(f),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.DEFAULT_ROW_HTML='<div class="col-md-12 dragbox-row paramboxtmprow"></div>',n.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML='<div class="col-md-12 dragbox-row paramboxtmprow"><a class="parambox-subtitle">Subtitle</a></div>',n.PARAMBOX_EMPTY_ROW_HTML='<div class="col-md-12 dragbox-row parambox-empty"><center>No parameters binded.</center></div>',n.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row parambox-buttonrow"></div>',n.DEFAULT_BUTTON_HTML={savebutton:'<button type="button" class="btn btn-secondary btn-block dragbox-button parambox-savebutton">Save</button>',importbutton:'<button type="button" class="btn btn-secondary  btn-block dragbox-button parambox-importbutton">Import</button>',reloadbutton:'<button type="button" class="btn btn-secondary btn-block dragbox-button parambox-reloadbutton">Reload</button>'},n.append(n.DEFAULT_BUTTON_ROW_HTML,".dragbox-footer"),n.append(n.DEFAULT_BUTTON_HTML.savebutton,".parambox-buttonrow","col-xs-4"),n.append(n.DEFAULT_BUTTON_HTML.importbutton,".parambox-buttonrow","col-xs-4"),n.append(n.DEFAULT_BUTTON_HTML.reloadbutton,".parambox-buttonrow","col-xs-4");var o=n;return n.boxElement[0].getElementsByClassName("parambox-savebutton")[0].addEventListener("click",function(t){o.save(t)}),n.boxElement[0].getElementsByClassName("parambox-importbutton")[0].addEventListener("click",function(t){o.import(t)}),n.boxElement[0].getElementsByClassName("parambox-reloadbutton")[0].addEventListener("click",function(t){o.reloadAndImport(t)}),(0,u.default)(document).on("click",".parambox-subtitle",function(){var t=(0,u.default)(this).attr("subtitle-id");(0,u.default)("[parambox-belong-to='"+t+"']").slideToggle(250)}),n.rowHtml=n.DEFAULT_ROW_HTML,n.subtitleHtml=n.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML,n.rows=[],n.subtitleRows={},n.title='<h4><i class="fa fa-cog fa-1x"></i> Parameter Box</h4>',n.overflow="scroll",n.freeHeight=!1,void 0===window.paramPrefixIncrement?window.paramPrefixIncrement=0:window.paramPrefixIncrement+=1,n.prefix="paramBox"+window.paramPrefixIncrement,n.updateSize(),n.refreshView(),n}return l(e,t),a(e,[{key:"bind",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0===t)throw new Error("object is undefined");var o=null;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){o=this.getDescendantProp(t,e[i]);var r=o[0],l=o[1],a=e[i].replace(/\./g,""),s=e[i].substring(0,e[i].lastIndexOf(".")),u=this.newRowInDom(s),d=null,c=null;if(void 0!==this.queryString[a]&&(c=this.queryString[a]),null!==n&&void 0!==n[e[i]]){var f=n[e[i]].type||"input",b=null;if(n[e[i]].constructor===Array?(b=n[e[i]],f=n[e[i]].type||"select"):void 0!==n[e[i]].values&&(b=n[e[i]].values,f=n[e[i]].type||"select"),null!==c){if(null!==b&&"slider"!==f&&b.indexOf(c)===-1)throw new Error("ParamBox.bind: cannot set initial value to query string value of "+c+" because it is not in the options array.");r[l]=r[l].constructor(c)}d=new h.default(r,l,u,f,b,e[i])}null===d&&(null!==c&&(r[l]=r[l].constructor(c)),d=r[l].constructor===Boolean?new h.default(r,l,u,"select",["TRUE","FALSE"],e[i]):new h.default(r,l,u,"input",null,e[i])),this.rows.push(this.getBindedRow(u,d))}this.refreshView()}},{key:"unbind",value:function(t,e){for(var n=0;n<this.rows.length;n++){var o=this.rows[n].bindedField;o.object===t&&o.property===e&&(this.rows.splice(n,1),o.delete())}this.refreshView()}},{key:"newRowInDom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==t&&!(t in this.subtitleRows)){var e=null;(0,u.default)(this.boxElement).find(".dragbox-content").append(this.subtitleHtml),e=this.boxElement.find(".paramboxtmprow"),(0,u.default)(e).removeClass("paramboxtmprow").find("a").attr("subtitle-id",t).text(t),this.subtitleRows[t]=(0,u.default)(e)}var n=null;return(0,u.default)(this.boxElement).find(".dragbox-content").append(this.rowHtml),n=this.boxElement.find(".paramboxtmprow"),(0,u.default)(n).removeClass("paramboxtmprow").attr("parambox-belong-to",t),n}},{key:"getBindedRow",value:function(t,e){return{rowDom:t,bindedField:e}}},{key:"refreshView",value:function(){this.rows.length?this.boxElement[0].getElementsByClassName("parambox-buttonrow")[0].style.visibility="visible":this.boxElement[0].getElementsByClassName("parambox-buttonrow")[0].style.visibility="hidden";var t=80+75*this.rows.length;t>600&&(t=600),this.height=t}},{key:"keyfunction",value:function(t){this.map[t.keyCode]="keydown"===t.type,this.map[16]&&this.map[80]&&(this.map[80]=!1,this.toggle(),t.preventDefault())}},{key:"getSummaryArray",value:function(){for(var t=[],e=0;e<this.rows.length;e++){var n=this.rows[e].bindedField;t.push({property:n.property,value:n.value,hierarchy:n.hierarchy,exportName:n.exportName})}return t}},{key:"import",value:function(){var t=prompt("Enter a JSON string:"),e=null;try{e=JSON.parse(t)}catch(t){console.error("ParamBox.import: Invalid JSON string - Parsing error:",t)}if(null!==e){e.constructor!==Array&&console.error("ParamBox.import: Invalid JSON string - the parent object needs to be of the same structure as the summaryArray");for(var n=0;n<e.length;n++)void 0===e[n].property&&console.error("ParamBox.import: importedJSON["+n+"].property is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray."),void 0===e[n].value&&console.error("ParamBox.import: importedJSON["+n+"].value is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray."),this.setProperty(e[n].property,e[n].value)}}},{key:"save",value:function(){var t=this.getSummaryArray(),e=JSON.stringify(t,null,2),n=30+70*t.length;n>500&&(n=500),window.open("data:application/json;"+(window.btoa?"base64,"+btoa(e):e),"ParamBox.save","width=400,height="+n)}},{key:"reloadAndImport",value:function(){for(var t=this.getSummaryArray(),e="",n=0;n<t.length;n++)""!==e&&(e+="&"),e+=t[n].exportName+"="+encodeURIComponent(t[n].value);var o=window.location.href,i=o.indexOf("?");i!==-1&&(o=o.substring(0,i)),o+="?"+e,window.location.href=o}},{key:"getDescendantProp",value:function(t,e){for(var n=e.split("."),o=null,i=null;n.length;){if(o=t,i=n.shift(),void 0===t[i])throw new Error("object property "+i+" is undefined");t=t[i]}return[o,i,t]}},{key:"setProperty",value:function(t,e){if(t.constructor!==String)throw new Error("ParamBox.setProperty: property needs to be a string.");for(var n=!1,o=0;o<this.rows.length;o++)this.rows[o].bindedField.property===t&&(this.rows[o].bindedField.value=e,n=!0);n===!1&&console.warn("ParamBox.setProperty: did not find property "+t)}}]),e}(c.default);e.default=b},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(12),u=o(s),d=n(0),c=o(d),f=n(5),h=o(f),b=n(1),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.mandatory)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i(this,e),void 0===u.default)throw new Error("SmartChart.constructor: Chart.js is not loaded.");if(t.constructor!==Object)throw new Error("SmartChart.constructor: options needs to be an object (chart.js chart options)");var l=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"overlay",n,"closebutton",o));l.chartOptions=c.default.extend(!0,{},t),l.title="<center><h5>Smart Chart</h5></center>";var a="chart-canvas"+((0,c.default)("canvas").length+1);l.content='<canvas id="'+a+'" class="chart-canvas"></canvas>',l.canvas=document.getElementById(a),void 0!==t.options.title.text&&(t.options.title.display=!1,l.title="<center><h5>"+t.options.title.text+"</h5></center>");try{u.default.defaults.global.responsive=!0,u.default.defaults.global.maintainAspectRatio=!1,l.chart=new u.default(l.canvas,t)}catch(t){throw new Error("SmartChart.constructor: could not build the chart. Error: "+t)}return l.canvas.style.background="white",l.boxClass="dragbox dragbox-white-boxshadow",l.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartchart-buttonrow"><div class="col-xs-10"></div></div>',l.DEFAULT_BUTTON_HTML={closebutton:'<button type="button" class="btn btn-secondary dragbox-button  smartchart-closebutton">Close</button>',savebutton:'<button type="button" class="btn btn-secondary dragbox-button smartchart-savebutton">Save</button>'},l.html(".dragbox-footer",l.DEFAULT_BUTTON_ROW_HTML),l.append(l.DEFAULT_BUTTON_HTML.savebutton,".smartchart-buttonrow","col-xs-1 centered"),l.append(l.DEFAULT_BUTTON_HTML.closebutton,".smartchart-buttonrow","col-xs-1 centered"),l.closeButton=(0,c.default)(l.boxElement).find(".smartchart-closebutton"),l.saveButton=(0,c.default)(l.boxElement).find(".smartchart-savebutton"),l.button=l.closeButton,(0,c.default)(l.closeButton).click(function(){l.callThenDestroy()}),(0,c.default)(l.saveButton).click(function(){l.save()}),l.updatePosition(),l.updateSize(),setTimeout(function(){l.chart.resize(),l.show()},250),l}return l(e,t),a(e,[{key:"callAfterConstructor",value:function(){}},{key:"callThenDestroy",value:function(){this.callback&&this.callback(),void 0!==this.chart&&void 0!==u.default&&this.chart.constructor===u.default&&this.chart.destroy(),this.destroy()}},{key:"save",value:function(){var t=JSON.stringify(this.chartOptions,null,2),e=150+150*this.chartOptions.data.datasets.length;e>500&&(e=500),window.open("data:application/json;"+(window.btoa?"base64,"+btoa(t):t),"SmartChart.save","width=400,height="+e)}}]),e}(h.default);e.default=p},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var l,a=t[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),d=o(u),c=n(2),f=o(c),h=n(3),b=o(h),p=n(1),v=function(t){function e(t){var n=t.fields,o=void 0===n?(0,p.mandatory)():n,l=t.title,a=void 0===l?"Form":l,s=t.format,u=void 0===s?"overlay":s,c=(t.height,t.width,t.callback),f=void 0===c?null:c,h=t.url,v=void 0===h?null:h,m=t.target,y=void 0===m?"_blank":m,g=t.verificationFunction,w=void 0===g?function(){return!0}:g,x=t.freeHeight,T=void 0===x||x,E=t.noPageScroll,_=void 0===E||E,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,e),o.constructor!==Object)throw new Error("SmartForm: fields is not an object.");var O=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,k));O.DEFAULT_ROW_HTML='<div class="col-md-12 dragbox-row smartformtmprow"></div>',O.EMPTY_SUBTITLE_ROW_HTML='<div class="col-md-12 dragbox-row smartformtmprow"><a class="smartform-subtitle">Subtitle</a></div>',O.smartform_EMPTY_ROW_HTML='<div class="col-md-12 dragbox-row smartform-empty"><center>No parameters binded.</center></div>',O.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartform-buttonrow"></div>',O.DEFAULT_BUTTON_HTML={sendbutton:'<button type="button" class="btn btn-secondary dragbox-button smartform-sendbutton">Send</button>'},O.DEFAULT_FORMAT_TYPES={centralSmall:[.2,.4,.3],centralLarge:[.2,.7,.6],across:[.3,1,.4],overlay:[.1,.8,.8],topCentralSmall:[.1,.4,.3],topCentralLarge:[.1,.7,.6]},O.rowHtml=O.DEFAULT_ROW_HTML,O.subtitleHtml=O.EMPTY_SUBTITLE_ROW_HTML,O.formElement=null,O.formId=null,null!==v&&(O.formId="smartform-"+O.boxId,O.append("<form id='"+O.formId+"' action=\""+v+'" method="post" target="'+y+'">'),O.formElement=O.boxElement.find("#"+O.formId).get()),O.fields={};for(var S=Object.keys(o),D=0;D<S.length;D++){var P=S[D];if(void 0===o[P].type)throw new Error("SmartForm: field["+D+"].type is undefinned");var j={type:null,constraints:null,authorizedValues:"",bindedField:null,parent:null,value:"",row:null,title:P};o[P]=(0,p.extend)(j,o[P]),O.fields[P]=o[P],O.fields[P].row=O.newRowInDom(O.fields[P].parent),O.fields[P].bindedField=new b.default(O.fields[P],"value",O.fields[P].row,O.fields[P].type,O.fields[P].authorizedValues,null,{constraints:O.fields[P].constraints,title:O.fields[P].title})}return null!==v&&O.append("</form>"),O.callback="function"==typeof f?f:function(t){(0,p.debuglog)(t)},O.verificationFunction=w,O.draggable=!1,O.overflow="scroll",O.freeHeight=T,O.initialFreeHeigth=T,O.noPageScroll=_,O.formatType=u,O.buttonRowHtml=O.DEFAULT_BUTTON_ROW_HTML,O.buttonType="sendbutton",O.title="<center><h5>"+a+"</h5></center>",O.append(O.buttonRowHtml,".dragbox-footer"),O.append(O.DEFAULT_BUTTON_HTML[O.buttonType],".smartform-buttonrow"),O.button=(0,d.default)(O.boxElement).find(".smartform-"+O.buttonType),O.callAfterConstructor(),(0,d.default)(window).resize(function(){O.updatePosition()}),(0,d.default)(O.button).click(function(){O.verify()&&O.verificationFunction()&&O.callThenDestroy()}),(0,d.default)(document).on("click",".smartform-subtitle",function(){var t=(0,d.default)(this).attr("subtitle-id");(0,d.default)("[smartform-belong-to='"+t+"']").slideToggle(250)}),O}return l(e,t),s(e,[{key:"verify",value:function(){var t=!0;for(var e in this.fields)if(this.fields[e].hasOwnProperty("bindedField")){var n=this.fields[e].bindedField.verify(),o=a(n,2),i=o[0],r=o[1];i?this.fields[e].bindedField.correct():(this.fields[e].bindedField.incorrect(r),t=!1)}return t}},{key:"callAfterConstructor",value:function(){this.updatePosition(),this.updateSize(),this.show()}},{key:"callThenDestroy",value:function(){this.callback&&this.callback(this.fields),null!==this.formElement&&this.formElement.submit(),this.destroy()}},{key:"newRowInDom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&!(t in this.subtitleRows)){var e=null;this.contentElement.append(this.subtitleHtml),e=this.boxElement.find(".smartformtmprow"),(0,d.default)(e).removeClass("smartformtmprow").find("a").attr("subtitle-id",t).text(t),this.subtitleRows[t]=(0,d.default)(e)}var n=null;return this.contentElement.append(this.rowHtml),n=this.boxElement.find(".smartformtmprow"),(0,d.default)(n).removeClass("smartformtmprow").attr("smartform-belong-to",t),n}},{key:"updatePosition",value:function(){var t=this,e=window.innerHeight,n=window.innerWidth,o=this.DEFAULT_FORMAT_TYPES[this.formatType],i=o[0]*e,r=n*((1-o[1])/2);return(0,d.default)(this.boxElement).css({left:r,top:i}),(0,p.delay)(10).then(function(){var r=n*o[1];t.initialFreeHeigth?t.initialFreeHeigth&&t.noPageScroll&&t.boxElement.height()+i>e-20&&(t.freeHeight=!1,t.height=e-20-i):t.height=e*o[2],t.width=r}),!1}}]),e}(f.default);e.default=v},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BindedField=e.BindedProperty=e.SmartChart=e.SmartForm=e.SmartModal=e.ParamBox=e.DragBox=void 0;var i=n(2),r=o(i),l=n(6),a=o(l),s=n(5),u=o(s),d=n(7),c=o(d),f=n(8),h=o(f),b=n(4),p=o(b),v=n(3),m=o(v),y=n(1);if("undefined"!=typeof window){window.DragBox=r.default,window.ParamBox=a.default,window.SmartModal=u.default,window.SmartChart=c.default,window.SmartForm=h.default,window.BindedProperty=p.default,window.BindedField=m.default;var g="./",w=document.getElementsByTagName("script");if(w.length){g=w[w.length-1].src;var x=(0,y.findAllIndices)("/",g);g=g.substr(0,x[x.length-1])}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=g+"/experimentBoxes.css",t.appendChild(e)})}e.DragBox=r.default,e.ParamBox=a.default,e.SmartModal=u.default,e.SmartForm=h.default,e.SmartChart=c.default,e.BindedProperty=p.default,e.BindedField=m.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DEBUG_MODE_ON=!0},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,n){t.exports=e},function(t,e){t.exports=n}])});