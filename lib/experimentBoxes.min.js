!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery"),require("chartjs"),require("experiment-mathjs")):"function"==typeof define&&define.amd?define("experimentBoxes",["jQuery","chartjs","experiment-mathjs"],t):"object"==typeof exports?exports.experimentBoxes=t(require("jQuery"),require("chartjs"),require("experiment-mathjs")):e.experimentBoxes=t(e.jQuery,e.Chart,e.math)}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function o(){}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw new Error("Missing parameter "+e)}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)if(void 0===t[i])throw new Error("Argument "+i+" is undefined.");return!0}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(n.allHaveConstructor(e)===!1)throw new Error("Wrong constructor in arguments.");return!0}function a(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}function d(e){return new Promise(function(t){setTimeout(t,e)})}function u(e){var t=e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(null!==t){var n=+t[1],i=+t[2],o=+t[3],r=new Date(o,i-1,n);if(r.getFullYear()===o&&r.getMonth()===i-1)return r}return null}function c(e){var t=0;if(!e)return t;for(var n={},i=0;i<e.length;i++)n[e[i]]=(n[e[i]]||0)+1,t+=5/n[e[i]];var o={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)},r=0;for(var s in o)o.hasOwnProperty(s)&&(r+=o[s]===!0?1:0);return t+=10*(r-1),parseInt(t,10)}function h(e){var t=c(e);return t>80?"strong":t>60?"good":t>=30?"weak":""}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r();return new Promise(function(n){var i=Math.rand*(t-e)+e;setTimeout(n,i)})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return 0===t?new Promise(function(e){e(o)}):e.apply(n,i).then(function(r){return o=o.concat(r),p(e,t-1,n,i,o)})}function b(){var e=this;this.resolve=null,this.reject=null,this.resolved=!1,this.rejected=!1,this.pending=!0,this.status=0,this.promise=new Promise(function(t,n){e.resolve=function(n){e.resolved=!0,e.pending=!1,t(n)},e.reject=function(t){e.rejected=!0,e.pending=!1,t.constructor===String&&(t=new Error(t)),n(t)}})}function m(e,t){return void 0!==t&&null!==t&&t.constructor===e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=[];if("function"==typeof e)for(var i=0;i<t;i++)n=n.concat(e(i));else for(var o=0;o<t;o++)n=n.concat(e);return n}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.constructor!==Array)throw new Error("samplePermutation: sequence needs to be an array.");null===n&&(n=e.length);for(var i=e.slice(0),o=[],s=void 0;t&&o.length<n||!t&&i.length;){var l=Math.floor(Math.random()*i.length);s=t?i[l]:i.splice(l,1),o=o.concat(s)}return o}function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],o=0;o<e;o++){i[o]=[];for(var s=0;s<t;s++)i[o][s]=n}return i}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r();e=O.default.matrix(e);var n=e.size()[0];return O.default.subset(e,O.default.index(t,O.default.range(0,n)))}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=O.default.matrix(e);var n=e.size()[0];null===t&&(t=O.default.range(0,n-1)),t.constructor!==Array&&(t=[t]);for(var i=[],o=0;o<t.length;o++)i.push(O.default.sum(w(e,t[o])));return i}function E(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.length,i=[],o=0;o<n;o++)t&&(e[o][o]=t),i.push(e[o][o]);return[i,e]}function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=[],i=0;i<t.length;i++)t.substr(i,e.length)===e&&n.push(i);return n.length?n:-1}function _(){var e={},t=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments.length<=0?void 0:arguments[0])&&(t=arguments.length<=0?void 0:arguments[0],n+=1);for(;n<i;n++){var o=arguments.length<=n?void 0:arguments[n];!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=_(!0,e[i],n[i]):e[i]=n[i])}(o)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.scorePassword=t.passwordStrength=t.parseDate=t.hasConstructor=t.isNumeric=t.extend=t.findAllIndices=t.noop=t.debugError=t.debugWarn=t.debuglog=t.mandatory=t.mustBeDefined=t.mustHaveConstructor=t.looksLikeAPromise=t.delay=t.jitter=t.recurse=t.Deferred=t.rep=t.samplePermutation=t.matrix=t.getRow=t.rowSum=t.diag=void 0;var k=n(13),O=function(e){return e&&e.__esModule?e:{default:e}}(k),H=(n(10),function(){var e;return window&&window.DEBUG_MODE_ON?(e=console).log.apply(e,arguments):void 0}),S=function(){var e;return window&&window.DEBUG_MODE_ON?(e=console).warn.apply(e,arguments):void 0},D=function(){var e;return window&&window.DEBUG_MODE_ON?(e=console).error.apply(e,arguments):void 0};t.diag=E,t.rowSum=x,t.getRow=w,t.matrix=y,t.samplePermutation=g,t.rep=v,t.Deferred=b,t.recurse=p,t.jitter=f,t.delay=d,t.looksLikeAPromise=a,t.mustHaveConstructor=l,t.mustBeDefined=s,t.mandatory=r,t.debuglog=H,t.debugWarn=S,t.debugError=D,t.noop=o,t.findAllIndices=T,t.extend=_,t.isNumeric=i,t.hasConstructor=m,t.parseDate=u,t.passwordStrength=h,t.scorePassword=c},function(t,n){t.exports=e},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(r),l=n(0),a=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),"undefined"==typeof window&&(e.window={}),this.freeHeight=!0,null!==r&&(this.freeHeight=!1),this.MAX_BINDED_PROPERTIES=15,this.INIT_WIDTH=o||400,this.INIT_HEIGHT=r||300,this.TITLE_HEIGHT=36,this.FOOTER_HEIGHT=34,this.DEFAULT_BOX_THEME="dragbox-gray",this.DEFAULT_DRAGGABLE=!0,this.DEFAULT_STICKINESS_TYPE="magnetized",this.DEFAULT_FORMAT_TYPES={centralSmall:[.2,.4,.3],centralLarge:[.2,.7,.6],across:[.3,1,.4],overlay:[.1,.8,.8],topCentralSmall:[.1,.4,.3],topCentralLarge:[.1,.7,.6]},this.boxId=null,this.boxElement=n,this.draggable=this.DEFAULT_DRAGGABLE,this.boxHTML=null,this.shouldStick=null,this.shouldMagnetize=null,this.isStickingX=null,this.isStickingY=null,this.stickiness=this.DEFAULT_STICKINESS_TYPE,this._beingDragged=!1,this._visibility="hidden",this._overflow="hidden",this._boxClass=this.DEFAULT_BOX_THEME,this._width=this.INIT_WIDTH,this._height=this.INIT_HEIGHT,this.map=[],this.currentMousePos={x:-1,y:-1};var l=this;(0,s.default)(document).mousemove(function(e){l.currentMousePos.x=e.pageX,l.currentMousePos.y=e.pageY}),this.boxElement?this.boxId=(0,s.default)(this.boxElement).attr("id"):(this.boxId="dragbox"+((0,s.default)('div[id*="dragbox"]').length+1),this.boxHTML='<div id="'+this.boxId+'" class="dragbox '+this._boxClass+'" style="display:none;" draggable="false">\n          <div class="col-xs-12 dragbox-container">\n            <div class="col-xs-12 dragbox-title centered"><h3>Dragbox</h3></div>\n          <div class="col-xs-12 dragbox-content"></div>\n          <div class="col-xs-12 dragbox-footer"></div>\n        </div>',(0,s.default)(document.body).append(this.boxHTML),this.boxElement=(0,s.default)("#"+this.boxId)),this.boxClass=(0,s.default)(this.boxElement).attr("class"),this.width=this._width,this.height=this._height,this.overflow="hidden",this.keyhandler=this.keyfunction.bind(this),document.body.addEventListener("keydown",this.keyhandler,!1),document.body.addEventListener("keyup",this.keyhandler,!1),(0,s.default)(this.boxElement).click(function(){(0,s.default)(".dragbox").css("zIndex",10),(0,s.default)(l.boxElement).css("zIndex",100)}),(0,s.default)(this.boxElement).find(".dragbox-title").mousedown(function(e){l.startDrag(e)}),(0,s.default)(this.boxElement).find(".dragbox-title").mouseup(function(e){l.stopDrag(e)}),this.clickhandler=this.stopDrag.bind(this),document.body.addEventListener("click",this.clickhandler,!1),this.queryString=t.getQueryString()}return o(t,[{key:"destroy",value:function(){var e=this,t=this;(0,s.default)(this.boxElement).animate({opacity:0},25,function(){document.body.removeEventListener("keydown",e.keyhandler),document.body.removeEventListener("keyup",e.keyhandler),document.body.removeEventListener("click",e.clickhandler),(0,s.default)(t.boxElement).remove()})}},{key:"updateSize",value:function(){if((0,s.default)(this.boxElement).width(this.width),this.freeHeight)(0,s.default)(this.boxElement).css({width:this.width});else{var e=this.boxElement.height(),t=this.boxElement.find(".dragbox-content").height(),n=e-this.height;(0,s.default)(this.boxElement).find(".dragbox-content").css({height:Math.max(t-n,100)})}}},{key:"startDrag",value:function(e){if(e.preventDefault(),this.beingDragged)return this.beingDragged=!1,null;if(!this.draggable)return null;var t={x:e.clientX-(0,s.default)(this.boxElement).offset().left,y:e.clientY-(0,s.default)(this.boxElement).offset().top};return this.beingDragged=!0,this.loopDrag(t),!1}},{key:"stopDrag",value:function(){this.beingDragged=!1}},{key:"loopDrag",value:function(e){if(this.beingDragged===!0){var n=this.currentMousePos.x-e.x,i=this.currentMousePos.y-e.y,o={offsetLeft:n,offsetTop:i,offsetWidth:(0,s.default)(this.boxElement).width(),offsetHeigth:(0,s.default)(this.boxElement).height()},r=t.stayInWindow(o),l=r.x,a=r.y;this.shouldStick&&(r.stickyX!==-2&&2!==r.stickyX||(this.isStickingX=!0),this.isStickingX&&0!==r.stickyX&&(l=r.leftSticky),0===r.stickyX&&(this.isStickingX=!1),r.stickyY!==-2&&2!==r.stickyY||(this.isStickingY=!0),this.isStickingY&&0!==r.stickyY&&(a=r.topSticky),0===r.stickyY&&(this.isStickingY=!1)),this.shouldMagnetize&&(l=r.leftSticky,a=r.topSticky);var d=this;(0,s.default)(this.boxElement).animate({left:l,top:a},25,function(){d.loopDrag(e)})}}},{key:"keyfunction",value:function(){(0,l.debuglog)("dragbox: keyfunction() called.",this)}},{key:"toggle",value:function(){"hidden"===this.visibility?this.visibility="visible":this.visibility="hidden"}},{key:"show",value:function(){this.visibility="visible"}},{key:"hide",value:function(){this.visibility="hidden"}},{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".dragbox-content",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"append";this.boxElement&&(null!==n&&(e='<div class="'+n+'" >'+e+"</div>"),"prepend"!==i&&(i="append"),"container"!==t?this.boxElement.find(t)[i](e):this.boxElement[i](e))}},{key:"prepend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".dragbox-content",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.append(e,t,n,"prepend")}},{key:"html",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".dragbox-content",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.boxElement){var n="container"!==e?this.boxElement.find(e):this.boxElement;return null!==t?(n.html(t),t):n.html()}return null}},{key:"width",set:function(e){this._width=e,this.updateSize()},get:function(){return this._width}},{key:"height",set:function(e){this._height=e,this.updateSize()},get:function(){return this._height}},{key:"scrollHeigth",set:function(e){}},{key:"scrollHeight",get:function(){if(this.boxElement)return this.boxElement.height()-this.contentElement.height()+this.contentElement.get(0).scrollHeight}},{key:"beingDragged",set:function(e){this._beingDragged=e,(0,s.default)(this.boxElement).attr("beingDragged",e)},get:function(){return this._beingDragged}},{key:"boxClass",set:function(e){if(this.boxElement){if("string"!=typeof e)throw new Error("newClass must be a string");this.boxElement.removeClass(this.boxClass).addClass(e),this._boxClass=e}},get:function(){return this.boxElement?this._boxClass:null}},{key:"visibility",set:function(e){this._visibility=e,"visible"===e?(0,s.default)(this.boxElement).show():(0,s.default)(this.boxElement).hide()},get:function(){return this._visibility}},{key:"overflow",set:function(e){this._overflow=e,(0,s.default)(this.boxElement).find(".dragbox-content").css("overflow-y",e)},get:function(){return this._overflow}},{key:"contentElement",get:function(){return(0,s.default)(this.boxElement).find(".dragbox-content")},set:function(e){console.warn("DragBox.contentElement: read-only for now")}},{key:"stickiness",get:function(){return this._stickiness},set:function(e){switch(e){case"glue":this.shouldStick=!0,this.shouldMagnetize=!1,(0,l.debuglog)("stickiness set to glue");break;case"magnetized":this.shouldStick=!1,this.shouldMagnetize=!0,(0,l.debuglog)("stickiness set to magnetized");break;default:this.shouldMagnetize=!1,this.shouldStick=!1,(0,l.debuglog)("Parambox: stickiness set to none")}this._stickiness=e}},{key:"title",get:function(){this.boxElement&&(0,s.default)(this.boxElement).find(".dragbox-title").html()},set:function(e){this.boxElement&&((0,s.default)(this.boxElement).find(".dragbox-title").html(e),this.updateSize())}},{key:"content",set:function(e){this.boxElement&&(this.contentDiv.html(e),this.updateSize())},get:function(){return this.boxElement?this.contentDiv.html():null}},{key:"contentDiv",get:function(){return this.boxElement?(0,s.default)(this.boxElement).find(".dragbox-content"):null}}],[{key:"getQueryString",value:function(){for(var e={},t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(void 0===e[o[0]])e[o[0]]=decodeURIComponent(o[1]);else if("string"==typeof e[o[0]]){var r=[e[o[0]],decodeURIComponent(o[1])];e[o[0]]=r}else e[o[0]].push(decodeURIComponent(o[1]))}return e}},{key:"stayInWindow",value:function(e){if(void 0===e)throw new Error("element is undefined");var t=e.offsetLeft,n=e.offsetLeft+e.offsetWidth,i=e.offsetTop,o=e.offsetTop+e.offsetHeigth,r=window.innerWidth-e.offsetWidth,s=window.innerHeight-e.offsetHeigth;return{x:t<0?0:n>window.innerWidth?r:t,y:i<0?0:o>window.innerHeight?s:i,stickyX:t<=0?-2:t<=.15*e.offsetWidth?-1:n>=window.innerWidth?2:n>=window.innerWidth-.15*e.offsetWidth?1:0,stickyY:i<=0?-2:i<=.15*e.offsetHeigth?-1:o>=window.innerHeight?2:o>=window.innerHeight-.15*e.offsetHeigth?1:0,leftSticky:t<=0?0:t<=.15*e.offsetWidth?0:n>=window.innerWidth?window.innerWidth-e.offsetWidth:n>=window.innerWidth-.15*e.offsetWidth?window.innerWidth-e.offsetWidth:t,topSticky:i<=0?0:i<=.15*e.offsetHeigth?0:o>=window.innerHeight?window.innerHeight-e.offsetHeigth:o>=window.innerHeight-.15*e.offsetHeigth?window.innerHeight-e.offsetHeigth:i}}},{key:"getCoordinateInWindow",value:function(e){return{left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeigth,maxLeft:window.innerWidth-e.offsetWidth,maxTop:window.innerHeight-e.offsetHeigth}}},{key:"stickiness",get:function(){}},{key:"title",get:function(){}}]),t}();t.default=a}).call(t,n(11))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),c=i(u),h=n(4),f=i(h),p=n(0),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.mandatory)("object"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,p.mandatory)("property"),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=u.constraints,h=void 0===c?"":c,f=u.title,b=void 0===f?null:f,m=u.baseMessage,v=void 0===m?"":m;o(this,t);var g=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,d));g.VALID_FIELD_TYPE=["input","select","slider","radio"],g._field=void 0,g.fieldType=s,g.fieldHTML=null,g.allowedValues=l,g.constraints=h||"",g.tempClass="binded-"+(void 0===e?"undefined":a(e))+n,g.subfields=[],g.errorDiv=null,g.messageDiv=null,g.title=(b||n).replace(/(^|\s)[a-z]/g,function(e){return e.toUpperCase()}),g.baseMessage=v,g.parent=i;var y="";switch(g.fieldType){case"input":g.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+g.title+'</label>\n        <input type="text" class="form-control '+g.tempClass+'" data-binded="'+n+'">\n          <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error" >\n            <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n          </div>\n          <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n            <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n          </div>\n        </div>';break;case"password":g.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+g.title+'</label>\n          <input type="password" class="form-control '+g.tempClass+'" data-binded="'+n+'">\n            <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error" >\n              <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n            </div>\n            <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n            <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n            </div>\n          </div>';break;case"select":if(!l)return(0,p.debugError)("fieldType selector needs at least one allowedValues"),r(g);y+='<div class="form-group">\n        <label class="bindedfield-label">'+g.title+'</label>\n        <select class="form-control '+g.tempClass+'" data-binded="'+n+'">';for(var w=0;w<g.allowedValues.length;w++)y+=g.fieldHTML+'<option value="'+g.allowedValues[w]+'">'+g.allowedValues[w]+"</option>";g.fieldHTML=y+'</select>\n        <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error"\n          <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n          </div>\n          <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n          <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n        </div>\n      </div>';break;case"textaera":g.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+g.title+'</label>\n                            <textarea class="form-control '+g.tempClass+'" rows="3" data-binded="'+n+'"></textarea>\n                            <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error" >\n                              <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n                            </div>\n                            <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n                              <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n                            </div>\n                          </div>';break;case"slider":g.fieldHTML='<div class="form-group"><label class="bindedfield-label">'+g.title+'</label>\n      <input type="range" data-binded="'+n+'" class="form-control '+g.tempClass+'" min="'+g.allowedValues[0]+'" max="'+g.allowedValues[1]+'" step="'+g.allowedValues[2]+'" />\n      <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error" >\n        <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n      </div>\n      <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n        <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n      </div>\n      </div>';break;case"radio":if(!l)return(0,p.debugError)("fieldType selector needs at least one allowedValues"),r(g);y='<fieldset class="form-group"><label class="bindedfield-label">'+g.title+"</label>";var x=!0,E=!1,T=void 0;try{for(var _,k=g.allowedValues[Symbol.iterator]();!(x=(_=k.next()).done);x=!0){var O=_.value;y+='<div class="form-check">\n            <label class="form-check-label">\n              <input type="radio" class="form-check-input '+g.tempClass+'" name="'+n+'" value="'+O+'" data-binded="'+n+'" checked>\n              '+O+"\n            </label>\n          </div> "}}catch(e){E=!0,T=e}finally{try{!x&&k.return&&k.return()}finally{if(E)throw T}}g.fieldHTML=y+'\n          <div class="col-sm-10 bindedfield-errordiv '+g.tempClass+'-error" >\n            <i class="glyphicon glyphicon-remove"></i><span class="bindedfield-error"></span>\n          </div>\n          <div class="col-sm-10 bindedfield-messagediv '+g.tempClass+'-message" >\n            <i class="glyphicon glyphicon-info"></i><span class="bindedfield-message"></span>\n          </div>\n        </fieldset>';break;default:return(0,p.debugError)("fieldType is invalid : input, selector and slider are the only valid type for now"),r(g)}return i&&g.placeInParent(),g}return s(t,e),d(t,[{key:"placeInParent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&(this.parent=t),(0,c.default)(this.parent).append(this.fieldHTML),"radio"===this.fieldType){var n=(0,c.default)("."+this.tempClass),i=!1,o="",r=!0,s=!1,l=void 0;try{for(var a,d=n[Symbol.iterator]();!(r=(a=d.next()).done);r=!0){var u=a.value;(0,c.default)(u).removeClass(""+this.tempClass),u.value===this.value&&(i=!0,u.checked=!0),this.subfields.push((0,c.default)(u)),(0,c.default)(u).change(function(){e.update("field")}),o=u.value}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}i||this.value||(this.value=o)}else this.field=(0,c.default)("."+this.tempClass),this.field.removeClass(""+this.tempClass),this.allowedValues&&this.allowedValues.constructor===Array?"slider"===this.fieldType?(this.value||(this.value=this.allowedValues[0]),this.value<this.allowedValues[0]&&(this.value=this.allowedValues[0]),this.value>this.allowedValues[1]&&(this.value=this.allowedValues[1]),this.value%this.allowedValues[2]!=0&&(this.value=this.allowedValues[2]*Math.floor(this.value/this.allowedValues[2])),this.field.val(this.value)):this.allowedValues.indexOf(this.value)!==-1?this.field.val(this.value):this.value=this.allowedValues[0]:this.field.val(this.value),this.errorDiv=(0,c.default)("."+this.tempClass+"-error"),this.errorDiv.length?(this.errorDiv.removeClass(this.tempClass+"-error"),this.errorDiv.hide()):this.errorDiv=null,this.messageDiv=(0,c.default)("."+this.tempClass+"-message"),this.messageDiv.length?(this.messageDiv.removeClass(this.tempClass+"-message"),this.messageDiv.hide()):this.messageDiv=null,this.message=this.baseMessage,this.field.change(function(){e.update("field")}),this.field.keydown(function(t){switch(t.keyCode){case 13:e.update("field")}})}},{key:"delete",value:function(){this.field.parent().remove(),this.property=null,this.object=null}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"field";if(void 0===this.field)(0,p.debugError)("BindedField.update: undefined field.");else if("field"===e){if(this.value!==this.field.val()){this.value=this.field.val();var t=this.verify(),n=l(t,2),i=n[0],o=n[1];i?this.correct(o):this.incorrect(o)}(0,c.default)(this.field).get(0).blur()}else if(this.field.val()!==String(this.value)){this.field.val(this.value);var r=this.verify(),s=l(r,2),a=s[0],d=s[1];a?this.correct(d):this.incorrect(d)}}},{key:"correct",value:function(e){this.field.removeClass("bindedfield-incorrect"),this.error="",this.message=e}},{key:"incorrect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Field does not match constraints";this.field.addClass("bindedfield-incorrect"),this.error=e,this.message=""}},{key:"verify",value:function(){var e="";if("string"==typeof this.constraints&&""!==this.constraints){var t=this.constraints.split(";"),n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value,a=l.split(":");if(a.length>2)(0,p.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l);else if(2===a.length){var d=a[0].trim(),u=a[1].split(",");switch(d){case"length":if(u[0]=Number(u[0].trim()),isNaN(u[0]))(0,p.debugError)("BindedField.parsedConstraints: Invalid constraint value - "+l);else{if(1===u.length&&this.value.length!==u[0])return[!1,"Length must be "+u[0]];if(2===u.length)if(u[1]=Number(u[1].trim()),isNaN(u[1]))(0,p.debugError)("BindedField.parsedConstraints: Invalid constraint value - "+l);else if(this.value.length<u[0]||this.value.length>u[1])return[!1,"Length out of bounds: ["+u[0]+", "+u[1]+"]"]}break;case"contains":var c=!0,h=!1,f=void 0;try{for(var b,m=u[Symbol.iterator]();!(c=(b=m.next()).done);c=!0){var v=b.value;if(v){if(this.value.indexOf(v)===-1)return[!1,"Character "+v+" must be present - all necessary characters are : "+a[1].toString()]}else(0,p.debugError)("BindedField.parsedConstraints: Invalid values for the contains rule - "+l)}}catch(e){h=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(h)throw f}}break;case"score":if(u[0]=Number(u[0].trim()),isNaN(u[0]))(0,p.debugError)("BindedField.parsedConstraints: Invalid non numeric constraint value - "+l);else{var g=(0,p.scorePassword)(this.value);if(g<u[0])return[!1,"Password score must be above "+u[0]+" -- currently score is "+g];e+="Security score: "+g+" "}break;default:(0,p.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l)}}else switch(l=l.trim()){case"mandatory":if(""===this.value||null===this.value)return[!1,"Field is mandatory"];break;case"alpha":if(""!==this.value&&/^[a-zA-Z]+$/.test(this.value)===!1)return[!1,"Value must contain only alphabetic characters"];break;case"numeric":if(!(0,p.isNumeric)(this.value))return[!1,"Value must contain only numeric characters"];break;case"date":if(null===(0,p.parseDate)(this.value))return[!1,"Invalid date format. Use dd/mm/yyyy."];break;default:(0,p.debugError)("BindedField.parsedConstraints: Invalid constraint - "+l)}}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}if(null!==this.allowedValues){if(this.allowedValues.constructor===Array){if("slider"===this.fieldType&&(this.value<this.allowedValues[0]||this.value>this.allowedValues[1]||this.value%this.allowedValues[2]!=0))return[!1,"Value not allowed"];if("slider"!==this.fieldType&&!this.allowedValues.includes(this.value))return[!1,"Value not allowed"]}if(this.allowedValues.constructor===String&&this.allowedValues!==this.value)return[!1,"Value not allowed"]}return[!0,e]}},{key:"value",set:function(e){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");this.object[this.property]=this.convertToType(e),this.update("setter")},get:function(){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");return this.object[this.property]}},{key:"field",get:function(){if(this.subfields.length){var e=!0,t=!1,n=void 0;try{for(var i,o=this.subfields[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;if((0,c.default)(r)[0].checked)return(0,c.default)(r)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}return(0,c.default)(this._field)},set:function(e){this._field=e}},{key:"error",set:function(e){null!==this.errorDiv&&(e?(this.errorDiv.find(".bindedfield-error").text(e),this.errorDiv.show()):(this.errorDiv.find(".bindedfield-error").text(""),this.errorDiv.hide()))},get:function(){return null}},{key:"message",set:function(e){null!==this.messageDiv&&(e?(this.messageDiv.find(".bindedfield-message").text(e),this.messageDiv.show()):(this.messageDiv.find(".bindedfield-message").text(""),this.messageDiv.hide()))},get:function(){return null}},{key:"parsedConstraints",get:function(){},set:function(e){(0,p.debugError)("BindedField.parsedConstraints: read-only")}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this.HANDLED_VARIABLE_TYPES=["number","string","boolean"],this.property=n,this.object=t,this.propagate=!1,this.type=null,this.hierarchy=null!==o?o:n,this.exportName=this.hierarchy.replace(/\./g,""),this.object||(this.object=window),null!==n&&this.bind(t,n)}return r(e,[{key:"bind",value:function(e,t){var n=o(this.object[this.property]);if("undefined"===n)throw new Error("Parambox: The variable '"+t+"' you are trying to bind is undefined - either this object or the property is not defined");if(this.HANDLED_VARIABLE_TYPES.indexOf(n)===-1)throw new Error("The variable you are trying to bind is of a non-handled type (string, number or boolean)");this.property=t,this.object=e,this.type=this.object[this.property].constructor}},{key:"convertToType",value:function(e){if(this.type){if(this.type===Boolean)switch(String(e).toUpperCase()){case"0":return!1;case"1":return!0;case"FALSE":return!1;case"TRUE":return!0;default:throw new Error("BindedProperty.convertToType: invalid string value for boolean type")}return this.type(e)}throw new Error("You are trying to convert a value to a the type of the binded property but the object has no property binded to it (or no type)")}},{key:"value",set:function(e){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");this.object[this.property]=this.convertToType(e)},get:function(){if(void 0===this.object[this.property])throw new Error("The variable you are trying to bind is undefined - either this object or the property is incorrect");return this.object[this.property]}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),d=i(a),u=n(2),c=i(u),h=n(0),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"topCentralLarge",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closebutton",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{stayInWindow:!0,paddingTopBottom:100,freeHeight:!0},a=l.stayInWindow,u=void 0===a||a,c=l.paddingTopBottom,h=void 0===c?100:c,f=l.freeHeight,p=void 0===f||f;o(this,t);var b=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s));if(b.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartmodal-buttonrow"></div>',b.DEFAULT_BUTTON_HTML={closebutton:'<button type="button" class="btn btn-secondary dragbox-button  smartmodal-closebutton">Close</button>',nextbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-nextbutton">Next</button>',blankbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-blankbutton"></button>',sendbutton:'<button type="button" class="btn btn-secondary dragbox-button smartmodal-sendbutton">Send</button>'},b.callback=n,b.draggable=!1,b.formatType=b.DEFAULT_FORMAT_TYPES.hasOwnProperty(e)?e:"topCentralLarge",b.stayInWindow=u,b.freeHeight=p,b.initialFreeHeigth=p,b.maxHeight=null,b.lastUpdate=0,b.paddingTopBottom=h,b.buttonRowHtml=b.DEFAULT_BUTTON_ROW_HTML,b.scrollAppended=!1,!(i in b.DEFAULT_BUTTON_HTML))throw new Error("buttonType invalid");b.buttonType=i,b.rows=[],b.title="<center><h5>Smart Modal</h5></center>",b.append(b.buttonRowHtml,".dragbox-footer"),b.append(b.DEFAULT_BUTTON_HTML[b.buttonType],".smartmodal-buttonrow"),b.button=(0,d.default)(b.boxElement).find(".smartmodal-"+b.buttonType),b.callAfterConstructor();var m=b;return(0,d.default)(window).resize(function(){m.updatePosition()}),(0,d.default)(b.button).click(function(){m.callThenDestroy()}),b}return s(t,e),l(t,[{key:"callAfterConstructor",value:function(){this.updateSize(),this.updatePosition()}},{key:"callThenDestroy",value:function(){this.callback&&this.callback(),this.destroy()}},{key:"updatePosition",value:function(){var e=this,t=window.innerHeight,n=window.innerWidth,i=this.DEFAULT_FORMAT_TYPES[this.formatType],o=i[0]*t,r=n*((1-i[1])/2),s=n*i[1],l=t*i[2];if(s!==this.width&&(this.width=s),this.freeHeight=this.initialFreeHeigth,this.initialFreeHeigth?this.contentElement.height("auto"):this.height=t*i[2],this.maxHeight=null,this.scrollAppended&&(0,d.default)(this.boxElement).find(".smartmodal-scroll").hide(),this.initialFreeHeigth&&!this.freeHeight||this.stayInWindow&&this.boxElement.height()+o>t-this.paddingTopBottom){null===this.maxHeight&&(this.maxHeight=this.initialFreeHeigth?this.boxElement.height():t*i[2]),this.freeHeight=!1;var a=t-this.maxHeight;o=a>this.paddingTopBottom?a-this.paddingTopBottom/2:this.paddingTopBottom/2,l=a>this.paddingTopBottom?t-a:t-this.paddingTopBottom,this.overflow="scroll",t-this.paddingTopBottom>l+i[0]*t&&(this.initialFreeHeigth?this.contentElement.height("auto"):l=t*i[2],o=i[0]*t,this.scrollAppended&&(0,d.default)(this.boxElement).find(".smartmodal-scroll").hide())}return this.height=l,(0,d.default)(this.boxElement).css({left:r,top:o}),(0,h.delay)(1).then(function(){if(!e.scrollAppended){e.prepend('<span class="smartmodal-scroll">&darr; scroll down &darr;</span>',".smartmodal-buttonrow"),e.scrollAppended=!0;var t=(0,d.default)(e.boxElement).find(".smartmodal-scroll");e.contentElement.scroll(function(){0!==e.contentElement.scrollTop()?t.hide():t.show()})}e.scrollAppended&&e.contentElement.get(0).scrollHeight>e.contentElement.innerHeight()?(0,d.default)(e.boxElement).find(".smartmodal-scroll").show():e.scrollAppended&&(0,d.default)(e.boxElement).find(".smartmodal-scroll").hide()}),!1}},{key:"title",set:function(e){var t=this;this.boxElement&&((0,d.default)(this.boxElement).find(".dragbox-title").html(e),this.updateSize(),(0,h.delay)(10).then(function(){t.updatePosition(),t.show()}))}},{key:"content",set:function(e){var t=this;this.boxElement&&(this.contentDiv.html(e),this.updateSize(),(0,h.delay)(10).then(function(){t.updatePosition(),t.show()}))}},{key:"buttonText",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Close";(0,h.hasConstructor)(d.default,this.button)&&(0,h.hasConstructor)(String,e)&&this.button.html(e)},get:function(){if((0,h.hasConstructor)(d.default,this.button))return this.button.html()}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),d=i(a),u=n(2),c=i(u),h=n(3),f=i(h),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.DEFAULT_ROW_HTML='<div class="col-md-12 dragbox-row paramboxtmprow"></div>',n.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML='<div class="col-md-12 dragbox-row paramboxtmprow"><a class="parambox-subtitle">Subtitle</a></div>',n.PARAMBOX_EMPTY_ROW_HTML='<div class="col-md-12 dragbox-row parambox-empty"><center>No parameters binded.</center></div>',n.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row parambox-buttonrow"></div>',n.DEFAULT_BUTTON_HTML={savebutton:'<button type="button" class="btn btn-secondary btn-block dragbox-button parambox-savebutton">Save</button>',importbutton:'<button type="button" class="btn btn-secondary  btn-block dragbox-button parambox-importbutton">Import</button>',reloadbutton:'<button type="button" class="btn btn-secondary btn-block dragbox-button parambox-reloadbutton">Reload</button>'},n.append(n.DEFAULT_BUTTON_ROW_HTML,".dragbox-footer"),n.append(n.DEFAULT_BUTTON_HTML.savebutton,".parambox-buttonrow","col-xs-4"),n.append(n.DEFAULT_BUTTON_HTML.importbutton,".parambox-buttonrow","col-xs-4"),n.append(n.DEFAULT_BUTTON_HTML.reloadbutton,".parambox-buttonrow","col-xs-4");var i=n;return n.boxElement[0].getElementsByClassName("parambox-savebutton")[0].addEventListener("click",function(e){i.save(e)}),n.boxElement[0].getElementsByClassName("parambox-importbutton")[0].addEventListener("click",function(e){i.import(e)}),n.boxElement[0].getElementsByClassName("parambox-reloadbutton")[0].addEventListener("click",function(e){i.reloadAndImport(e)}),(0,d.default)(document).on("click",".parambox-subtitle",function(){var e=(0,d.default)(this).attr("subtitle-id");(0,d.default)("[parambox-belong-to='"+e+"']").slideToggle(250)}),n.rowHtml=n.DEFAULT_ROW_HTML,n.subtitleHtml=n.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML,n.rows=[],n.subtitleRows={},n.title='<h4><i class="fa fa-cog fa-1x"></i> Parameter Box</h4>',n.overflow="scroll",n.freeHeight=!1,void 0===window.paramPrefixIncrement?window.paramPrefixIncrement=0:window.paramPrefixIncrement+=1,n.prefix="paramBox"+window.paramPrefixIncrement,n.updateSize(),n.refreshView(),n}return s(t,e),l(t,[{key:"bind",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0===e)throw new Error("object is undefined");var i=null;t.constructor!==Array&&(t=[t]);for(var o=0;o<t.length;o++){i=this.getDescendantProp(e,t[o]);var r=i[0],s=i[1],l=t[o].replace(/\./g,""),a=t[o].substring(0,t[o].lastIndexOf(".")),d=this.newRowInDom(a),u=null,c=null;if(void 0!==this.queryString[l]&&(c=this.queryString[l]),null!==n&&void 0!==n[t[o]]){var h=n[t[o]].type||"input",p=null;if(n[t[o]].constructor===Array?(p=n[t[o]],h=n[t[o]].type||"select"):void 0!==n[t[o]].values&&(p=n[t[o]].values,h=n[t[o]].type||"select"),null!==c){if(null!==p&&"slider"!==h&&p.indexOf(c)===-1)throw new Error("ParamBox.bind: cannot set initial value to query string value of "+c+" because it is not in the options array.");r[s]=r[s].constructor(c)}u=new f.default(r,s,d,h,p,t[o])}null===u&&(null!==c&&(r[s]=r[s].constructor(c)),u=r[s].constructor===Boolean?new f.default(r,s,d,"select",["TRUE","FALSE"],t[o]):new f.default(r,s,d,"input",null,t[o])),this.rows.push(this.getBindedRow(d,u))}this.refreshView()}},{key:"unbind",value:function(e,t){for(var n=0;n<this.rows.length;n++){var i=this.rows[n].bindedField;i.object===e&&i.property===t&&(this.rows.splice(n,1),i.delete())}this.refreshView()}},{key:"newRowInDom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e&&!(e in this.subtitleRows)){var t=null;(0,d.default)(this.boxElement).find(".dragbox-content").append(this.subtitleHtml),t=this.boxElement.find(".paramboxtmprow"),(0,d.default)(t).removeClass("paramboxtmprow").find("a").attr("subtitle-id",e).text(e),this.subtitleRows[e]=(0,d.default)(t)}var n=null;return(0,d.default)(this.boxElement).find(".dragbox-content").append(this.rowHtml),n=this.boxElement.find(".paramboxtmprow"),(0,d.default)(n).removeClass("paramboxtmprow").attr("parambox-belong-to",e),n}},{key:"getBindedRow",value:function(e,t){return{rowDom:e,bindedField:t}}},{key:"refreshView",value:function(){this.rows.length?this.boxElement[0].getElementsByClassName("parambox-buttonrow")[0].style.visibility="visible":this.boxElement[0].getElementsByClassName("parambox-buttonrow")[0].style.visibility="hidden";var e=80+75*this.rows.length;e>600&&(e=600),this.height=e}},{key:"keyfunction",value:function(e){this.map[e.keyCode]="keydown"===e.type,this.map[16]&&this.map[80]&&(this.map[80]=!1,this.toggle(),e.preventDefault())}},{key:"getSummaryArray",value:function(){for(var e=[],t=0;t<this.rows.length;t++){var n=this.rows[t].bindedField;e.push({property:n.property,value:n.value,hierarchy:n.hierarchy,exportName:n.exportName})}return e}},{key:"import",value:function(){var e=prompt("Enter a JSON string:"),t=null;try{t=JSON.parse(e)}catch(e){console.error("ParamBox.import: Invalid JSON string - Parsing error:",e)}if(null!==t){t.constructor!==Array&&console.error("ParamBox.import: Invalid JSON string - the parent object needs to be of the same structure as the summaryArray");for(var n=0;n<t.length;n++)void 0===t[n].property&&console.error("ParamBox.import: importedJSON["+n+"].property is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray."),void 0===t[n].value&&console.error("ParamBox.import: importedJSON["+n+"].value is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray."),this.setProperty(t[n].property,t[n].value)}}},{key:"save",value:function(){var e=this.getSummaryArray(),t=JSON.stringify(e,null,2),n=30+70*e.length;n>500&&(n=500),window.open("data:application/json;"+(window.btoa?"base64,"+btoa(t):t),"ParamBox.save","width=400,height="+n)}},{key:"reloadAndImport",value:function(){for(var e=this.getSummaryArray(),t="",n=0;n<e.length;n++)""!==t&&(t+="&"),t+=e[n].exportName+"="+encodeURIComponent(e[n].value);var i=window.location.href,o=i.indexOf("?");o!==-1&&(i=i.substring(0,o)),i+="?"+t,window.location.href=i}},{key:"getDescendantProp",value:function(e,t){for(var n=t.split("."),i=null,o=null;n.length;){if(i=e,o=n.shift(),void 0===e[o])throw new Error("object property "+o+" is undefined");e=e[o]}return[i,o,e]}},{key:"setProperty",value:function(e,t){if(e.constructor!==String)throw new Error("ParamBox.setProperty: property needs to be a string.");for(var n=!1,i=0;i<this.rows.length;i++)this.rows[i].bindedField.property===e&&(this.rows[i].bindedField.value=t,n=!0);n===!1&&console.warn("ParamBox.setProperty: did not find property "+e)}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(12),d=i(a),u=n(1),c=i(u),h=n(5),f=i(h),p=n(0),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.mandatory)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(o(this,t),void 0===d.default)throw new Error("SmartChart.constructor: Chart.js is not loaded.");if(e.constructor!==Object)throw new Error("SmartChart.constructor: options needs to be an object (chart.js chart options)");var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"overlay",n,"closebutton",i));s.chartOptions=c.default.extend(!0,{},e),s.title="<center><h5>Smart Chart</h5></center>";var l="chart-canvas"+((0,c.default)("canvas").length+1);s.content='<canvas id="'+l+'" class="chart-canvas"></canvas>',s.canvas=document.getElementById(l),void 0!==e.options.title.text&&(e.options.title.display=!1,s.title="<center><h5>"+e.options.title.text+"</h5></center>");try{d.default.defaults.global.responsive=!0,d.default.defaults.global.maintainAspectRatio=!1,s.chart=new d.default(s.canvas,e)}catch(e){throw new Error("SmartChart.constructor: could not build the chart. Error: "+e)}return s.canvas.style.background="white",s.boxClass="dragbox dragbox-white-boxshadow",s.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartchart-buttonrow"><div class="col-xs-10"></div></div>',s.DEFAULT_BUTTON_HTML={closebutton:'<button type="button" class="btn btn-secondary dragbox-button  smartchart-closebutton">Close</button>',savebutton:'<button type="button" class="btn btn-secondary dragbox-button smartchart-savebutton">Save</button>'},s.html(".dragbox-footer",s.DEFAULT_BUTTON_ROW_HTML),s.append(s.DEFAULT_BUTTON_HTML.savebutton,".smartchart-buttonrow","col-xs-1 centered"),s.append(s.DEFAULT_BUTTON_HTML.closebutton,".smartchart-buttonrow","col-xs-1 centered"),s.closeButton=(0,c.default)(s.boxElement).find(".smartchart-closebutton"),s.saveButton=(0,c.default)(s.boxElement).find(".smartchart-savebutton"),s.button=s.closeButton,(0,c.default)(s.closeButton).click(function(){s.callThenDestroy()}),(0,c.default)(s.saveButton).click(function(){s.save()}),s.updatePosition(),s.updateSize(),setTimeout(function(){s.chart.resize(),s.show()},250),s}return s(t,e),l(t,[{key:"callAfterConstructor",value:function(){}},{key:"callThenDestroy",value:function(){this.callback&&this.callback(),void 0!==this.chart&&void 0!==d.default&&this.chart.constructor===d.default&&this.chart.destroy(),this.destroy()}},{key:"save",value:function(){var e=JSON.stringify(this.chartOptions,null,2),t=150+150*this.chartOptions.data.datasets.length;t>500&&(t=500),window.open("data:application/json;"+(window.btoa?"base64,"+btoa(e):e),"SmartChart.save","width=400,height="+t)}}]),t}(f.default);t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(1),u=i(d),c=n(2),h=i(c),f=n(3),p=i(f),b=n(0),m=function(e){function t(e){var n=e.fields,i=void 0===n?(0,b.mandatory)():n,s=e.title,l=void 0===s?"Form":s,a=e.format,d=void 0===a?"overlay":a,c=(e.height,e.width,e.callback),h=void 0===c?null:c,f=e.deferred,m=void 0===f?new b.Deferred:f,v=e.url,g=void 0===v?null:v,y=e.target,w=void 0===y?"_blank":y,x=e.verificationFunction,E=void 0===x?function(){return!0}:x,T=e.freeHeight,_=void 0===T||T,k=e.noPageScroll,O=void 0===k||k,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o(this,t),i.constructor!==Object)throw new Error("SmartForm: fields is not an object.");var S=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,H));S.DEFAULT_ROW_HTML='<div class="col-md-12 dragbox-row smartformtmprow"></div>',S.EMPTY_SUBTITLE_ROW_HTML='<div class="col-md-12 dragbox-row smartformtmprow"><a class="smartform-subtitle">Subtitle</a></div>',S.smartform_EMPTY_ROW_HTML='<div class="col-md-12 dragbox-row smartform-empty"><center>No parameters binded.</center></div>',S.DEFAULT_BUTTON_ROW_HTML='<div class="col-xs-12 dragbox-row smartform-buttonrow"></div>',S.DEFAULT_BUTTON_HTML={sendbutton:'<button type="button" class="btn btn-secondary dragbox-button smartform-sendbutton">Send</button>'},S.rowHtml=S.DEFAULT_ROW_HTML,S.subtitleHtml=S.EMPTY_SUBTITLE_ROW_HTML,S.formElement=null,S.formId=null,null!==g&&(S.formId="smartform-"+S.boxId,S.append("<form id='"+S.formId+"' action=\""+g+'" method="post" target="'+w+'">'),S.formElement=S.boxElement.find("#"+S.formId).get()),S.fields={};for(var D=Object.keys(i),C=0;C<D.length;C++){var P=D[C];if(void 0===i[P].type)throw new Error("SmartForm: field["+C+"].type is undefinned");var L={type:null,constraints:null,authorizedValues:null,bindedField:null,parent:null,value:"",row:null,title:P,baseMessage:""};i[P]=(0,b.extend)(L,i[P]),S.fields[P]=i[P],S.fields[P].row=S.newRowInDom(S.fields[P].parent),S.fields[P].bindedField=new p.default(S.fields[P],"value",S.fields[P].row,S.fields[P].type,S.fields[P].authorizedValues,null,{constraints:S.fields[P].constraints,title:S.fields[P].title,baseMessage:S.fields[P].baseMessage})}return null!==g&&S.append("</form>"),S.callback="function"==typeof h?h:function(e){(0,b.debuglog)(e)},S.verificationFunction=E,(0,b.hasConstructor)(b.Deferred,m)?S._deferred=m:(S._deferred=new b.Deferred,(0,b.debugError)("SmartForm: deferred is not a valid Deferred class. Creating a new one.")),S.draggable=!1,S.overflow="scroll",S.freeHeight=_,S.initialFreeHeigth=_,S.noPageScroll=O,S.scrollAppended=!1,S.maxHeight=null,S.formatType=d,S.buttonRowHtml=S.DEFAULT_BUTTON_ROW_HTML,S.buttonType="sendbutton",S.title="<center>"+l+"</center>",S.append(S.buttonRowHtml,".dragbox-footer"),S.append(S.DEFAULT_BUTTON_HTML[S.buttonType],".smartform-buttonrow"),S.button=(0,u.default)(S.boxElement).find(".smartform-"+S.buttonType),S.callAfterConstructor(),(0,u.default)(window).resize(function(){S.updatePosition()}),(0,u.default)(S.button).click(function(){S.verify()&&S.verificationFunction()&&S.callThenDestroy()}),(0,u.default)(document).on("click",".smartform-subtitle",function(){var e=(0,u.default)(this).attr("subtitle-id");(0,u.default)("[smartform-belong-to='"+e+"']").slideToggle(250)}),S}return s(t,e),a(t,[{key:"verify",value:function(){var e=!0;for(var t in this.fields)if(this.fields[t].hasOwnProperty("bindedField")){var n=this.fields[t].bindedField.verify(),i=l(n,2),o=i[0],r=i[1];o?this.fields[t].bindedField.correct(r):(this.fields[t].bindedField.incorrect(r),e=!1)}return e}},{key:"callAfterConstructor",value:function(){var e=this;(0,b.delay)(10).then(function(){e.updatePosition(),e.updateSize(),e.show()})}},{key:"callThenDestroy",value:function(){(0,b.hasConstructor)(Function,this.callback)&&this.callback(this.fields),(0,b.hasConstructor)(b.Deferred,this.deferred)&&this.deferred.resolve(this.fields),null!==this.formElement&&this.formElement.submit(),this.destroy()}},{key:"newRowInDom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e&&!(e in this.subtitleRows)){var t=null;this.contentElement.append(this.subtitleHtml),t=this.boxElement.find(".smartformtmprow"),(0,u.default)(t).removeClass("smartformtmprow").find("a").attr("subtitle-id",e).text(e),this.subtitleRows[e]=(0,u.default)(t)}var n=null;return this.contentElement.append(this.rowHtml),n=this.boxElement.find(".smartformtmprow"),(0,u.default)(n).removeClass("smartformtmprow").attr("smartform-belong-to",e),n}},{key:"updatePosition",value:function(){var e=this,t=window.innerHeight,n=window.innerWidth,i=this.DEFAULT_FORMAT_TYPES[this.formatType],o=i[0]*t,r=n*((1-i[1])/2);(0,u.default)(this.boxElement).css({left:r,top:o});var s=n*i[1];if(s!==this.width&&(this.width=s),this.freeHeight=this.initialFreeHeigth,this.initialFreeHeigth?this.contentElement.height("auto"):this.height=t*i[2],this.maxHeight=null,this.scrollAppended&&(0,u.default)(this.boxElement).find(".smartmodal-scroll").hide(),this.initialFreeHeigth){if(this.initialFreeHeigth&&!this.freeHeight||this.initialFreeHeigth&&this.noPageScroll&&this.boxElement.height()+o>t-20){null===this.maxHeight&&(this.maxHeight=this.boxElement.height()),this.freeHeight=!1;var l=t-20-o;l>this.maxHeight?(this.height=this.maxHeight,this.scrollAppended&&(0,u.default)(this.boxElement).find(".smartmodal-scroll").hide()):(this.height=l,this.scrollAppended&&this.contentElement.get(0).scrollHeight>this.contentElement.innerHeight()&&(0,u.default)(this.boxElement).find(".smartmodal-scroll").show())}}else this.height=t*i[2];return(0,b.delay)(1).then(function(){if(!e.scrollAppended&&e.contentElement.get(0).scrollHeight>e.contentElement.innerHeight()){e.prepend('<span class="smartmodal-scroll">&darr; scroll down &darr;</span>',".smartform-buttonrow"),e.scrollAppended=!0;var t=(0,u.default)(e.boxElement).find(".smartmodal-scroll");e.contentElement.scroll(function(){0!==e.contentElement.scrollTop()?t.hide():t.show()})}e.scrollAppended&&e.contentElement.get(0).scrollHeight>e.contentElement.innerHeight()?(0,u.default)(e.boxElement).find(".smartmodal-scroll").show():e.scrollAppended&&(0,u.default)(e.boxElement).find(".smartmodal-scroll").hide()}),!1}},{key:"promise",set:function(e){(0,b.debugError)("SmartForm: promise is a readonly property, set the deferred property")},get:function(){return(0,b.hasConstructor)(b.Deferred,this.deferred)?this.deferred.promise:null}},{key:"deferred",set:function(e){(0,b.hasConstructor)(b.Deferred,e)?this._deferred=e:(0,b.debugError)("SmartForm: value needs to be of class Deferred")},get:function(){return this._deferred}}]),t}(h.default);t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindedField=t.BindedProperty=t.SmartChart=t.SmartForm=t.SmartModal=t.ParamBox=t.DragBox=void 0;var o=n(2),r=i(o),s=n(6),l=i(s),a=n(5),d=i(a),u=n(7),c=i(u),h=n(8),f=i(h),p=n(4),b=i(p),m=n(3),v=i(m),g=n(0);if("undefined"!=typeof window){window.DragBox=r.default,window.ParamBox=l.default,window.SmartModal=d.default,window.SmartChart=c.default,window.SmartForm=f.default,window.BindedProperty=b.default,window.BindedField=v.default;var y="./",w=document.getElementsByTagName("script");if(w.length){y=w[w.length-1].src;var x=(0,g.findAllIndices)("/",y);y=y.substr(0,x[x.length-1])}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=y+"/experimentBoxes.css",e.appendChild(t)})}t.DragBox=r.default,t.ParamBox=l.default,t.SmartModal=d.default,t.SmartForm=f.default,t.SmartChart=c.default,t.BindedProperty=b.default,t.BindedField=v.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEBUG_MODE_ON=!0},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,n){e.exports=t},function(e,t){e.exports=n}])});