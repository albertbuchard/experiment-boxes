{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7eae6e56f79358f65a1f","webpack:///./src/utilities.js","webpack:///external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}","webpack:///./src/DragBox.js","webpack:///./src/BindedField.js","webpack:///./src/BindedProperty.js","webpack:///./src/SmartModal.js","webpack:///./src/ParamBox.js","webpack:///./src/SmartChart.js","webpack:///./src/SmartForm.js","webpack:///./builder.js","webpack:///./config.js","webpack:///(webpack)/buildin/global.js","webpack:///external {\"commonjs\":\"chartjs\",\"commonjs2\":\"chartjs\",\"amd\":\"chartjs\",\"root\":\"Chart\"}","webpack:///external {\"commonjs\":\"experiment-mathjs\",\"commonjs2\":\"experiment-mathjs\",\"amd\":\"experiment-mathjs\",\"root\":\"math\"}"],"names":["isNumeric","n","isNaN","parseFloat","isFinite","noop","debuglog","console","log","bind","debugWarn","warn","debugError","error","mandatory","param","Error","mustBeDefined","args","i","length","mustHaveConstructor","constructorObject","allHaveConstructor","looksLikeAPromise","o","then","catch","delay","ms","Promise","resolve","setTimeout","jitter","min","max","randomDuration","Math","rand","recurse","promiseGenerator","amount","target","concatOnArray","next","apply","r","concat","Deferred","reject","promise","Object","freeze","hasConstructor","testObject","constructor","rep","content","count","result","samplePermutation","sequence","repetition","Array","copy","slice","permutation","add","index","floor","random","splice","matrix","rows","cols","fill","matrixObject","j","getRow","rowIndex","size","row","subset","range","rowSum","rowSumArray","push","sum","diag","setTo","diagonalValues","findAllIndices","needle","haystack","indices","substr","extend","extended","deep","prototype","toString","call","merge","obj","prop","hasOwnProperty","DragBox","boxElement","width","height","window","global","freeHeight","MAX_BINDED_PROPERTIES","INIT_WIDTH","INIT_HEIGHT","TITLE_HEIGHT","FOOTER_HEIGHT","DEFAULT_BOX_THEME","DEFAULT_DRAGGABLE","DEFAULT_STICKINESS_TYPE","boxId","draggable","boxHTML","shouldStick","shouldMagnetize","isStickingX","isStickingY","stickiness","_beingDragged","_visibility","_overflow","_boxClass","_width","_height","map","currentMousePos","x","y","thisObject","document","mousemove","event","pageX","pageY","body","append","attr","boxClass","overflow","keydown","e","keyfunction","keyup","click","css","find","mousedown","startDrag","mouseup","stopDrag","queryString","getQueryString","animate","opacity","remove","currentHeight","currentContentHeight","difference","preventDefault","beingDragged","offset","clientX","left","clientY","top","loopDrag","newPosX","newPosY","element","offsetLeft","offsetTop","offsetWidth","offsetHeigth","constrainedPosition","stayInWindow","constrainedPositionX","constrainedPositionY","stickyX","leftSticky","stickyY","topSticky","visibility","html","to","wrapInDivClass","type","child","value","updateSize","dragged","newClass","removeClass","addClass","show","hide","_stickiness","contentDiv","query","location","search","substring","vars","split","pair","decodeURIComponent","arr","STOP_BEING_STICKY_AFTER","right","bottom","maxLeft","innerWidth","maxTop","innerHeight","BindedField","object","property","parent","fieldType","allowedValues","hierarchy","constraints","title","VALID_FIELD_TYPE","_field","undefined","fieldHTML","tempClass","subfields","errorDiv","replace","f","toUpperCase","placeInParent","fields","valueWasIn","lastValue","field","checked","change","update","val","indexOf","keyCode","origin","verify","valid","msg","correct","incorrect","get","blur","String","constraintsArray","constraint","keyVal","key","trim","Number","test","includes","convertToType","message","text","BindedProperty","HANDLED_VARIABLE_TYPES","propagate","exportName","propertyType","Boolean","SmartModal","formatType","callback","buttonType","paddingTopBottom","DEFAULT_BUTTON_ROW_HTML","DEFAULT_BUTTON_HTML","closebutton","nextbutton","blankbutton","sendbutton","DEFAULT_FORMAT_TYPES","centralSmall","centralLarge","across","overlay","buttonRowHtml","scrollAppended","button","callAfterConstructor","smartModalObject","resize","updatePosition","callThenDestroy","destroy","format","topPos","leftPos","prepend","scrollElement","contentElement","scroll","scrollTop","ParamBox","DEFAULT_ROW_HTML","PARAMBOX_EMPTY_SUBTITLE_ROW_HTML","PARAMBOX_EMPTY_ROW_HTML","savebutton","importbutton","reloadbutton","getElementsByClassName","addEventListener","save","import","reloadAndImport","on","clicked","id","slideToggle","rowHtml","subtitleHtml","subtitleRows","paramPrefixIncrement","prefix","refreshView","properties","options","objectHierarchy","getDescendantProp","objectTemp","underscoredHierarchy","subtitle","lastIndexOf","rowDom","newRowInDom","bindedField","initialValue","constraintValues","values","getBindedRow","delete","subtitleRow","style","toggle","summaryArray","importedString","prompt","importedJSON","JSON","parse","setProperty","getSummaryArray","stringified","stringify","open","btoa","str","encodeURIComponent","url","href","questionPosition","description","parentObject","lastProperty","shift","propertyValue","found","SmartChart","chartOptions","canvasID","canvas","getElementById","display","defaults","responsive","maintainAspectRatio","chart","background","closeButton","saveButton","data","datasets","SmartForm","verificationFunction","noPageScroll","EMPTY_SUBTITLE_ROW_HTML","smartform_EMPTY_ROW_HTML","topCentralSmall","topCentralLarge","formElement","formId","keys","baseField","authorizedValues","initialFreeHeigth","returnValue","submit","paramBoxFullpath","scripts","getElementsByTagName","src","delimiterIndices","head","link","createElement","rel","appendChild","DEBUG_MODE_ON"],"mappings":"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","file":"experimentBoxes.max.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"), require(\"chartjs\"), require(\"experiment-mathjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"experimentBoxes\", [\"jQuery\", \"chartjs\", \"experiment-mathjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"experimentBoxes\"] = factory(require(\"jQuery\"), require(\"chartjs\"), require(\"experiment-mathjs\"));\n\telse\n\t\troot[\"experimentBoxes\"] = factory(root[\"jQuery\"], root[\"Chart\"], root[\"math\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7eae6e56f79358f65a1f","import math from 'experiment-mathjs'\nimport { DEBUG_MODE_ON } from '../config'\n\n/*\nisNumeric function in Javascript\n*/\nfunction isNumeric(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n)\n}\n\n/**\n * noop - just your friendly empty function\n *\n * @returns {undefined}\n */\nfunction noop() {}\n\n\n/**\n * Debug functions\n */\nconst debuglog = DEBUG_MODE_ON ? console.log.bind(console) : noop\nconst debugWarn = DEBUG_MODE_ON ? console.warn.bind(console) : noop\nconst debugError = DEBUG_MODE_ON ? console.error.bind(console) : noop\n\n/**\n * Allows to return an error for missing parameters.\n * @param  {String} param Optional string to add after the error.\n */\nfunction mandatory(param = '') {\n  throw new Error(`Missing parameter ${param}`)\n}\n\n/**\n * Checks the type of all given parameters, return an error if one is undefined.\n * @param  {...object} args List of arguments to checks\n * @return {bool}      true if all arguments are defined\n */\n\nfunction mustBeDefined(...args) {\n  for (let i = 0; i < args.length; i++) {\n    if (typeof args[i] === 'undefined') {\n      throw new Error(`Argument ${i} is undefined.`)\n    }\n  }\n\n  return true\n}\n\n/**\n * Checks the constructor of all given parameters, return an error if one is not as specified.\n * @param  {object} constructorObject constructor\n * @param  {...object} args         list of arguments to check\n * @return {bool}                   true if all arguments have specified constructorObject as constructor\n */\n\nfunction mustHaveConstructor(constructorObject, ...args) {\n  if (args.allHaveConstructor(constructorObject) === false) {\n    throw new Error('Wrong constructor in arguments.')\n  }\n\n  return true\n}\n\n/**\n * Returns true if o looks like a promise. From the es-promisify package.\n * https://github.com/digitaldesignlabs/es6-promisify/\n * @param  {object} o Object to test\n * @return {bool}   True if looks like a promise, false otherwise\n */\nfunction looksLikeAPromise(o) {\n  return o && typeof o.then === 'function' && typeof o.catch === 'function'\n}\n\n\n/**\n * From http://www.datchley.name/promise-patterns-anti-patterns/\n * @param  {int} ms delay in ms\n * @return {promise} promise which will resolve in delay ms\n */\nfunction delay(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n\n/**\n * @param  {int} min min delay in ms\n * @param  {int} max max delay in ms\n * @return {promise} promise which will resolve in delay ms\n */\nfunction jitter(min = mandatory(), max = mandatory()) {\n  return new Promise((resolve) => {\n    const randomDuration = (Math.rand * (max - min)) + min\n    setTimeout(resolve, randomDuration)\n  })\n}\n\n/**\n * Recurse on a given promise chain\n * @param  {Promise} promise Promise to recurse on\n * @param  {numeric} amount  amount of time to recurse\n * @return {Promise}         Promise\n */\nfunction recurse(promiseGenerator = mandatory(),\n  amount = mandatory(),\n  target = this, args = [],\n  concatOnArray = []) {\n  // Base case - just return the promisified result\n  if (amount === 0) {\n    return new Promise((resolve) => {\n      resolve(concatOnArray)\n    })\n  }\n\n\n  const next = promiseGenerator.apply(target, args).then((r) => {\n    concatOnArray = concatOnArray.concat(r)\n    return (recurse(promiseGenerator, amount - 1, target, args, concatOnArray))\n  })\n\n  return next\n}\n\n/**\n * Compatible helper to replace the now defunc Promise.defer()\n * @method Deferred\n */\nfunction Deferred() {\n  // update 062115 for typeof\n  // if (typeof (Promise) !== 'undefined' && Promise.defer) {\n  //   //need import of Promise.jsm for example: Cu.import('resource:/gree/modules/Promise.jsm');\n  //   return Promise.defer();\n  // } else if (typeof (PromiseUtils) != 'undefined' && PromiseUtils.defer) {\n  //   //need import of PromiseUtils.jsm for example: Cu.import('resource:/gree/modules/PromiseUtils.jsm');\n  //   return PromiseUtils.defer();\n  // } else {\n  /* A method to resolve the associated Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} value : This value is used to resolve the promise\n   * If the value is a Promise then the associated promise assumes the state\n   * of Promise passed as value.\n   */\n  this.resolve = null\n\n  /* A method to reject the assocaited Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} reason: The reason for the rejection of the Promise.\n   * Generally its an Error object. If however a Promise is passed, then the Promise\n   * itself will be the reason for rejection no matter the state of the Promise.\n   */\n  this.reject = null\n\n  /* A newly created Pomise object.\n   * Initially in pending state.\n   */\n  this.promise = new Promise((resolve, reject) => {\n    this.resolve = resolve\n    this.reject = reject\n  })\n  Object.freeze(this)\n  // }\n}\n\nfunction hasConstructor(constructorObject, testObject) {\n  if ((typeof testObject === 'undefined') || (testObject === null) || (testObject.constructor !== constructorObject)) {\n    return false\n  }\n  return true\n}\n\n\n/**\n * From http://stackoverflow.com/questions/3751520/how-to-generate-sequence-of-numbers-chars-in-javascript\n * TODO Pull request math js\n * @param  {object} content Repeated sequence\n * @param  {int} count   Number of time the sequence must be repeat\n * @return {array}       Array with repeated sequence\n */\nfunction rep(content = mandatory(), count = mandatory()) {\n  let result = []\n  if (typeof (content) === 'function') {\n    for (let i = 0; i < count; i++) {\n      result = result.concat(content(i))\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result = result.concat(content)\n    }\n  }\n  return result\n}\n\nfunction samplePermutation(sequence = mandatory(), repetition = false, n = null) {\n  if (sequence.constructor !== Array) {\n    throw new Error('samplePermutation: sequence needs to be an array.')\n  }\n\n  if (n === null) {\n    n = sequence.length\n  }\n\n  const copy = sequence.slice(0)\n  let permutation = []\n  let add\n  while ((repetition && (permutation.length < n)) || ((!repetition) && (copy.length))) {\n    const index = Math.floor(Math.random() * copy.length)\n    if (repetition) {\n      add = copy[index]\n    } else {\n      add = copy.splice(index, 1)\n    }\n    permutation = permutation.concat(add)\n  }\n\n  return (permutation)\n}\n\n/* =============== Personalized Matrix Functions =============== */\nfunction matrix(rows = mandatory(), cols = mandatory(), fill = 0) {\n  const matrixObject = []\n\n  for (let i = 0; i < rows; i++) {\n    matrixObject[i] = []\n    for (let j = 0; j < cols; j++) {\n      matrixObject[i][j] = fill\n    }\n  }\n\n  return (matrixObject)\n}\n\nfunction getRow(matrixObject = mandatory(), rowIndex = mandatory()) {\n  matrixObject = math.matrix(matrixObject)\n  const size = (matrixObject.size())[0]\n  const row = math.subset(matrixObject, math.index(rowIndex, math.range(0, size)))\n\n  return (row)\n}\n\nfunction rowSum(matrixObject = mandatory(), rows = null) {\n  matrixObject = math.matrix(matrixObject)\n  const size = (matrixObject.size())[0]\n  if (rows === null) {\n    rows = math.range(0, size - 1)\n  }\n  if (rows.constructor !== Array) {\n    rows = [rows]\n  }\n\n  const rowSumArray = []\n  for (let i = 0; i < rows.length; i++) {\n    rowSumArray.push(math.sum(getRow(matrixObject, rows[i])))\n  }\n\n  return (rowSumArray)\n}\n\n// set or get the diagonal of a matrix\nfunction diag(matrixObject = mandatory(), setTo = null) {\n  const rows = matrixObject.length\n  // const cols = matrixObject[0].length\n\n  const diagonalValues = []\n\n  for (let i = 0; i < rows; i++) {\n    if (setTo) {\n      matrixObject[i][i] = setTo\n    }\n    diagonalValues.push(matrixObject[i][i])\n  }\n\n  return ([diagonalValues, matrixObject])\n}\n\n/**\n * Find all the positions of a needle in a haystack string\n * @param  {string} needle   string to find\n * @param  {string} haystack string to scan\n * @return {Array}  Either -1 if no match is found or an array containing the indicies\n */\nfunction findAllIndices(needle = mandatory(), haystack = mandatory()) {\n  const indices = []\n  for (let i = 0; i < haystack.length; i++) {\n    if (haystack.substr(i, needle.length) === needle) {\n      indices.push(i)\n    }\n  }\n\n  if (indices.length) {\n    return indices\n  }\n  return -1\n}\n\nfunction extend(...args) {\n    // Variables\n  const extended = {}\n  let deep = false\n  let i = 0\n  const length = args.length\n\n    // Check if a deep merge\n  if (Object.prototype.toString.call(args[0]) === '[object Boolean]') {\n    deep = args[0]\n    i += 1\n  }\n\n    // Merge the object into the extended object\n  const merge = function (obj) {\n    for (const prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                // If deep merge and property is an object, merge properties\n        if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n          extended[prop] = extend(true, extended[prop], obj[prop])\n        } else {\n          extended[prop] = obj[prop]\n        }\n      }\n    }\n  }\n\n    // Loop through each object and conduct a merge\n  for (; i < length; i++) {\n    const obj = args[i]\n    merge(obj)\n  }\n\n  return extended\n}\n\nexport { diag,\n  rowSum,\n  getRow,\n  matrix,\n  samplePermutation,\n  rep,\n  Deferred,\n  recurse,\n  jitter,\n  delay,\n  looksLikeAPromise,\n  mustHaveConstructor,\n  mustBeDefined,\n  mandatory,\n  debuglog,\n  debugWarn,\n  debugError,\n  noop,\n  findAllIndices,\n  extend,\n  isNumeric,\n  hasConstructor,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}\n// module id = 1\n// module chunks = 0","import $ from 'jquery'\nimport { debuglog, delay } from './utilities'\n\n/** Dragable div - Parent class suporting the toolbox  */\nexport default class DragBox {\n  constructor(boxElement = null, width = null, height = null) {\n    // mock window if in node\n    if (typeof window === 'undefined') {\n      global.window = {}\n    }\n\n    this.freeHeight = true\n    if (height !== null) {\n      this.freeHeight = false\n    }\n    // constants\n    this.MAX_BINDED_PROPERTIES = 15\n    this.INIT_WIDTH = width || 400\n    this.INIT_HEIGHT = height || 300\n    this.TITLE_HEIGHT = 36\n    this.FOOTER_HEIGHT = 34\n    this.DEFAULT_BOX_THEME = 'dragbox-gray'\n    this.DEFAULT_DRAGGABLE = true\n    this.DEFAULT_STICKINESS_TYPE = 'magnetized'\n\n    // ui variables\n    this.boxId = null\n    this.boxElement = boxElement\n    this.draggable = this.DEFAULT_DRAGGABLE\n    this.boxHTML = null\n\n    // stickness\n    this.shouldStick = null\n    this.shouldMagnetize = null\n    this.isStickingX = null\n    this.isStickingY = null\n\n    this.stickiness = this.DEFAULT_STICKINESS_TYPE\n\n    // private\n    this._beingDragged = false\n    this._visibility = 'hidden'\n    this._overflow = 'hidden'\n    this._boxClass = this.DEFAULT_BOX_THEME\n    this._width = this.INIT_WIDTH\n    this._height = this.INIT_HEIGHT\n\n    // keyboard variables\n    // maps the keys pressed with either true on kedown or false on keyup\n    this.map = []\n\n    // keep mouse position at all times\n    this.currentMousePos = {\n      x: -1,\n      y: -1,\n    }\n\n    const thisObject = this\n\n    $(document).mousemove((event) => {\n      thisObject.currentMousePos.x = event.pageX\n      thisObject.currentMousePos.y = event.pageY\n    })\n\n    // check if the box already exists, else create it\n    if (!this.boxElement) {\n      // get a unique ID for the box\n      this.boxId = `dragbox${$('div[id*=\"dragbox\"]').length + 1}`\n\n      // html for creation\n      this.boxHTML = `<div id=\"${this.boxId}\" class=\"dragbox ${this._boxClass}\" style=\"display:none;\" draggable=\"false\">\n          <div class=\"col-xs-12 dragbox-container\">\n            <div class=\"col-xs-12 dragbox-title centered\"><h3>Dragbox</h3></div>\n          <div class=\"col-xs-12 dragbox-content\"></div>\n          <div class=\"col-xs-12 dragbox-footer\"></div>\n        </div>`\n\n      $(document.body).append(this.boxHTML)\n      this.boxElement = $(`#${this.boxId}`)\n    } else {\n      this.boxId = $(this.boxElement).attr('id')\n    }\n\n    // set class\n    this.boxClass = $(this.boxElement).attr('class')\n\n    // set size\n    this.width = this._width\n    this.height = this._height\n\n    // set overflow\n    this.overflow = 'hidden'\n\n    // keyboard show hide hotkeys events\n    $(document.body).keydown((e) => {\n      thisObject.keyfunction(e)\n    })\n    $(document.body).keyup((e) => {\n      thisObject.keyfunction(e)\n    })\n\n    // when clicked bring  dragbox\n    $(this.boxElement).click(() => {\n      $('.dragbox').css('zIndex', 10)\n      $(thisObject.boxElement).css('zIndex', 100)\n    })\n\n    $(this.boxElement).find('.dragbox-title').mousedown((e) => {\n      thisObject.startDrag(e)\n    })\n    $(this.boxElement).find('.dragbox-title').mouseup((e) => {\n      thisObject.stopDrag(e)\n    })\n\n    // draggin cleanUp event\n    $(document).click((e) => {\n      thisObject.stopDrag(e)\n    })\n\n    /* --- Load the query string if reload and import was used --- */\n    this.queryString = DragBox.getQueryString()\n  }\n  // destroy\n  destroy() {\n    // fade out and remove from DOM\n    const thisObject = this\n    $(this.boxElement).animate({\n      opacity: 0,\n    }, 25, () => {\n      $(thisObject.boxElement).remove()\n    })\n  }\n\n  // size methods\n  updateSize() {\n    $(this.boxElement).width(this.width)\n    if (!this.freeHeight) {\n      const currentHeight = this.boxElement.height()\n      const currentContentHeight = this.boxElement.find('.dragbox-content').height()\n      const difference = currentHeight - this.height\n      $(this.boxElement)\n        .find('.dragbox-content')\n        .css({\n          height: currentContentHeight - difference,\n        })\n      // $(this.boxElement).height(this.height)\n      // const contentHeight = this.height - this.TITLE_HEIGHT - this.FOOTER_HEIGHT - 7\n      // $(this.boxElement).css({\n      //   height: this.height,\n      //   width: this.width,\n      // })\n      // $(this.boxElement)\n      //   .find('.dragbox-container')\n      //   .css({\n      //     height: this.height,\n      //   })\n      // $(this.boxElement)\n      //   .find('.dragbox-content')\n      //   .css({\n      //     height: contentHeight,\n      //   })\n    } else {\n      $(this.boxElement).css({\n        width: this.width,\n      })\n    }\n  }\n\n  // drag methods\n  startDrag(e) {\n    // prevent classic dragging from happening\n    e.preventDefault()\n\n    // check if already being dragged, stop the dragging if so\n    if (this.beingDragged) {\n      this.beingDragged = false\n      return null\n    }\n\n    if (!this.draggable) {\n      return null\n    }\n\n    // calculate X and Y offset of the mouse compare to the top left corner of the box\n    const offset = {\n      x: e.clientX - $(this.boxElement).offset().left,\n      y: e.clientY - $(this.boxElement).offset().top,\n    }\n\n    // set the beingdragged flag to true\n    this.beingDragged = true\n\n    // start the update loop for smooth dragging\n    this.loopDrag(offset)\n\n    // another way of preventing default, just in case\n    return false\n  }\n\n  stopDrag() {\n    this.beingDragged = false\n  }\n\n  loopDrag(offset) {\n    if (this.beingDragged === true) {\n      const newPosX = this.currentMousePos.x - offset.x\n      const newPosY = this.currentMousePos.y - offset.y\n\n      const element = {\n        offsetLeft: newPosX,\n        offsetTop: newPosY,\n        offsetWidth: $(this.boxElement).width(),\n        offsetHeigth: $(this.boxElement).height(),\n      }\n\n      // maintain box totally visible and check for sticky borders\n      const constrainedPosition = DragBox.stayInWindow(element)\n      let constrainedPositionX = constrainedPosition.x\n      let constrainedPositionY = constrainedPosition.y\n\n      // stickiness\n      // glue\n      if (this.shouldStick) {\n        // make the box sticky if collided with x border\n        if ((constrainedPosition.stickyX === -2) || (constrainedPosition.stickyX === 2)) {\n          this.isStickingX = true\n        }\n\n        // for sticky window, check if the box got out of the sticky x aera before authorizing movement in x\n        if (this.isStickingX && constrainedPosition.stickyX !== 0) {\n          constrainedPositionX = constrainedPosition.leftSticky // stick to the window\n        }\n\n        // make sure stickiness disapears when out of the sticky zone\n        if (constrainedPosition.stickyX === 0) {\n          this.isStickingX = false\n        }\n\n        // make the box sticky if collided with y border\n        if ((constrainedPosition.stickyY === -2) || (constrainedPosition.stickyY === 2)) {\n          this.isStickingY = true\n        }\n\n        // for sticky window, check if the box got out of the sticky y aera before authorizing movement in y\n        if (this.isStickingY && constrainedPosition.stickyY !== 0) {\n          constrainedPositionY = constrainedPosition.topSticky // stick to the window\n        }\n\n        // make sure stickiness disapears when out of the sticky zone\n        if (constrainedPosition.stickyY === 0) {\n          this.isStickingY = false\n        }\n      }\n\n      // magnet\n      if (this.shouldMagnetize) {\n        constrainedPositionX = constrainedPosition.leftSticky\n        constrainedPositionY = constrainedPosition.topSticky\n      }\n\n      const thisObject = this\n      $(this.boxElement).animate({\n        left: constrainedPositionX,\n        top: constrainedPositionY,\n      }, 25, () => { thisObject.loopDrag(offset) })\n    }\n  }\n\n  // keyboard functions\n  keyfunction() {\n    // check if shift + P hotkeys were stroke and toggle visibility if so\n    debuglog('dragbox: keyfunction() called.', this)\n  }\n\n  // visibility functions\n  toggle() {\n    // toggle box visibility\n    if (this.visibility === 'hidden') {\n      this.visibility = 'visible'\n    } else {\n      this.visibility = 'hidden'\n    }\n  }\n\n  show() {\n    this.visibility = 'visible'\n  }\n\n  hide() {\n    this.visibility = 'hidden'\n  }\n\n  // content function\n  /**\n   * Add the specified html code to the specified target.\n   * If wrapInDivClass is set, a div of specified class is created around the html code. This could be usefull to set grid class like 'col-xs-12'.\n   * @param  {string} html           html to append to the target\n   * @param  {String} to             target identifier eg .target-class or #targetID\n   * @param  {String} wrapInDivClass Null by default. If set, creates a div with specified class wrapping the html code.\n   */\n  append(html, to = '.dragbox-content', wrapInDivClass = null, type = 'append') {\n    // TODO Convert all element creation to pure javascript -- make a react version\n    // append html to the selected child element of the dragbox\n    if (this.boxElement) {\n      if (wrapInDivClass !== null) {\n        html = `<div class=\"${wrapInDivClass}\" >${html}</div>`\n      }\n\n      if (type !== 'prepend') {\n        type = 'append'\n      }\n\n      if (to !== 'container') {\n        (this.boxElement.find(to))[type](html)\n      } else {\n        this.boxElement[type](html)\n      }\n    }\n  }\n\n  prepend(html, to = '.dragbox-content', wrapInDivClass = null) {\n    this.append(html, to, wrapInDivClass, 'prepend')\n  }\n\n  /**\n   * set or get html of the selected child element of the DragBox\n   * @param  {String} child child selector\n   * @param  {?string} value Either null if you want to get the html or a string to set the html of the node\n   * @return {?string}       If value is null, returns a string of the html content of the node.\n   */\n  html(child = '.dragbox-content', value = null) {\n    if (this.boxElement) {\n      const target = (child !== 'container') ? this.boxElement.find(child) : this.boxElement\n\n      if (value !== null) {\n        target.html(value)\n        return value\n      }\n\n      return target.html()\n    }\n\n    return null\n  }\n\n  /* ======== Setters and getters ======== */\n  set width(width) {\n    this._width = width\n    this.updateSize()\n  }\n\n  get width() {\n    return this._width\n  }\n\n  set height(height) {\n    this._height = height\n    this.updateSize()\n  }\n\n  get height() {\n    return this._height\n  }\n\n  set beingDragged(dragged) {\n    this._beingDragged = dragged\n    $(this.boxElement).attr('beingDragged', dragged)\n  }\n\n  get beingDragged() {\n    return this._beingDragged\n  }\n\n  set boxClass(newClass) {\n    if (this.boxElement) {\n      if (typeof newClass !== 'string') {\n        throw new Error('newClass must be a string')\n      }\n\n      // if there is more than one class in the string take the first one\n      // var spacePos = newClass.indexOf(\" \");\n      // if (spacePos != -1) {\n      //   newClass = newClass.substr(0, spacePos);\n      // }\n      // remove the old class from the boxElement and add the new class\n      this.boxElement.removeClass(this.boxClass).addClass(newClass)\n      this._boxClass = newClass\n    }\n  }\n\n  get boxClass() {\n    if (this.boxElement) {\n      return this._boxClass\n    }\n    return null\n  }\n\n  set visibility(visibility) {\n    this._visibility = visibility\n    if (visibility === 'visible') {\n      // $(this.boxElement).animate({\n      //   opacity: 1.0\n      // }, 150);\n      $(this.boxElement).show()\n    } else {\n      // $(this.boxElement).animate({\n      //   opacity: 0.0\n      // }, 150);\n      $(this.boxElement).hide()\n    }\n  }\n\n  get visibility() {\n    return this._visibility\n  }\n\n  set overflow(overflow) {\n    this._overflow = overflow\n    $(this.boxElement).find('.dragbox-content').css('overflow-y', overflow)\n  }\n\n  get contentElement() {\n    return $(this.boxElement).find('.dragbox-content')\n  }\n\n  set contentElement(element) {\n    console.warn('DragBox.contentElement: read-only for now')\n  }\n\n  get overflow() {\n    return this._overflow\n  }\n\n  /**\n   * Variable defining how the box behaves near screen limit, weither it stick \"glue\", it magnetize \"magnetized\" or it has no interaction \"none\".\n   * @return {string} Either glue, or magnetized\n   */\n  static get stickiness() { /**/ }\n  static get title() { /**/ }\n\n  get stickiness() {\n    return this._stickiness\n  }\n\n  set stickiness(type) {\n    // different type of stickyness for the box : \"none\", \"glue\", \"magnetized\"\n    switch (type) {\n      case 'glue':\n        this.shouldStick = true\n        this.shouldMagnetize = false\n        debuglog('stickiness set to glue')\n        break\n      case 'magnetized':\n        this.shouldStick = false\n        this.shouldMagnetize = true\n        debuglog('stickiness set to magnetized')\n        break\n      default:\n        this.shouldMagnetize = false\n        this.shouldStick = false\n        debuglog('Parambox: stickiness set to none')\n    }\n    this._stickiness = type\n  }\n\n  get title() {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html()\n    }\n  }\n\n  set title(html) {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html(html)\n      this.updateSize()\n    }\n  }\n\n  set content(html) {\n    if (this.boxElement) {\n      this.contentDiv.html(html)\n      this.updateSize()\n    }\n  }\n\n  get content() {\n    if (this.boxElement) {\n      return this.contentDiv.html()\n    }\n\n    return null\n  }\n\n  get contentDiv() {\n    if (this.boxElement) {\n      return $(this.boxElement).find('.dragbox-content')\n    }\n\n    return null\n  }\n\n  /* =============== Helper functions =============== */\n  /**\n   * From http://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters?page=1&tab=votes#tab-top\n   * @return {Array} Array containing variables of the location string.\n   */\n  static getQueryString() {\n    // This function is anonymous, is executed immediately and\n    // the return value is assigned to QueryString!\n    const queryString = {}\n    const query = window.location.search.substring(1)\n    const vars = query.split('&')\n    for (let i = 0; i < vars.length; i++) {\n      const pair = vars[i].split('=')\n      // If first entry with this name\n      if (typeof queryString[pair[0]] === 'undefined') {\n        queryString[pair[0]] = decodeURIComponent(pair[1])\n        // If second entry with this name\n      } else if (typeof queryString[pair[0]] === 'string') {\n        const arr = [queryString[pair[0]], decodeURIComponent(pair[1])]\n        queryString[pair[0]] = arr\n        // If third or later entry with this name\n      } else {\n        queryString[pair[0]].push(decodeURIComponent(pair[1]))\n      }\n    }\n    return queryString\n  }\n\n  /* ======== Static ======== */\n  // TODO make non static probably\n  // some static helper functions\n  static stayInWindow(element) {\n    if (typeof element === 'undefined') {\n      throw new Error('element is undefined')\n    }\n\n    // constants\n    const STOP_BEING_STICKY_AFTER = 0.15\n\n    // times the size in distance\n    // coordinates\n    const left = element.offsetLeft\n    const right = element.offsetLeft + element.offsetWidth\n    const top = element.offsetTop\n    const bottom = element.offsetTop + element.offsetHeigth\n\n    const maxLeft = window.innerWidth - element.offsetWidth\n    const maxTop = window.innerHeight - element.offsetHeigth\n\n    // TODO Clarify the integer constants and do not use nested ternary if possible\n    return {\n      x: left < 0 ? 0 : right > window.innerWidth ? maxLeft : left,\n      y: top < 0 ? 0 : bottom > window.innerHeight ? maxTop : top,\n      stickyX: left <= 0 ?\n        -2 : left <= STOP_BEING_STICKY_AFTER * element.offsetWidth ?\n        -1 : right >= window.innerWidth ?\n        2 : right >= (window.innerWidth - (STOP_BEING_STICKY_AFTER * element.offsetWidth)) ?\n        1 : 0,\n      stickyY: top <= 0 ? -2 :\n        top <= STOP_BEING_STICKY_AFTER * element.offsetHeigth ? -1 :\n        bottom >= window.innerHeight ? 2 :\n        bottom >= (window.innerHeight - (STOP_BEING_STICKY_AFTER * element.offsetHeigth)) ? 1 :\n        0,\n      leftSticky: left <= 0 ? 0 :\n        left <= STOP_BEING_STICKY_AFTER * element.offsetWidth ? 0 :\n        right >= window.innerWidth ? window.innerWidth - element.offsetWidth :\n        (right >= window.innerWidth - (STOP_BEING_STICKY_AFTER * element.offsetWidth)) ? window.innerWidth - element.offsetWidth :\n        left,\n      topSticky: top <= 0 ? 0 :\n        top <= STOP_BEING_STICKY_AFTER * element.offsetHeigth ? 0 :\n        bottom >= window.innerHeight ? window.innerHeight - element.offsetHeigth :\n        bottom >= window.innerHeight - (STOP_BEING_STICKY_AFTER * element.offsetHeigth) ? window.innerHeight - element.offsetHeigth :\n        top,\n    }\n  }\n\n  static getCoordinateInWindow(element) {\n    const left = element.offsetLeft\n    const right = element.offsetLeft + element.offsetWidth\n    const top = element.offsetTop\n    const bottom = element.offsetTop + element.offsetHeigth\n\n    const maxLeft = window.innerWidth - element.offsetWidth\n    const maxTop = window.innerHeight - element.offsetHeigth\n\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      maxLeft,\n      maxTop,\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DragBox.js","import $ from 'jquery'\nimport BindedProperty from './BindedProperty'\nimport { debugError, mandatory, isNumeric } from './utilities'\n\nexport default class BindedField extends BindedProperty {\n  // this class holds an active input field (select, text input, slider component)\n  // it creates a field from the selected type and bind a binded property to it\n  constructor(\n    object = mandatory('object'),\n    property = mandatory('property'),\n    parent = null,\n    fieldType = 'input',\n    allowedValues = null,\n    hierarchy = null,\n    { constraints = '', title = null } = {},\n  ) {\n    super(object, property, hierarchy)\n\n    // constant\n    this.VALID_FIELD_TYPE = ['input', 'select', 'slider', 'radio']\n\n    // field\n    this._field = undefined\n    this.fieldType = fieldType\n    this.fieldHTML = null\n    this.allowedValues = allowedValues\n    this.constraints = constraints || ''\n    this.tempClass = `binded-${typeof object}${property}`\n    this.subfields = []\n    this.errorDiv = null\n    this.title = (title || property).replace(/(^|\\s)[a-z]/g, f => f.toUpperCase())\n\n\n    // parent\n    this.parent = parent\n\n    // build the field html based on the fieldType: input, select, textaera, slider, radio\n    let html = ''\n    switch (this.fieldType) {\n      case 'input':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n        <input type=\"text\" class=\"form-control ${this.tempClass}\" data-binded=\"${property}\">\n          <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n\n            <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n          </div>\n        </div>`\n        break\n      case 'select':\n        if (!allowedValues) {\n          throw new Error('fieldType selector needs at least one allowedValues')\n        }\n\n        html += `<div class=\"form-group\">\n        <label class=\"bindedfield-label\">${this.title}</label>\n        <select class=\"form-control ${this.tempClass}\" data-binded=\"${property}\">`\n\n        for (let i = 0; i < this.allowedValues.length; i++) {\n          html += `${this.fieldHTML}<option value=\"${\n          this.allowedValues[i]\n          }\">${\n          this.allowedValues[i]\n          }</option>`\n        }\n        this.fieldHTML = `${html}</select>\n        <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n\n          <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n        </div>\n      </div>`\n        break\n      case 'textaera':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n                            <textarea class=\"form-control ${this.tempClass}\" rows=\"3\" data-binded=\"${property}\"></textarea>\n                            <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n\n                              <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n                            </div>\n                          </div>`\n        break\n      case 'slider':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n      <input type=\"range\" data-binded=\"${property}\" class=\"form-control ${this.tempClass}\" min=\"${this.allowedValues[0]}\" max=\"${this.allowedValues[1]}\" step=\"${this.allowedValues[2]}\" />\n      <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n        <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n      </div>\n      </div>`\n        break\n      case 'radio':\n        html = `<fieldset class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>`\n        for (const value of this.allowedValues) {\n          html += `<div class=\"form-check\">\n            <label class=\"form-check-label\">\n              <input type=\"radio\" class=\"form-check-input ${this.tempClass}\" name=\"${property}\" value=\"${value}\" data-binded=\"${property}\" checked>\n              ${value}\n            </label>\n          </div> `\n        }\n\n        this.fieldHTML = `${html}\n          <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n            <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n          </div>\n        </fieldset>`\n        break\n      default:\n        throw new Error(\n        'fieldType is invalid : input, selector and slider are the only valid type for now',\n      )\n    }\n\n    if (parent) {\n      this.placeInParent()\n    }\n  }\n\n  // ui function\n  placeInParent(parent = null) {\n    if (parent) {\n      this.parent = parent\n    }\n\n    // appends html to the parent\n    $(this.parent).append(this.fieldHTML)\n\n    // radio type has several fields\n    if (this.fieldType === 'radio') {\n      const fields = $(`.${this.tempClass}`)\n      let valueWasIn = false\n      let lastValue = ''\n      for (const field of fields) {\n        $(field).removeClass(`${this.tempClass}`)\n        if (field.value === this.value) {\n          valueWasIn = true\n          field.checked = true\n        }\n        this.subfields.push($(field))\n        // add event listener on change\n        $(field).change(() => {\n          this.update('field')\n        })\n\n        lastValue = field.value\n      }\n      if (!valueWasIn && !this.value) {\n        this.value = lastValue\n      }\n    } else {\n      this.field = $(`.${this.tempClass}`)\n      this.field.removeClass(`${this.tempClass}`)\n\n      if (this.allowedValues) {\n        if (this.allowedValues.constructor === Array) {\n          if (this.fieldType === 'slider') {\n            if (!this.value) { this.value = this.allowedValues[0] }\n            if (this.value < this.allowedValues[0]) { this.value = this.allowedValues[0] }\n            if (this.value > this.allowedValues[1]) { this.value = this.allowedValues[1] }\n            if (this.value % this.allowedValues[2] !== 0) { this.value = this.allowedValues[2] * Math.floor(this.value / this.allowedValues[2]) }\n            this.field.val(this.value)\n          } else if (this.allowedValues.indexOf(this.value) !== -1) {\n            this.field.val(this.value)\n          } else {\n            this.value = this.allowedValues[0]\n          }\n        } else {\n          this.field.val(this.value)\n        }\n      } else {\n        this.field.val(this.value)\n      }\n\n      this.errorDiv = $(`.${this.tempClass}-error`)\n      if (this.errorDiv.length) {\n        this.errorDiv.removeClass(`${this.tempClass}-error`)\n        this.errorDiv.hide()\n      } else {\n        this.errorDiv = null\n      }\n\n      // add event listener on change\n      this.field.change(() => {\n        this.update('field')\n      })\n\n      this.field.keydown((e) => {\n        switch (e.keyCode) {\n          case 13:\n          /* Pressed enter */\n            this.update('field')\n            break\n          default:\n          /**/\n        }\n      })\n    }\n  }\n\n  delete() {\n    // delete the div\n    this.field.parent().remove()\n    this.property = null\n    this.object = null\n  }\n\n  update(origin = 'field') {\n    if (typeof this.field === 'undefined') {\n      debugError('BindedField.update: undefined field.')\n    } else if (origin === 'field') {\n      if (this.value !== this.field.val()) {\n        this.value = this.field.val()\n        const [valid, msg] = this.verify()\n        if (valid) { this.correct() } else { this.incorrect(msg) }\n      }\n      $(this.field).get(0).blur()\n    } else if (this.field.val() !== String(this.value)) {\n      this.field.val(this.value)\n      const [valid, msg] = this.verify()\n      if (valid) { this.correct() } else { this.incorrect(msg) }\n    }\n  }\n\n  correct() {\n    // remove incorrect class\n    this.field.removeClass('bindedfield-incorrect')\n    this.error = ''\n  }\n\n  incorrect(msg = 'Field does not match constraints') {\n    // add incorrect class\n    this.field.addClass('bindedfield-incorrect')\n    this.error = msg\n  }\n\n\n  /**\n   * Verifies that the current value respect the constraints\n   * @method verify\n   * @return {bool}\n   */\n  verify() {\n    // TODO Finish implementation of constraints\n    // TODO think of creating a parser for the constraints when all is gut --- if necessary... or not\n    if ((typeof this.constraints === 'string') && (this.constraints !== '')) {\n      const constraintsArray = this.constraints.split(';')\n      for (let constraint of constraintsArray) {\n        const keyVal = constraint.split(':')\n        if (keyVal.length > 2) {\n          debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n        } else if (keyVal.length === 2) {\n          const key = keyVal[0].trim()\n          const val = keyVal[1].split(',')\n\n          switch (key) {\n            case 'length':\n              val[0] = Number(val[0].trim())\n              if (isNaN(val[0])) {\n                debugError(`BindedField.parsedConstraints: Invalid constraint value - ${constraint}`)\n              } else if ((val.length === 1) && (this.value.length !== val[0])) {\n                return [false, `Length must be ${val[0]}`]\n              } else if (val.length === 2) {\n                val[1] = Number(val[1].trim())\n                if (isNaN(val[1])) {\n                  debugError(`BindedField.parsedConstraints: Invalid constraint value - ${constraint}`)\n                } else if ((this.value.length < val[0]) || (this.value.length > val[1])) {\n                  return [false, `Length out of bounds: [${val[0]}, ${val[1]}]`]\n                }\n              }\n              break\n            default:\n              debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n          }\n        } else {\n          constraint = constraint.trim()\n          // single word constraint\n          switch (constraint) {\n            case 'mandatory':\n              if ((this.value === '') || (this.value === null)) { return [false, 'Field is mandatory'] }\n              break\n            case 'alpha':\n              if ((this.value !== '') && (/^[a-zA-Z]+$/.test(this.value) === false)) { return [false, 'Value must contain only alphabetic characters'] }\n              break\n            case 'numeric':\n              if (!isNumeric(this.value)) { return [false, 'Value must contain only numeric characters'] }\n              break\n            default:\n              debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n          }\n        }\n      }\n    }\n\n    if (this.allowedValues !== null) {\n      if (this.allowedValues.constructor === Array) {\n        if (this.fieldType === 'slider' && ((this.value < this.allowedValues[0]) || (this.value > this.allowedValues[1]) || (this.value % this.allowedValues[2] !== 0))) {\n          return [false, 'Value not allowed']\n        } else if (this.fieldType !== 'slider' && (!this.allowedValues.includes(this.value))) {\n          return [false, 'Value not allowed']\n        }\n      }\n      if ((this.allowedValues.constructor === String) && (this.allowedValues !== this.value)) { return [false, 'Value not allowed'] }\n    }\n\n    return [true, 'Ok']\n  }\n\n  // getters and setters\n  set value(value) {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error('The variable you are trying to bind is undefined - either this object or the property is incorrect')\n    } else {\n      this.object[this.property] = this.convertToType(value)\n      this.update('setter')\n    }\n  }\n\n  get value() {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error('The variable you are trying to bind is undefined - either this object or the property is incorrect')\n    } else {\n      return this.object[this.property]\n    }\n  }\n\n  get field() {\n    if (this.subfields.length) {\n      for (const field of this.subfields) {\n        if ($(field)[0].checked) {\n          return $(field)\n        }\n      }\n    }\n    return $(this._field)\n  }\n\n  set field(field) {\n    this._field = field\n  }\n\n  set error(message) {\n    if (this.errorDiv !== null) {\n      if (message) {\n        this.errorDiv.find('.bindedfield-error').text(message)\n        this.errorDiv.show()\n      } else {\n        this.errorDiv.find('.bindedfield-error').text('')\n        this.errorDiv.hide()\n      }\n    }\n  }\n\n  get error() {\n    return null\n  }\n\n  get parsedConstraints() {\n    // TODO\n  }\n\n  set parsedConstraints(constraints) {\n    debugError('BindedField.parsedConstraints: read-only')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BindedField.js","\nexport default class BindedProperty {\n  constructor(object = null, property = null, hierarchy = null) {\n    // constants\n    this.HANDLED_VARIABLE_TYPES = ['number', 'string', 'boolean']\n\n    // data properties\n    this.property = property\n    this.object = object\n    this.propagate = false\n    // to add ? chain propagation? a subscription system maybe...\n    this.type = null\n\n    // export value as hierarchy if set, else set as property name\n    this.hierarchy = hierarchy !== null ? hierarchy : property\n    this.exportName = this.hierarchy.replace(/\\./g, '')\n\n    if (!this.object) {\n      // if parent object is not set consider that the binding is with a variable in the global scope\n      this.object = window\n    }\n\n    if (property !== null) {\n      this.bind(object, property)\n    }\n  }\n\n  /* ======== Binding function ======== */\n  bind(object, property) {\n    const propertyType = typeof this.object[this.property]\n    if (propertyType === 'undefined') {\n      throw new Error(`Parambox: The variable '${property}' you are trying to bind is undefined - either this object or the property is not defined`)\n    } else {\n      if (this.HANDLED_VARIABLE_TYPES.indexOf(propertyType) === -1) {\n        throw new Error('The variable you are trying to bind is of a non-handled type (string, number or boolean)')\n      }\n\n      /**\n       * Binded property key\n       * @type {string}\n       */\n      this.property = property\n\n      /**\n       * Parent object\n       * @type {object}\n       */\n      this.object = object\n\n      /**\n       * Binded property type constructor\n       * @type {function}\n       */\n      this.type = this.object[this.property].constructor\n    }\n  }\n\n  convertToType(value) {\n    if (this.type) {\n      if (this.type === Boolean) {\n        switch (String(value).toUpperCase()) {\n          case '0':\n            return false\n          case '1':\n            return true\n          case 'FALSE':\n            return false\n          case 'TRUE':\n            return true\n          default:\n            throw new Error('BindedProperty.convertToType: invalid string value for boolean type')\n        }\n      }\n      return this.type(value)\n    }\n    throw new Error('You are trying to convert a value to a the type of the binded property but the object has no property binded to it (or no type)')\n  }\n  // getters and setters\n  set value(value) {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error(\n        'The variable you are trying to bind is undefined - either this object or the property is incorrect',\n      )\n    } else {\n      this.object[this.property] = this.convertToType(value)\n    }\n  }\n\n  get value() {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error(\n        'The variable you are trying to bind is undefined - either this object or the property is incorrect',\n      )\n    } else {\n      return this.object[this.property]\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BindedProperty.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport { hasConstructor, delay } from './utilities'\n\n\n/** Helper class creating modals */\nexport default class SmartModal extends DragBox {\n\n  constructor(formatType = 'across', callback = null, buttonType = 'closebutton', boxElement = null,\n    { stayInWindow = true,\n    paddingTopBottom = 100,\n    freeHeight = true } = { stayInWindow: true, paddingTopBottom: 100, freeHeight: true }) {\n    // call super constructor\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartmodal-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      closebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button  smartmodal-closebutton\">Close</button>',\n      nextbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-nextbutton\">Next</button>',\n      blankbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-blankbutton\"></button>',\n      sendbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-sendbutton\">Send</button>',\n    }\n    this.DEFAULT_FORMAT_TYPES = {\n      // format type desribe the topOffset, width, and height of the modal in proportion\n      // updatePosition is called when the window is resized\n      centralSmall: [0.2, 0.4, 0.3],\n      centralLarge: [0.2, 0.7, 0.6],\n      across: [0.3, 1, 0.4],\n      overlay: [0.1, 0.8, 0.8],\n    }\n\n    // callback\n    this.callback = callback\n\n    // ui\n    this.draggable = false\n    this.formatType = formatType\n    this.stayInWindow = stayInWindow\n    this.freeHeight = freeHeight\n    this.paddingTopBottom = paddingTopBottom\n    this.buttonRowHtml = this.DEFAULT_BUTTON_ROW_HTML\n    this.scrollAppended = false\n\n    if (!(buttonType in this.DEFAULT_BUTTON_HTML)) {\n      throw new Error('buttonType invalid')\n    }\n    this.buttonType = buttonType\n\n    // row hold the row object in dom as well as the bindedField object {rowDom: row, bindedField: bindedField}\n    this.rows = []\n\n    // set dragbox title\n    this.title = '<center><h5>Smart Modal</h5></center>'\n\n    // setup the button\n    this.append(this.buttonRowHtml, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML[this.buttonType],\n      '.smartmodal-buttonrow',\n    )\n\n    this.button = $(this.boxElement).find(`.smartmodal-${this.buttonType}`)\n\n    // update position to fit the screen adequatly and show\n    this.callAfterConstructor()\n\n    // event listener for window resize updates the size and position.\n    const smartModalObject = this\n    $(window).resize(() => {\n      smartModalObject.updatePosition()\n    })\n\n    // event listener on the button\n    $(this.button).click(() => {\n      smartModalObject.callThenDestroy()\n    })\n  }\n\n  // after setup life cycle function\n  callAfterConstructor() {\n    // update position to fit the screen adequatly and show\n    this.updateSize()\n    this.updatePosition()\n    // this.show()\n  }\n\n  // look for a callback then destroy\n  callThenDestroy() {\n    if (this.callback) {\n      this.callback()\n    }\n\n    this.destroy()\n  }\n\n  // position function\n  updatePosition() {\n    // var coordinates = Dragbox.getCoordinateInWindow(this.boxElement);\n    const innerHeight = window.innerHeight\n    const innerWidth = window.innerWidth\n    const format = this.DEFAULT_FORMAT_TYPES[this.formatType]\n    let topPos = format[0] * innerHeight\n    const leftPos = innerWidth * ((1 - format[1]) / 2)\n    const width = innerWidth * format[1]\n    let height = innerHeight * format[2]\n\n    if ((this.stayInWindow) && (this.boxElement.height() + topPos > innerHeight)) {\n      this.freeHeight = false\n      const offset = innerHeight - this.boxElement.height()\n      topPos = offset > this.paddingTopBottom ? offset / 2 : this.paddingTopBottom / 2\n      height = offset > this.paddingTopBottom ? innerHeight - offset : innerHeight - this.paddingTopBottom\n      this.overflow = 'scroll'\n\n      if (!this.scrollAppended) {\n        this.prepend('<span class=\"smartmodal-scroll\"> scroll down </span>', '.smartmodal-buttonrow')\n        this.scrollAppended = true\n        const scrollElement = $(this.boxElement).find('.smartmodal-scroll')\n        this.contentElement.scroll(() => {\n          if (this.contentElement.scrollTop() !== 0) {\n            scrollElement.hide()\n          } else {\n            scrollElement.show()\n          }\n        })\n      }\n    }\n\n    this.width = width\n    this.height = height\n\n\n    $(this.boxElement).css({\n      left: leftPos,\n      top: topPos,\n    })\n    // $(this.boxElement).animate({\n    //   left: leftPos,\n    //   top: topPos,\n    // }, 25, () => {})\n    return false\n  }\n\n\n  set title(html) {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html(html)\n      this.updateSize()\n      delay(10).then(() => { this.updatePosition(); this.show() })\n    }\n  }\n\n  set content(html) {\n    if (this.boxElement) {\n      this.contentDiv.html(html)\n      this.updateSize()\n      delay(10).then(() => { this.updatePosition(); this.show() })\n    }\n  }\n\n\n  set buttonText(text = 'Close') {\n    if (hasConstructor($, this.button) && hasConstructor(String, text)) {\n      this.button.html(text)\n    }\n  }\n\n  get buttonText() {\n    if (hasConstructor($, this.button)) {\n      return this.button.html()\n    }\n    return undefined\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartModal.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport BindedField from './BindedField'\n\n/** Dragable box holding double binded parameters for live development */\nexport default class ParamBox extends DragBox {\n  constructor(boxElement = null) {\n    // call super constructor\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_ROW_HTML = '<div class=\"col-md-12 dragbox-row paramboxtmprow\"></div>'\n\n    this.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML = '<div class=\"col-md-12 dragbox-row paramboxtmprow\"><a class=\"parambox-subtitle\">Subtitle</a></div>'\n\n    this.PARAMBOX_EMPTY_ROW_HTML = '<div class=\"col-md-12 dragbox-row parambox-empty\"><center>No parameters binded.</center></div>'\n\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row parambox-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      savebutton: '<button type=\"button\" class=\"btn btn-secondary btn-block dragbox-button parambox-savebutton\">Save</button>',\n      importbutton: '<button type=\"button\" class=\"btn btn-secondary  btn-block dragbox-button parambox-importbutton\">Import</button>',\n      reloadbutton: '<button type=\"button\" class=\"btn btn-secondary btn-block dragbox-button parambox-reloadbutton\">Reload</button>',\n    }\n\n    // setup the buttons\n    this.append(this.DEFAULT_BUTTON_ROW_HTML, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML.savebutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.importbutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.reloadbutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n\n    const thisObject = this\n    this.boxElement[0].getElementsByClassName(\n      'parambox-savebutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.save(e)\n    })\n    this.boxElement[0].getElementsByClassName(\n      'parambox-importbutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.import(e)\n    })\n    this.boxElement[0].getElementsByClassName(\n      'parambox-reloadbutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.reloadAndImport(e)\n    })\n\n    $(document).on('click', '.parambox-subtitle', function clicked() {\n      const id = $(this).attr('subtitle-id')\n      $(`[parambox-belong-to='${id}']`).slideToggle(250)\n    })\n\n    // ui\n    this.rowHtml = this.DEFAULT_ROW_HTML\n    this.subtitleHtml = this.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML\n\n    // row hold the row object in dom as well as the bindedField object {rowDom: row, bindedField: bindedField}\n    this.rows = []\n\n    this.subtitleRows = {}\n\n    // set dragbox title\n    this.title = '<h4><i class=\"fa fa-cog fa-1x\"></i> Parameter Box</h4>'\n\n    // set overflow\n    this.overflow = 'scroll'\n\n    // Prevent freeHeight\n    this.freeHeight = false\n\n    // set prefix for exports TODO: IMPLEMENT IT IN EXPORTS\n    if (typeof window.paramPrefixIncrement === 'undefined') {\n      window.paramPrefixIncrement = 0\n    } else {\n      window.paramPrefixIncrement += 1\n    }\n\n    this.prefix = `paramBox${window.paramPrefixIncrement}`\n\n    // update size and refreshView\n    this.updateSize()\n\n    this.refreshView()\n  }\n\n  // binding methods\n  bind(object, properties, options = null) {\n    if (typeof object === 'undefined') {\n      throw new Error('object is undefined')\n    }\n\n    let objectHierarchy = null\n\n    if (properties.constructor !== Array) {\n      properties = [properties]\n    }\n\n    for (let i = 0; i < properties.length; i++) {\n      objectHierarchy = this.getDescendantProp(object, properties[i])\n      // TODO use lodash ?\n      const objectTemp = objectHierarchy[0]\n      const property = objectHierarchy[1]\n\n      const underscoredHierarchy = properties[i].replace(/\\./g, '')\n      const subtitle = properties[i].substring(0, properties[i].lastIndexOf('.'))\n\n      const rowDom = this.newRowInDom(subtitle)\n      let bindedField = null\n\n      /* --- look for a value in the query string for this property --- */\n      let initialValue = null\n      if (typeof this.queryString[underscoredHierarchy] !== 'undefined') {\n        initialValue = this.queryString[underscoredHierarchy]\n      }\n\n      // look for a constrained field\n      if ((options !== null) && (typeof options[properties[i]] !== 'undefined')) {\n        let type = options[properties[i]].type || 'input'\n        let constraintValues = null\n        if (options[properties[i]].constructor === Array) {\n          constraintValues = options[properties[i]]\n          type = options[properties[i]].type || 'select'\n        } else if (typeof options[properties[i]].values !== 'undefined') {\n          constraintValues = options[properties[i]].values\n          type = options[properties[i]].type || 'select'\n        }\n\n\n        if (initialValue !== null) {\n          if ((constraintValues !== null) && (type !== 'slider') && (constraintValues.indexOf(initialValue) === -1)) {\n            throw new Error(`ParamBox.bind: cannot set initial value to query string value of ${initialValue} because it is not in the options array.`)\n          }\n\n          objectTemp[property] = objectTemp[property].constructor(initialValue)\n        }\n\n        bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            type,\n            constraintValues,\n            properties[i],\n          )\n      }\n\n\n      // if no constrained field found, create the most relevant type of field\n      if (bindedField === null) {\n        if (initialValue !== null) {\n          objectTemp[property] = objectTemp[property].constructor(initialValue)\n        }\n\n        if (objectTemp[property].constructor === Boolean) {\n          bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            'select', ['TRUE', 'FALSE'],\n            properties[i],\n          )\n        } else {\n          bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            'input',\n            null,\n            properties[i],\n          )\n        }\n      }\n\n      this.rows.push(this.getBindedRow(rowDom, bindedField))\n    }\n\n    this.refreshView()\n  }\n\n  unbind(object, property) {\n    for (let i = 0; i < this.rows.length; i++) {\n      const bindedField = this.rows[i].bindedField\n\n      if (bindedField.object === object && bindedField.property === property) {\n        this.rows.splice(i, 1)\n        bindedField.delete()\n      }\n    }\n\n    this.refreshView()\n  }\n\n  // ui methods\n  newRowInDom(subtitle = '') {\n    if (subtitle !== '') {\n      if (!(subtitle in this.subtitleRows)) {\n        let subtitleRow = null\n        $(this.boxElement).find('.dragbox-content').append(this.subtitleHtml)\n        subtitleRow = this.boxElement.find('.paramboxtmprow')\n        $(subtitleRow)\n          .removeClass('paramboxtmprow')\n          .find('a')\n          .attr('subtitle-id', subtitle)\n          .text(subtitle)\n        this.subtitleRows[subtitle] = $(subtitleRow)\n      }\n    }\n\n    let row = null\n    $(this.boxElement).find('.dragbox-content').append(this.rowHtml)\n    row = this.boxElement.find('.paramboxtmprow')\n    $(row).removeClass('paramboxtmprow').attr('parambox-belong-to', subtitle)\n\n    return row\n  }\n\n  getBindedRow(rowDom, bindedField) { // eslint-disable-line\n    return {\n      rowDom,\n      bindedField,\n    }\n  }\n\n  refreshView() {\n    // TODO: maybe check if all binded field are displayed in the paramBox. if not add them. get rid of unbinded field\n    /* --- Add an export button if there is at least one binded property --- */\n    if (this.rows.length) {\n      this.boxElement[0].getElementsByClassName(\n        'parambox-buttonrow',\n      )[0].style.visibility = 'visible'\n    } else {\n      this.boxElement[0].getElementsByClassName(\n        'parambox-buttonrow',\n      )[0].style.visibility = 'hidden'\n      // TODO: add empty message\n    }\n\n    /* --- Adapt the box's height to the number of parameters --- */\n    let height = 80 + (this.rows.length * 75)\n    if (height > 600) {\n      height = 600\n    }\n\n    this.height = height\n  }\n\n  keyfunction(e) {\n    // check if shift + P hotkeys were stroke and toggle visibility if so\n    this.map[e.keyCode] = e.type === 'keydown'\n\n    // hide and show parameter box\n    if (this.map[16] && this.map[80]) {\n      // 16 == Shift - 80 == P\n      // make sure to reset value in case keyup event is ignored (keep shift true for rapid toggle)\n      this.map[80] = false\n\n      // toggle box visibility\n      this.toggle()\n\n      // prevent default action if any\n      e.preventDefault()\n    }\n  }\n\n  /* ======== Import/Export functions ======== */\n  getSummaryArray() {\n    const summaryArray = []\n    for (let i = 0; i < this.rows.length; i++) {\n      const bindedField = this.rows[i].bindedField\n      summaryArray.push({\n        property: bindedField.property,\n        value: bindedField.value,\n        hierarchy: bindedField.hierarchy,\n        exportName: bindedField.exportName,\n      })\n    }\n\n    return summaryArray\n  }\n\n  import() {\n    // make it a smart form\n    // but while smart forms are finished use a simple prompt\n    const importedString = prompt('Enter a JSON string:')\n    let importedJSON = null\n    try {\n      importedJSON = JSON.parse(importedString)\n    } catch (e) {\n      console.error('ParamBox.import: Invalid JSON string - Parsing error:', e)\n    }\n\n    if (importedJSON !== null) {\n      if (importedJSON.constructor !== Array) {\n        console.error(\n          'ParamBox.import: Invalid JSON string - the parent object needs to be of the same structure as the summaryArray',\n        )\n      }\n\n      for (let i = 0; i < importedJSON.length; i++) {\n        if (typeof importedJSON[i].property === 'undefined') {\n          console.error(\n            `ParamBox.import: importedJSON[${i\n            }].property is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray.`,\n          )\n        }\n        if (typeof importedJSON[i].value === 'undefined') {\n          console.error(\n            `ParamBox.import: importedJSON[${i\n            }].value is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray.`,\n          )\n        }\n\n        this.setProperty(importedJSON[i].property, importedJSON[i].value)\n      }\n    }\n  }\n\n  save() {\n    // get summary array\n    const summaryArray = this.getSummaryArray()\n\n    // stringify summary object\n    const stringified = JSON.stringify(summaryArray, null, 2)\n\n    // opens a new window with the stringified json\n    let height = 30 + (summaryArray.length * 70)\n    if (height > 500) {\n      height = 500\n    }\n    window.open(\n      `data:application/json;${\n      window.btoa ? `base64,${btoa(stringified)}` : stringified}`,\n      'ParamBox.save',\n      `width=400,height=${height}`,\n    )\n  }\n\n  reloadAndImport() {\n    /* --- Serialize the parameters in URL format --- */\n    const summaryArray = this.getSummaryArray()\n    let str = ''\n    for (let i = 0; i < summaryArray.length; i++) {\n      if (str !== '') {\n        str += '&'\n      }\n      str += `${summaryArray[i].exportName}=${\n        encodeURIComponent(summaryArray[i].value)}`\n    }\n\n    /* --- Append the parameters and reload the page --- */\n    let url = window.location.href\n    const questionPosition = url.indexOf('?')\n    if (questionPosition !== -1) {\n      // delete arguments from the URL\n      url = url.substring(0, questionPosition)\n    }\n    url += `?${str}`\n    window.location.href = url\n  }\n\n  /**\n   * Gets the last object and property from a string description of object hierachy\n   * @param  {object} object      Top object from which the hierarchy starts\n   * @param  {string} description String describing the object hierachy (e.g this.object.has.property )\n   * @return {array}             [parentObject, lastProperty, propertyValue]\n   */\n  getDescendantProp(object, description) { // eslint-disable-line\n    const arr = description.split('.')\n    let parentObject = null\n    let lastProperty = null\n\n    while (arr.length) {\n      parentObject = object\n      lastProperty = arr.shift()\n\n      if (typeof object[lastProperty] === 'undefined') {\n        throw new Error(`object property ${lastProperty} is undefined`)\n      }\n\n      object = object[lastProperty]\n    }\n\n    /* the last object of the while is the value of the specified property */\n    const propertyValue = object\n\n    return [parentObject, lastProperty, propertyValue]\n  }\n\n  setProperty(property, value) {\n    if (property.constructor !== String) {\n      throw new Error('ParamBox.setProperty: property needs to be a string.')\n    }\n\n    let found = false\n    for (let i = 0; i < this.rows.length; i++) {\n      if (this.rows[i].bindedField.property === property) {\n        this.rows[i].bindedField.value = value\n        found = true\n      }\n    }\n\n    if (found === false) {\n      console.warn(`ParamBox.setProperty: did not find property ${property}`)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ParamBox.js","import Chart from 'chartjs'\nimport $ from 'jquery'\nimport SmartModal from './SmartModal'\nimport { mandatory } from './utilities'\n\n/** Wrapper class for easy chart creation using chart.js and SmartModal */\nexport default class SmartChart extends SmartModal {\n  constructor(options = mandatory(), callback = null, boxElement = null) {\n    if (typeof Chart === 'undefined') {\n      throw new Error('SmartChart.constructor: Chart.js is not loaded.')\n    }\n\n    if (options.constructor !== Object) {\n      throw new Error(\n        'SmartChart.constructor: options needs to be an object (chart.js chart options)',\n      )\n    }\n    super('overlay', callback, 'closebutton', boxElement)\n    // save options\n    this.chartOptions = $.extend(true, {}, options)\n\n    // set dragbox title\n    this.title = '<center><h5>Smart Chart</h5></center>'\n\n    // Create canvas\n    const canvasID = `chart-canvas${$('canvas').length + 1}`\n    this.content = `<canvas id=\"${canvasID}\" class=\"chart-canvas\"></canvas>`\n    this.canvas = document.getElementById(canvasID)\n\n    if (typeof options.options.title.text !== 'undefined') {\n      options.options.title.display = false\n      this.title = `<center><h5>${options.options.title.text}</h5></center>`\n    }\n\n    // Create chart\n    try {\n      Chart.defaults.global.responsive = true\n      Chart.defaults.global.maintainAspectRatio = false\n      this.chart = new Chart(this.canvas, options)\n    } catch (e) {\n      throw new Error(\n        `SmartChart.constructor: could not build the chart. Error: ${e}`,\n      )\n    }\n\n    this.canvas.style.background = 'white'\n    this.boxClass = 'dragbox dragbox-white-boxshadow'\n\n    // setup footer and buttons\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartchart-buttonrow\"><div class=\"col-xs-10\"></div></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      closebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button  smartchart-closebutton\">Close</button>',\n      savebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartchart-savebutton\">Save</button>',\n    }\n\n    this.html('.dragbox-footer', this.DEFAULT_BUTTON_ROW_HTML)\n\n    this.append(\n      this.DEFAULT_BUTTON_HTML.savebutton,\n      '.smartchart-buttonrow',\n      'col-xs-1 centered',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.closebutton,\n      '.smartchart-buttonrow',\n      'col-xs-1 centered',\n    )\n\n    this.closeButton = $(this.boxElement).find('.smartchart-closebutton')\n    this.saveButton = $(this.boxElement).find('.smartchart-savebutton')\n    this.button = this.closeButton\n\n    // event listener on the button\n    $(this.closeButton).click(() => {\n      this.callThenDestroy()\n    })\n\n    $(this.saveButton).click(() => {\n      this.save()\n    })\n\n    this.updatePosition()\n    this.updateSize()\n\n    setTimeout(() => {\n      this.chart.resize()\n      this.show()\n    },\n      250,\n    )\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  callAfterConstructor() { /* Overides super */ }\n\n  /** Overides SmartModal.callThenDestroy() function */\n  callThenDestroy() {\n    // look for a callback then destroy\n    if (this.callback) {\n      this.callback()\n    }\n\n    // if chart destroy the chart .destroy()\n    if (typeof this.chart !== 'undefined' && typeof Chart !== 'undefined') {\n      if (this.chart.constructor === Chart) {\n        this.chart.destroy()\n      }\n    }\n    // call Dragbox.destroy()\n    this.destroy()\n  }\n\n  save() {\n    // stringify summary object\n    const stringified = JSON.stringify(this.chartOptions, null, 2)\n\n    // opens a new window with the stringified json\n    let height = 150 + (this.chartOptions.data.datasets.length * 150)\n    if (height > 500) {\n      height = 500\n    }\n\n    window.open(\n      `data:application/json;${\n      window.btoa ? `base64,${btoa(stringified)}` : stringified}`,\n      'SmartChart.save',\n      `width=400,height=${height}`,\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartChart.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport BindedField from './BindedField'\nimport { mandatory, debuglog, extend, delay } from './utilities'\n\n// TODO: Class generating a form based on preset fields and managing */\nexport default class SmartForm extends DragBox {\n  /**\n   * Smart form receives two parameters SmartForm({options}, boxElement)\n   * @method constructor\n   * options = {\n   * @param  {Object}       [fields=mandatory()]     type = null : input, select, textaera, slider, radio\n   *                                                 constraints =  null : list of constraints that will be automatically verified: mandatory; alpha; numeric; lenght:XX; contains:a,b,@,.;\n   *                                                 authorizedValues: '': authorized values TODO maybe merge it with constraints\n   *                                                 value: '': field value / initial value\n   * @param  {String}       [format='overlay']       [description]\n   * @param  {Numeric}      [height=null]           [description]\n   * @param  {Numeric}      [width=null]            [description]\n   * @param  {Function}     [callback=null]        [description]\n   * @param  {String}       [url=null]               [description]\n   * @param  {Function}     [verificationFunction=() => true }] [description]\n   * }\n   * @param  {Object}       [boxElement=null]        [description]\n   * @return {SmartForm}                             [description]\n   */\n  constructor({\n    fields = mandatory(),\n    title = 'Form',\n    format = 'overlay',\n    height = null,\n    width = null,\n    callback = null,\n    url = null,\n    target = '_blank',\n    verificationFunction = () => true,\n    freeHeight = true,\n    noPageScroll = true, // if set to true the height is free until reaching the limit of the page in heigh, then it is set not to go beyond it -20px\n  }, boxElement = null) {\n    if (fields.constructor !== Object) {\n      throw new Error('SmartForm: fields is not an object.')\n    }\n    /* --- Create the DragBox for the form --- */\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartformtmprow\"></div>'\n\n    this.EMPTY_SUBTITLE_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartformtmprow\"><a class=\"smartform-subtitle\">Subtitle</a></div>'\n\n    this.smartform_EMPTY_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartform-empty\"><center>No parameters binded.</center></div>'\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartform-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      sendbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartform-sendbutton\">Send</button>',\n    }\n    this.DEFAULT_FORMAT_TYPES = {\n      // format type desribe the topOffset, width, and height of the modal in proportion\n      // updatePosition is called when the window is resized\n      centralSmall: [0.2, 0.4, 0.3],\n      centralLarge: [0.2, 0.7, 0.6],\n      across: [0.3, 1, 0.4],\n      overlay: [0.1, 0.8, 0.8],\n      topCentralSmall: [0.1, 0.4, 0.3],\n      topCentralLarge: [0.1, 0.7, 0.6],\n    }\n\n    // ui\n    this.rowHtml = this.DEFAULT_ROW_HTML\n    this.subtitleHtml = this.EMPTY_SUBTITLE_ROW_HTML\n\n\n    // TODO Create the form element IF url !== null, else only use the callback to handle data.\n    // constraints can be functions like checkPassword(x) { return (bool) }\n    // There is constraint function by default\n    this.formElement = null\n    this.formId = null\n    if (url !== null) {\n      this.formId = `smartform-${this.boxId}`\n      this.append(`<form id='${this.formId}' action=\"${url}\" method=\"post\" target=\"${target}\">`)\n      this.formElement = this.boxElement.find(`#${this.formId}`).get()\n    }\n\n    /**\n     * Holds a reference to the fields by key\n     * @type {Object}\n     */\n    this.fields = {}\n    const keys = Object.keys(fields)\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      // fields needs to have a name and type property\n      if (typeof fields[key].type === 'undefined') {\n        throw new Error(`SmartForm: field[${i}].type is undefinned`)\n      }\n      const baseField = {\n        type: null,\n        constraints: null, // list of constraints that will be automatically verified: mandatory; alpha; numeric; lenght:XX; contains:a,b,@,.;\n        authorizedValues: '', // athorized values\n        bindedField: null,\n        parent: null,\n        value: '',\n        row: null,\n        title: key,\n      }\n      fields[key] = extend(baseField, fields[key]) // TODO Either migrate to lodash or rewrite an extend function as well a a keys function\n      this.fields[key] = fields[key]\n      // TODO Create a form row\n      this.fields[key].row = this.newRowInDom(this.fields[key].parent)\n      this.fields[key].bindedField = new BindedField(this.fields[key], 'value', this.fields[key].row, this.fields[key].type, this.fields[key].authorizedValues, null,\n      { constraints: this.fields[key].constraints, title: this.fields[key].title }) // TODO transform the call to an option object with parameters\n    }\n    if (url !== null) {\n      this.append('</form>')\n    }\n\n\n    // callback\n    this.callback = typeof callback === 'function' ? callback : (fields) => { debuglog(fields) }\n    this.verificationFunction = verificationFunction\n\n    // ui\n    this.draggable = false\n    this.overflow = 'scroll'\n    this.freeHeight = freeHeight\n    this.initialFreeHeigth = freeHeight\n    this.noPageScroll = noPageScroll\n    this.formatType = format // TODO add height/width custom definition\n    this.buttonRowHtml = this.DEFAULT_BUTTON_ROW_HTML\n\n    this.buttonType = 'sendbutton'\n\n    // set dragbox title\n    this.title = `<center><h5>${title}</h5></center>`\n\n    // setup the button\n    this.append(this.buttonRowHtml, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML[this.buttonType],\n      '.smartform-buttonrow',\n    )\n\n    this.button = $(this.boxElement).find(`.smartform-${this.buttonType}`)\n\n    // update position to fit the screen adequatly and show\n    this.callAfterConstructor()\n\n    // event listener for window resize updates the size and position.\n    $(window).resize(() => {\n      this.updatePosition()\n    })\n\n    // event listener on the button\n    $(this.button).click(() => {\n      if (this.verify() && this.verificationFunction()) {\n        this.callThenDestroy()\n      }\n    })\n\n    $(document).on('click', '.smartform-subtitle', function clicked() {\n      const id = $(this).attr('subtitle-id')\n      $(`[smartform-belong-to='${id}']`).slideToggle(250)\n    })\n  }\n\n  /* ======= Verification methods ======= */\n  verify() {\n    let returnValue = true\n    for (const field in this.fields) {\n      if (this.fields[field].hasOwnProperty('bindedField')) {\n        const [valid, msg] = this.fields[field].bindedField.verify()\n        if (!valid) {\n          this.fields[field].bindedField.incorrect(msg)\n          returnValue = false\n        } else {\n          this.fields[field].bindedField.correct()\n        }\n      }\n    }\n    return returnValue\n  }\n\n  // after setup life cycle function\n  callAfterConstructor() {\n    // update position to fit the screen adequatly and show\n    this.updatePosition()\n    this.updateSize()\n    this.show()\n  }\n\n  // look for a callback then destroy\n  callThenDestroy() {\n    if (this.callback) {\n      this.callback(this.fields)\n    }\n\n    if (this.formElement !== null) {\n      this.formElement.submit()\n    }\n\n    this.destroy()\n  }\n\n\n  /* ======= UI Methods ======= */\n  newRowInDom(subtitle = '') {\n    if (subtitle) {\n      if (!(subtitle in this.subtitleRows)) {\n        let subtitleRow = null\n        this.contentElement.append(this.subtitleHtml)\n        subtitleRow = this.boxElement.find('.smartformtmprow')\n        $(subtitleRow)\n          .removeClass('smartformtmprow')\n          .find('a')\n          .attr('subtitle-id', subtitle)\n          .text(subtitle)\n        this.subtitleRows[subtitle] = $(subtitleRow)\n      }\n    }\n\n    let row = null\n    this.contentElement.append(this.rowHtml)\n    row = this.boxElement.find('.smartformtmprow')\n    $(row).removeClass('smartformtmprow').attr('smartform-belong-to', subtitle)\n\n\n    return row\n  }\n\n  // position function\n  updatePosition() {\n    // var coordinates = Dragbox.getCoordinateInWindow(this.boxElement);\n    const innerHeight = window.innerHeight\n    const innerWidth = window.innerWidth\n    const format = this.DEFAULT_FORMAT_TYPES[this.formatType]\n    const topPos = format[0] * innerHeight\n    const leftPos = innerWidth * ((1 - format[1]) / 2)\n    $(this.boxElement).css({\n      left: leftPos,\n      top: topPos,\n    })\n    delay(10).then(() => {\n      const width = innerWidth * format[1]\n      if (!this.initialFreeHeigth) {\n        this.height = innerHeight * format[2]\n      } else if ((this.initialFreeHeigth) && (this.noPageScroll) && (this.boxElement.height() + topPos > innerHeight - 20)) {\n        this.freeHeight = false\n        this.height = innerHeight - 20 - topPos\n      }\n\n      this.width = width\n    })\n    // $(this.boxElement).animate({\n    //   left: leftPos,\n    //   top: topPos,\n    // }, 25, () => {})\n    return false\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartForm.js","/**\n * Experiment-boxes\n * Created. 2016\n *\n * Plug and play tools for easy development in js. Part of the experiment.js toolbox.\n *\n * Authors. Albert Buchard\n *\n * Requires: bootstrap and jQuery\n *\n * LICENSE MIT\n */\n\nimport DragBox from './src/DragBox'\nimport ParamBox from './src/ParamBox'\nimport SmartModal from './src/SmartModal'\nimport SmartChart from './src/SmartChart'\nimport SmartForm from './src/SmartForm'\nimport BindedProperty from './src/BindedProperty'\nimport BindedField from './src/BindedField'\nimport { findAllIndices } from './src/utilities'\n\nif (typeof window !== 'undefined') {\n  window.DragBox = DragBox\n  window.ParamBox = ParamBox\n  window.SmartModal = SmartModal\n  window.SmartChart = SmartChart\n  window.SmartForm = SmartForm\n  window.BindedProperty = BindedProperty\n  window.BindedField = BindedField\n\n  /* === Get the absolute path of the library === */\n  let paramBoxFullpath = './'\n  const scripts = document.getElementsByTagName('script')\n  if (scripts.length) {\n    paramBoxFullpath = scripts[scripts.length - 1].src\n    const delimiterIndices = findAllIndices('/', paramBoxFullpath)\n    paramBoxFullpath = paramBoxFullpath.substr(0, delimiterIndices[delimiterIndices.length - 1])\n  }\n\n/* === Add the paramBox css once the page is loaded === */\n  document.addEventListener('DOMContentLoaded', () => {\n    const head = document.getElementsByTagName('head')[0]\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.type = 'text/css'\n    link.href = `${paramBoxFullpath}/experimentBoxes.css`\n    head.appendChild(link)\n  })\n}\n\nexport {\n  DragBox,\n  ParamBox,\n  SmartModal,\n  SmartForm,\n  SmartChart,\n  BindedProperty,\n  BindedField,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./builder.js","const DEBUG_MODE_ON = true\n\nexport { DEBUG_MODE_ON }\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 11\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"chartjs\",\"commonjs2\":\"chartjs\",\"amd\":\"chartjs\",\"root\":\"Chart\"}\n// module id = 12\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-mathjs\",\"commonjs2\":\"experiment-mathjs\",\"amd\":\"experiment-mathjs\",\"root\":\"math\"}\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}