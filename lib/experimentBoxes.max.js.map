{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5d747cfe0a6263d75a5b","webpack:///./src/utilities.js","webpack:///external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}","webpack:///./src/DragBox.js","webpack:///./src/BindedField.js","webpack:///./src/BindedProperty.js","webpack:///./src/SmartModal.js","webpack:///./src/ParamBox.js","webpack:///./src/SmartChart.js","webpack:///./src/SmartForm.js","webpack:///./builder.js","webpack:///./config.js","webpack:///(webpack)/buildin/global.js","webpack:///external {\"commonjs\":\"chartjs\",\"commonjs2\":\"chartjs\",\"amd\":\"chartjs\",\"root\":\"Chart\"}","webpack:///external {\"commonjs\":\"experiment-mathjs\",\"commonjs2\":\"experiment-mathjs\",\"amd\":\"experiment-mathjs\",\"root\":\"math\"}"],"names":["isNumeric","n","isNaN","parseFloat","isFinite","noop","debuglog","window","DEBUG_MODE_ON","log","debugWarn","warn","debugError","error","mandatory","param","Error","mustBeDefined","args","i","length","mustHaveConstructor","constructorObject","allHaveConstructor","looksLikeAPromise","o","then","catch","delay","ms","Promise","resolve","setTimeout","parseDate","str","t","match","d","m","y","date","Date","getFullYear","getMonth","scorePassword","pass","score","letters","variations","digits","test","lower","upper","nonWords","variationCount","check","hasOwnProperty","parseInt","passwordStrength","jitter","min","max","randomDuration","Math","rand","recurse","promiseGenerator","amount","target","concatOnArray","next","apply","r","concat","Deferred","reject","resolved","rejected","pending","status","promise","data","e","constructor","String","hasConstructor","testObject","rep","content","count","result","samplePermutation","sequence","repetition","Array","copy","slice","permutation","add","index","floor","random","splice","matrix","rows","cols","fill","matrixObject","j","getRow","rowIndex","size","row","subset","range","rowSum","rowSumArray","push","sum","diag","setTo","diagonalValues","findAllIndices","needle","haystack","indices","substr","extend","extended","deep","Object","prototype","toString","call","merge","obj","prop","DragBox","boxElement","width","height","global","freeHeight","MAX_BINDED_PROPERTIES","INIT_WIDTH","INIT_HEIGHT","TITLE_HEIGHT","FOOTER_HEIGHT","DEFAULT_BOX_THEME","DEFAULT_DRAGGABLE","DEFAULT_STICKINESS_TYPE","DEFAULT_FORMAT_TYPES","centralSmall","centralLarge","across","overlay","topCentralSmall","topCentralLarge","boxId","draggable","boxHTML","shouldStick","shouldMagnetize","isStickingX","isStickingY","stickiness","_beingDragged","_visibility","_overflow","_boxClass","_width","_height","map","currentMousePos","x","thisObject","document","mousemove","event","pageX","pageY","body","append","attr","boxClass","overflow","addEventListener","keyfunction","click","css","find","mousedown","startDrag","mouseup","stopDrag","queryString","getQueryString","animate","opacity","removeEventListener","remove","currentHeight","currentContentHeight","difference","preventDefault","beingDragged","offset","clientX","left","clientY","top","loopDrag","newPosX","newPosY","element","offsetLeft","offsetTop","offsetWidth","offsetHeigth","constrainedPosition","stayInWindow","constrainedPositionX","constrainedPositionY","stickyX","leftSticky","stickyY","topSticky","visibility","html","to","wrapInDivClass","type","child","value","updateSize","val","contentElement","get","scrollHeight","undefined","dragged","newClass","removeClass","addClass","show","hide","console","_stickiness","contentDiv","query","location","search","substring","vars","split","pair","decodeURIComponent","arr","STOP_BEING_STICKY_AFTER","right","bottom","maxLeft","innerWidth","maxTop","innerHeight","BindedField","object","property","parent","fieldType","allowedValues","hierarchy","constraints","title","baseMessage","VALID_FIELD_TYPE","_field","fieldHTML","tempClass","subfields","errorDiv","messageDiv","replace","f","toUpperCase","placeInParent","fields","valueWasIn","lastValue","field","checked","change","update","indexOf","message","keydown","keyCode","origin","verify","valid","msg","correct","incorrect","blur","okMessage","constraintsArray","constraint","keyVal","key","trim","Number","char","passwordScore","includes","convertToType","text","BindedProperty","HANDLED_VARIABLE_TYPES","propagate","exportName","bind","propertyType","Boolean","SmartModal","formatType","callback","buttonType","paddingTopBottom","DEFAULT_BUTTON_ROW_HTML","DEFAULT_BUTTON_HTML","closebutton","nextbutton","blankbutton","sendbutton","initialFreeHeigth","maxHeight","lastUpdate","buttonRowHtml","scrollAppended","button","callAfterConstructor","smartModalObject","resize","updatePosition","callThenDestroy","destroy","format","topPos","leftPos","prepend","scrollElement","scroll","scrollTop","ParamBox","DEFAULT_ROW_HTML","PARAMBOX_EMPTY_SUBTITLE_ROW_HTML","PARAMBOX_EMPTY_ROW_HTML","savebutton","importbutton","reloadbutton","getElementsByClassName","save","import","reloadAndImport","on","clicked","id","slideToggle","rowHtml","subtitleHtml","subtitleRows","paramPrefixIncrement","prefix","refreshView","properties","options","objectHierarchy","getDescendantProp","objectTemp","underscoredHierarchy","subtitle","lastIndexOf","rowDom","newRowInDom","bindedField","initialValue","constraintValues","values","getBindedRow","delete","subtitleRow","style","toggle","summaryArray","importedString","prompt","importedJSON","JSON","parse","setProperty","getSummaryArray","stringified","stringify","open","btoa","encodeURIComponent","url","href","questionPosition","description","parentObject","lastProperty","shift","propertyValue","found","SmartChart","chartOptions","canvasID","canvas","getElementById","display","defaults","responsive","maintainAspectRatio","chart","background","closeButton","saveButton","datasets","SmartForm","deferred","verificationFunction","noPageScroll","EMPTY_SUBTITLE_ROW_HTML","smartform_EMPTY_ROW_HTML","formElement","formId","keys","baseField","authorizedValues","_deferred","returnValue","Function","submit","fullHeight","paramBoxFullpath","scripts","getElementsByTagName","src","delimiterIndices","head","link","createElement","rel","appendChild"],"mappings":"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","file":"experimentBoxes.max.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"), require(\"chartjs\"), require(\"experiment-mathjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"experimentBoxes\", [\"jQuery\", \"chartjs\", \"experiment-mathjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"experimentBoxes\"] = factory(require(\"jQuery\"), require(\"chartjs\"), require(\"experiment-mathjs\"));\n\telse\n\t\troot[\"experimentBoxes\"] = factory(root[\"jQuery\"], root[\"Chart\"], root[\"math\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d747cfe0a6263d75a5b","import math from 'experiment-mathjs'\nimport { DEBUG_MODE_ON } from '../config'\n\n/*\nisNumeric function in Javascript\n*/\nfunction isNumeric(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n)\n}\n\n/**\n * noop - just your friendly empty function\n *\n * @returns {undefined}\n */\nfunction noop() {}\n\n\n/**\n * Debug functions\n */\nconst debuglog = function debuglog(...args) {\n  return (window && window.DEBUG_MODE_ON) ? console.log(...args) : noop()\n}\nconst debugWarn = function debugWarn(...args) {\n  return (window && window.DEBUG_MODE_ON) ? console.warn(...args) : noop()\n}\nconst debugError = function debugError(...args) {\n  return (window && window.DEBUG_MODE_ON) ? console.error(...args) : noop()\n}\n\n/**\n * Allows to return an error for missing parameters.\n * @param  {String} param Optional string to add after the error.\n */\nfunction mandatory(param = '') {\n  throw new Error(`Missing parameter ${param}`)\n}\n\n/**\n * Checks the type of all given parameters, return an error if one is undefined.\n * @param  {...object} args List of arguments to checks\n * @return {bool}      true if all arguments are defined\n */\n\nfunction mustBeDefined(...args) {\n  for (let i = 0; i < args.length; i++) {\n    if (typeof args[i] === 'undefined') {\n      throw new Error(`Argument ${i} is undefined.`)\n    }\n  }\n\n  return true\n}\n\n/**\n * Checks the constructor of all given parameters, return an error if one is not as specified.\n * @param  {object} constructorObject constructor\n * @param  {...object} args         list of arguments to check\n * @return {bool}                   true if all arguments have specified constructorObject as constructor\n */\n\nfunction mustHaveConstructor(constructorObject, ...args) {\n  if (args.allHaveConstructor(constructorObject) === false) {\n    throw new Error('Wrong constructor in arguments.')\n  }\n\n  return true\n}\n\n/**\n * Returns true if o looks like a promise. From the es-promisify package.\n * https://github.com/digitaldesignlabs/es6-promisify/\n * @param  {object} o Object to test\n * @return {bool}   True if looks like a promise, false otherwise\n */\nfunction looksLikeAPromise(o) {\n  return o && typeof o.then === 'function' && typeof o.catch === 'function'\n}\n\n\n/**\n * From http://www.datchley.name/promise-patterns-anti-patterns/\n * @param  {int} ms delay in ms\n * @return {promise} promise which will resolve in delay ms\n */\nfunction delay(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n\n/**\n * Adam Jurczyk ; https://stackoverflow.com/questions/7582828/how-to-check-if-a-string-is-a-legal-dd-mm-yyyy-date\n * @method parseDate\n * @param  {[type]}  str [description]\n * @return {[type]}      [description]\n */\nfunction parseDate(str) {\n  const t = str.match(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/)\n  if (t !== null) {\n    const d = +t[1]\n    const m = +t[2]\n    const y = +t[3]\n    const date = new Date(y, m - 1, d)\n    if (date.getFullYear() === y && date.getMonth() === m - 1) {\n      return date\n    }\n  }\n\n  return null\n}\n\n/**\n * From https://stackoverflow.com/questions/948172/password-strength-meter\n * @method scorePassword\n * @param  {string}      pass password to scorePassword\n * @return {Number}           Score (>80 is strong)\n */\nfunction scorePassword(pass) {\n  let score = 0\n  if (!pass) { return score }\n\n    // award every unique letter until 5 repetitions\n  const letters = {}\n  for (let i = 0; i < pass.length; i++) {\n    letters[pass[i]] = (letters[pass[i]] || 0) + 1\n    score += 5.0 / letters[pass[i]]\n  }\n\n    // bonus points for mixing it up\n  const variations = {\n    digits: /\\d/.test(pass),\n    lower: /[a-z]/.test(pass),\n    upper: /[A-Z]/.test(pass),\n    nonWords: /\\W/.test(pass),\n  }\n\n  let variationCount = 0\n  for (const check in variations) {\n    if (variations.hasOwnProperty(check)) {\n      variationCount += (variations[check] === true) ? 1 : 0\n    }\n  }\n  score += (variationCount - 1) * 10\n\n  return parseInt(score, 10)\n}\n\n/**\n * From https://stackoverflow.com/questions/948172/password-strength-meter\n * @method checkPassStrength\n * @param  {String}          pass  password\n * @return {String}                Either weak, good, or strong\n */\nfunction passwordStrength(pass) {\n  const score = scorePassword(pass)\n  if (score > 80) { return 'strong' }\n  if (score > 60) { return 'good' }\n  if (score >= 30) { return 'weak' }\n\n  return ''\n}\n\n/**\n * @param  {int} min min delay in ms\n * @param  {int} max max delay in ms\n * @return {promise} promise which will resolve in delay ms\n */\nfunction jitter(min = mandatory(), max = mandatory()) {\n  return new Promise((resolve) => {\n    const randomDuration = (Math.rand * (max - min)) + min\n    setTimeout(resolve, randomDuration)\n  })\n}\n\n/**\n * Recurse on a given promise chain\n * @param  {Promise} promise Promise to recurse on\n * @param  {numeric} amount  amount of time to recurse\n * @return {Promise}         Promise\n */\nfunction recurse(promiseGenerator = mandatory(),\n  amount = mandatory(),\n  target = this, args = [],\n  concatOnArray = []) {\n  // Base case - just return the promisified result\n  if (amount === 0) {\n    return new Promise((resolve) => {\n      resolve(concatOnArray)\n    })\n  }\n\n\n  const next = promiseGenerator.apply(target, args).then((r) => {\n    concatOnArray = concatOnArray.concat(r)\n    return (recurse(promiseGenerator, amount - 1, target, args, concatOnArray))\n  })\n\n  return next\n}\n\n/**\n * Compatible helper to replace the now defunc Promise.defer()\n * @method Deferred\n */\nfunction Deferred() {\n  this.resolve = null\n  this.reject = null\n  this.resolved = false\n  this.rejected = false\n  this.pending = true\n  this.status = 0\n  /* A newly created Pomise object.\n   * Initially in pending state.\n   */\n  this.promise = new Promise((resolve, reject) => {\n    this.resolve = (data) => {\n      this.resolved = true\n      this.pending = false\n      resolve(data)\n    }\n    this.reject = (e) => {\n      this.rejected = true\n      this.pending = false\n      if (e.constructor === String) {\n        e = new Error(e)\n      }\n      reject(e)\n    }\n  })\n  // Object.freeze(this)\n}\n\nfunction hasConstructor(constructorObject, testObject) {\n  if ((typeof testObject === 'undefined') || (testObject === null) || (testObject.constructor !== constructorObject)) {\n    return false\n  }\n  return true\n}\n\n\n/**\n * From http://stackoverflow.com/questions/3751520/how-to-generate-sequence-of-numbers-chars-in-javascript\n * TODO Pull request math js\n * @param  {object} content Repeated sequence\n * @param  {int} count   Number of time the sequence must be repeat\n * @return {array}       Array with repeated sequence\n */\nfunction rep(content = mandatory(), count = mandatory()) {\n  let result = []\n  if (typeof (content) === 'function') {\n    for (let i = 0; i < count; i++) {\n      result = result.concat(content(i))\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result = result.concat(content)\n    }\n  }\n  return result\n}\n\nfunction samplePermutation(sequence = mandatory(), repetition = false, n = null) {\n  if (sequence.constructor !== Array) {\n    throw new Error('samplePermutation: sequence needs to be an array.')\n  }\n\n  if (n === null) {\n    n = sequence.length\n  }\n\n  const copy = sequence.slice(0)\n  let permutation = []\n  let add\n  while ((repetition && (permutation.length < n)) || ((!repetition) && (copy.length))) {\n    const index = Math.floor(Math.random() * copy.length)\n    if (repetition) {\n      add = copy[index]\n    } else {\n      add = copy.splice(index, 1)\n    }\n    permutation = permutation.concat(add)\n  }\n\n  return (permutation)\n}\n\n/* =============== Personalized Matrix Functions =============== */\nfunction matrix(rows = mandatory(), cols = mandatory(), fill = 0) {\n  const matrixObject = []\n\n  for (let i = 0; i < rows; i++) {\n    matrixObject[i] = []\n    for (let j = 0; j < cols; j++) {\n      matrixObject[i][j] = fill\n    }\n  }\n\n  return (matrixObject)\n}\n\nfunction getRow(matrixObject = mandatory(), rowIndex = mandatory()) {\n  matrixObject = math.matrix(matrixObject)\n  const size = (matrixObject.size())[0]\n  const row = math.subset(matrixObject, math.index(rowIndex, math.range(0, size)))\n\n  return (row)\n}\n\nfunction rowSum(matrixObject = mandatory(), rows = null) {\n  matrixObject = math.matrix(matrixObject)\n  const size = (matrixObject.size())[0]\n  if (rows === null) {\n    rows = math.range(0, size - 1)\n  }\n  if (rows.constructor !== Array) {\n    rows = [rows]\n  }\n\n  const rowSumArray = []\n  for (let i = 0; i < rows.length; i++) {\n    rowSumArray.push(math.sum(getRow(matrixObject, rows[i])))\n  }\n\n  return (rowSumArray)\n}\n\n// set or get the diagonal of a matrix\nfunction diag(matrixObject = mandatory(), setTo = null) {\n  const rows = matrixObject.length\n  // const cols = matrixObject[0].length\n\n  const diagonalValues = []\n\n  for (let i = 0; i < rows; i++) {\n    if (setTo) {\n      matrixObject[i][i] = setTo\n    }\n    diagonalValues.push(matrixObject[i][i])\n  }\n\n  return ([diagonalValues, matrixObject])\n}\n\n/**\n * Find all the positions of a needle in a haystack string\n * @param  {string} needle   string to find\n * @param  {string} haystack string to scan\n * @return {Array}  Either -1 if no match is found or an array containing the indicies\n */\nfunction findAllIndices(needle = mandatory(), haystack = mandatory()) {\n  const indices = []\n  for (let i = 0; i < haystack.length; i++) {\n    if (haystack.substr(i, needle.length) === needle) {\n      indices.push(i)\n    }\n  }\n\n  if (indices.length) {\n    return indices\n  }\n  return -1\n}\n\nfunction extend(...args) {\n    // Variables\n  const extended = {}\n  let deep = false\n  let i = 0\n  const length = args.length\n\n    // Check if a deep merge\n  if (Object.prototype.toString.call(args[0]) === '[object Boolean]') {\n    deep = args[0]\n    i += 1\n  }\n\n    // Merge the object into the extended object\n  const merge = function (obj) {\n    for (const prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                // If deep merge and property is an object, merge properties\n        if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n          extended[prop] = extend(true, extended[prop], obj[prop])\n        } else {\n          extended[prop] = obj[prop]\n        }\n      }\n    }\n  }\n\n    // Loop through each object and conduct a merge\n  for (; i < length; i++) {\n    const obj = args[i]\n    merge(obj)\n  }\n\n  return extended\n}\n\nexport { diag,\n  rowSum,\n  getRow,\n  matrix,\n  samplePermutation,\n  rep,\n  Deferred,\n  recurse,\n  jitter,\n  delay,\n  looksLikeAPromise,\n  mustHaveConstructor,\n  mustBeDefined,\n  mandatory,\n  debuglog,\n  debugWarn,\n  debugError,\n  noop,\n  findAllIndices,\n  extend,\n  isNumeric,\n  hasConstructor,\n  parseDate,\n  passwordStrength,\n  scorePassword,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jQuery\",\"commonjs2\":\"jQuery\",\"amd\":\"jQuery\",\"root\":\"jQuery\"}\n// module id = 1\n// module chunks = 0","import $ from 'jquery'\nimport { debuglog, delay } from './utilities'\n\n/** Dragable div - Parent class suporting the toolbox  */\nexport default class DragBox {\n  constructor(boxElement = null, width = null, height = null) {\n    // mock window if in node\n    if (typeof window === 'undefined') {\n      global.window = {}\n    }\n\n    this.freeHeight = true\n    if (height !== null) {\n      this.freeHeight = false\n    }\n    // constants\n    this.MAX_BINDED_PROPERTIES = 15\n    this.INIT_WIDTH = width || 400\n    this.INIT_HEIGHT = height || 300\n    this.TITLE_HEIGHT = 36\n    this.FOOTER_HEIGHT = 34\n    this.DEFAULT_BOX_THEME = 'dragbox-gray'\n    this.DEFAULT_DRAGGABLE = true\n    this.DEFAULT_STICKINESS_TYPE = 'magnetized'\n\n    this.DEFAULT_FORMAT_TYPES = {\n      // format type desribe the topOffset, width, and height of the modal in proportion\n      // updatePosition is called when the window is resized\n      centralSmall: [0.2, 0.4, 0.3],\n      centralLarge: [0.2, 0.7, 0.6],\n      across: [0.3, 1, 0.4],\n      overlay: [0.1, 0.8, 0.8],\n      topCentralSmall: [0.1, 0.4, 0.3],\n      topCentralLarge: [0.1, 0.7, 0.6],\n    }\n\n    // ui variables\n    this.boxId = null\n    this.boxElement = boxElement\n    this.draggable = this.DEFAULT_DRAGGABLE\n    this.boxHTML = null\n\n    // stickness\n    this.shouldStick = null\n    this.shouldMagnetize = null\n    this.isStickingX = null\n    this.isStickingY = null\n\n    this.stickiness = this.DEFAULT_STICKINESS_TYPE\n\n    // private\n    this._beingDragged = false\n    this._visibility = 'hidden'\n    this._overflow = 'hidden'\n    this._boxClass = this.DEFAULT_BOX_THEME\n    this._width = this.INIT_WIDTH\n    this._height = this.INIT_HEIGHT\n\n    // keyboard variables\n    // maps the keys pressed with either true on kedown or false on keyup\n    this.map = []\n\n    // keep mouse position at all times\n    this.currentMousePos = {\n      x: -1,\n      y: -1,\n    }\n\n    const thisObject = this\n\n    $(document).mousemove((event) => {\n      thisObject.currentMousePos.x = event.pageX\n      thisObject.currentMousePos.y = event.pageY\n    })\n\n    // check if the box already exists, else create it\n    if (!this.boxElement) {\n      // get a unique ID for the box\n      this.boxId = `dragbox${$('div[id*=\"dragbox\"]').length + 1}`\n\n      // html for creation\n      this.boxHTML = `<div id=\"${this.boxId}\" class=\"dragbox ${this._boxClass}\" style=\"display:none;\" draggable=\"false\">\n          <div class=\"col-xs-12 dragbox-container\">\n            <div class=\"col-xs-12 dragbox-title centered\"><h3>Dragbox</h3></div>\n          <div class=\"col-xs-12 dragbox-content\"></div>\n          <div class=\"col-xs-12 dragbox-footer\"></div>\n        </div>`\n\n      $(document.body).append(this.boxHTML)\n      this.boxElement = $(`#${this.boxId}`)\n    } else {\n      this.boxId = $(this.boxElement).attr('id')\n    }\n\n    // set class\n    this.boxClass = $(this.boxElement).attr('class')\n\n    // set size\n    this.width = this._width\n    this.height = this._height\n\n    // set overflow\n    this.overflow = 'hidden'\n\n    // keyboard show hide hotkeys events\n    document.body.addEventListener('keydown', this.keyfunction)\n    document.body.addEventListener('keyup', this.keyfunction)\n\n    // when clicked bring  dragbox\n    $(this.boxElement).click(() => {\n      $('.dragbox').css('zIndex', 10)\n      $(thisObject.boxElement).css('zIndex', 100)\n    })\n\n    $(this.boxElement).find('.dragbox-title').mousedown((e) => {\n      thisObject.startDrag(e)\n    })\n    $(this.boxElement).find('.dragbox-title').mouseup((e) => {\n      thisObject.stopDrag(e)\n    })\n\n    // draggin cleanUp event\n    document.body.addEventListener('click', this.stopDrag)\n\n    /* --- Load the query string if reload and import was used --- */\n    this.queryString = DragBox.getQueryString()\n  }\n  // destroy\n  destroy() {\n    // fade out and remove from DOM\n    const thisObject = this\n    $(this.boxElement).animate({\n      opacity: 0,\n    }, 25, () => {\n      document.body.addEventListener('keydown', this.keyfunction)\n      document.body.addEventListener('keyup', this.keyfunction)\n      document.body.removeEventListener('click', this.stopDrag)\n      $(thisObject.boxElement).remove()\n    })\n  }\n\n  // size methods\n  updateSize() {\n    $(this.boxElement).width(this.width)\n    if (!this.freeHeight) {\n      const currentHeight = this.boxElement.height()\n      const currentContentHeight = this.boxElement.find('.dragbox-content').height()\n      const difference = currentHeight - this.height\n      $(this.boxElement)\n        .find('.dragbox-content')\n        .css({\n          height: Math.max(currentContentHeight - difference, 100),\n        })\n      // $(this.boxElement).height(this.height)\n      // const contentHeight = this.height - this.TITLE_HEIGHT - this.FOOTER_HEIGHT - 7\n      // $(this.boxElement).css({\n      //   height: this.height,\n      //   width: this.width,\n      // })\n      // $(this.boxElement)\n      //   .find('.dragbox-container')\n      //   .css({\n      //     height: this.height,\n      //   })\n      // $(this.boxElement)\n      //   .find('.dragbox-content')\n      //   .css({\n      //     height: contentHeight,\n      //   })\n    } else {\n      $(this.boxElement).css({\n        width: this.width,\n      })\n    }\n  }\n\n  // drag methods\n  startDrag(e) {\n    // prevent classic dragging from happening\n    e.preventDefault()\n\n    // check if already being dragged, stop the dragging if so\n    if (this.beingDragged) {\n      this.beingDragged = false\n      return null\n    }\n\n    if (!this.draggable) {\n      return null\n    }\n\n    // calculate X and Y offset of the mouse compare to the top left corner of the box\n    const offset = {\n      x: e.clientX - $(this.boxElement).offset().left,\n      y: e.clientY - $(this.boxElement).offset().top,\n    }\n\n    // set the beingdragged flag to true\n    this.beingDragged = true\n\n    // start the update loop for smooth dragging\n    this.loopDrag(offset)\n\n    // another way of preventing default, just in case\n    return false\n  }\n\n  stopDrag() {\n    this.beingDragged = false\n  }\n\n  loopDrag(offset) {\n    if (this.beingDragged === true) {\n      const newPosX = this.currentMousePos.x - offset.x\n      const newPosY = this.currentMousePos.y - offset.y\n\n      const element = {\n        offsetLeft: newPosX,\n        offsetTop: newPosY,\n        offsetWidth: $(this.boxElement).width(),\n        offsetHeigth: $(this.boxElement).height(),\n      }\n\n      // maintain box totally visible and check for sticky borders\n      const constrainedPosition = DragBox.stayInWindow(element)\n      let constrainedPositionX = constrainedPosition.x\n      let constrainedPositionY = constrainedPosition.y\n\n      // stickiness\n      // glue\n      if (this.shouldStick) {\n        // make the box sticky if collided with x border\n        if ((constrainedPosition.stickyX === -2) || (constrainedPosition.stickyX === 2)) {\n          this.isStickingX = true\n        }\n\n        // for sticky window, check if the box got out of the sticky x aera before authorizing movement in x\n        if (this.isStickingX && constrainedPosition.stickyX !== 0) {\n          constrainedPositionX = constrainedPosition.leftSticky // stick to the window\n        }\n\n        // make sure stickiness disapears when out of the sticky zone\n        if (constrainedPosition.stickyX === 0) {\n          this.isStickingX = false\n        }\n\n        // make the box sticky if collided with y border\n        if ((constrainedPosition.stickyY === -2) || (constrainedPosition.stickyY === 2)) {\n          this.isStickingY = true\n        }\n\n        // for sticky window, check if the box got out of the sticky y aera before authorizing movement in y\n        if (this.isStickingY && constrainedPosition.stickyY !== 0) {\n          constrainedPositionY = constrainedPosition.topSticky // stick to the window\n        }\n\n        // make sure stickiness disapears when out of the sticky zone\n        if (constrainedPosition.stickyY === 0) {\n          this.isStickingY = false\n        }\n      }\n\n      // magnet\n      if (this.shouldMagnetize) {\n        constrainedPositionX = constrainedPosition.leftSticky\n        constrainedPositionY = constrainedPosition.topSticky\n      }\n\n      const thisObject = this\n      $(this.boxElement).animate({\n        left: constrainedPositionX,\n        top: constrainedPositionY,\n      }, 25, () => { thisObject.loopDrag(offset) })\n    }\n  }\n\n  // keyboard functions\n  keyfunction() {\n    // check if shift + P hotkeys were stroke and toggle visibility if so\n    debuglog('dragbox: keyfunction() called.', this)\n  }\n\n  // visibility functions\n  toggle() {\n    // toggle box visibility\n    if (this.visibility === 'hidden') {\n      this.visibility = 'visible'\n    } else {\n      this.visibility = 'hidden'\n    }\n  }\n\n  show() {\n    this.visibility = 'visible'\n  }\n\n  hide() {\n    this.visibility = 'hidden'\n  }\n\n  // content function\n  /**\n   * Add the specified html code to the specified target.\n   * If wrapInDivClass is set, a div of specified class is created around the html code. This could be usefull to set grid class like 'col-xs-12'.\n   * @param  {string} html           html to append to the target\n   * @param  {String} to             target identifier eg .target-class or #targetID\n   * @param  {String} wrapInDivClass Null by default. If set, creates a div with specified class wrapping the html code.\n   */\n  append(html, to = '.dragbox-content', wrapInDivClass = null, type = 'append') {\n    // TODO Convert all element creation to pure javascript -- make a react version\n    // append html to the selected child element of the dragbox\n    if (this.boxElement) {\n      if (wrapInDivClass !== null) {\n        html = `<div class=\"${wrapInDivClass}\" >${html}</div>`\n      }\n\n      if (type !== 'prepend') {\n        type = 'append'\n      }\n\n      if (to !== 'container') {\n        (this.boxElement.find(to))[type](html)\n      } else {\n        this.boxElement[type](html)\n      }\n    }\n  }\n\n  prepend(html, to = '.dragbox-content', wrapInDivClass = null) {\n    this.append(html, to, wrapInDivClass, 'prepend')\n  }\n\n  /**\n   * set or get html of the selected child element of the DragBox\n   * @param  {String} child child selector\n   * @param  {?string} value Either null if you want to get the html or a string to set the html of the node\n   * @return {?string}       If value is null, returns a string of the html content of the node.\n   */\n  html(child = '.dragbox-content', value = null) {\n    if (this.boxElement) {\n      const target = (child !== 'container') ? this.boxElement.find(child) : this.boxElement\n\n      if (value !== null) {\n        target.html(value)\n        return value\n      }\n\n      return target.html()\n    }\n\n    return null\n  }\n\n  /* ======== Setters and getters ======== */\n  set width(width) {\n    this._width = width\n    this.updateSize()\n  }\n\n  get width() {\n    return this._width\n  }\n\n  set height(height) {\n    this._height = height\n    this.updateSize()\n  }\n\n  get height() {\n    return this._height\n  }\n\n  set scrollHeigth(val) {\n    // read-only\n  }\n\n  get scrollHeight() {\n    if (this.boxElement) {\n      return this.boxElement.height() - this.contentElement.height() + this.contentElement.get(0).scrollHeight\n    }\n    return undefined\n  }\n\n  set beingDragged(dragged) {\n    this._beingDragged = dragged\n    $(this.boxElement).attr('beingDragged', dragged)\n  }\n\n  get beingDragged() {\n    return this._beingDragged\n  }\n\n  set boxClass(newClass) {\n    if (this.boxElement) {\n      if (typeof newClass !== 'string') {\n        throw new Error('newClass must be a string')\n      }\n\n      // if there is more than one class in the string take the first one\n      // var spacePos = newClass.indexOf(\" \");\n      // if (spacePos != -1) {\n      //   newClass = newClass.substr(0, spacePos);\n      // }\n      // remove the old class from the boxElement and add the new class\n      this.boxElement.removeClass(this.boxClass).addClass(newClass)\n      this._boxClass = newClass\n    }\n  }\n\n  get boxClass() {\n    if (this.boxElement) {\n      return this._boxClass\n    }\n    return null\n  }\n\n  set visibility(visibility) {\n    this._visibility = visibility\n    if (visibility === 'visible') {\n      // $(this.boxElement).animate({\n      //   opacity: 1.0\n      // }, 150);\n      $(this.boxElement).show()\n    } else {\n      // $(this.boxElement).animate({\n      //   opacity: 0.0\n      // }, 150);\n      $(this.boxElement).hide()\n    }\n  }\n\n  get visibility() {\n    return this._visibility\n  }\n\n  set overflow(overflow) {\n    this._overflow = overflow\n    $(this.boxElement).find('.dragbox-content').css('overflow-y', overflow)\n  }\n\n  get contentElement() {\n    return $(this.boxElement).find('.dragbox-content')\n  }\n\n  set contentElement(element) {\n    console.warn('DragBox.contentElement: read-only for now')\n  }\n\n  get overflow() {\n    return this._overflow\n  }\n\n  /**\n   * Variable defining how the box behaves near screen limit, weither it stick \"glue\", it magnetize \"magnetized\" or it has no interaction \"none\".\n   * @return {string} Either glue, or magnetized\n   */\n  static get stickiness() { /**/ }\n  static get title() { /**/ }\n\n  get stickiness() {\n    return this._stickiness\n  }\n\n  set stickiness(type) {\n    // different type of stickyness for the box : \"none\", \"glue\", \"magnetized\"\n    switch (type) {\n      case 'glue':\n        this.shouldStick = true\n        this.shouldMagnetize = false\n        debuglog('stickiness set to glue')\n        break\n      case 'magnetized':\n        this.shouldStick = false\n        this.shouldMagnetize = true\n        debuglog('stickiness set to magnetized')\n        break\n      default:\n        this.shouldMagnetize = false\n        this.shouldStick = false\n        debuglog('Parambox: stickiness set to none')\n    }\n    this._stickiness = type\n  }\n\n  get title() {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html()\n    }\n  }\n\n  set title(html) {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html(html)\n      this.updateSize()\n    }\n  }\n\n  set content(html) {\n    if (this.boxElement) {\n      this.contentDiv.html(html)\n      this.updateSize()\n    }\n  }\n\n  get content() {\n    if (this.boxElement) {\n      return this.contentDiv.html()\n    }\n\n    return null\n  }\n\n  get contentDiv() {\n    if (this.boxElement) {\n      return $(this.boxElement).find('.dragbox-content')\n    }\n\n    return null\n  }\n\n  /* =============== Helper functions =============== */\n  /**\n   * From http://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters?page=1&tab=votes#tab-top\n   * @return {Array} Array containing variables of the location string.\n   */\n  static getQueryString() {\n    // This function is anonymous, is executed immediately and\n    // the return value is assigned to QueryString!\n    const queryString = {}\n    const query = window.location.search.substring(1)\n    const vars = query.split('&')\n    for (let i = 0; i < vars.length; i++) {\n      const pair = vars[i].split('=')\n      // If first entry with this name\n      if (typeof queryString[pair[0]] === 'undefined') {\n        queryString[pair[0]] = decodeURIComponent(pair[1])\n        // If second entry with this name\n      } else if (typeof queryString[pair[0]] === 'string') {\n        const arr = [queryString[pair[0]], decodeURIComponent(pair[1])]\n        queryString[pair[0]] = arr\n        // If third or later entry with this name\n      } else {\n        queryString[pair[0]].push(decodeURIComponent(pair[1]))\n      }\n    }\n    return queryString\n  }\n\n  /* ======== Static ======== */\n  // TODO make non static probably\n  // some static helper functions\n  static stayInWindow(element) {\n    if (typeof element === 'undefined') {\n      throw new Error('element is undefined')\n    }\n\n    // constants\n    const STOP_BEING_STICKY_AFTER = 0.15\n\n    // times the size in distance\n    // coordinates\n    const left = element.offsetLeft\n    const right = element.offsetLeft + element.offsetWidth\n    const top = element.offsetTop\n    const bottom = element.offsetTop + element.offsetHeigth\n\n    const maxLeft = window.innerWidth - element.offsetWidth\n    const maxTop = window.innerHeight - element.offsetHeigth\n\n    // TODO Clarify the integer constants and do not use nested ternary if possible\n    return {\n      x: left < 0 ? 0 : right > window.innerWidth ? maxLeft : left,\n      y: top < 0 ? 0 : bottom > window.innerHeight ? maxTop : top,\n      stickyX: left <= 0 ?\n        -2 : left <= STOP_BEING_STICKY_AFTER * element.offsetWidth ?\n        -1 : right >= window.innerWidth ?\n        2 : right >= (window.innerWidth - (STOP_BEING_STICKY_AFTER * element.offsetWidth)) ?\n        1 : 0,\n      stickyY: top <= 0 ? -2 :\n        top <= STOP_BEING_STICKY_AFTER * element.offsetHeigth ? -1 :\n        bottom >= window.innerHeight ? 2 :\n        bottom >= (window.innerHeight - (STOP_BEING_STICKY_AFTER * element.offsetHeigth)) ? 1 :\n        0,\n      leftSticky: left <= 0 ? 0 :\n        left <= STOP_BEING_STICKY_AFTER * element.offsetWidth ? 0 :\n        right >= window.innerWidth ? window.innerWidth - element.offsetWidth :\n        (right >= window.innerWidth - (STOP_BEING_STICKY_AFTER * element.offsetWidth)) ? window.innerWidth - element.offsetWidth :\n        left,\n      topSticky: top <= 0 ? 0 :\n        top <= STOP_BEING_STICKY_AFTER * element.offsetHeigth ? 0 :\n        bottom >= window.innerHeight ? window.innerHeight - element.offsetHeigth :\n        bottom >= window.innerHeight - (STOP_BEING_STICKY_AFTER * element.offsetHeigth) ? window.innerHeight - element.offsetHeigth :\n        top,\n    }\n  }\n\n  static getCoordinateInWindow(element) {\n    const left = element.offsetLeft\n    const right = element.offsetLeft + element.offsetWidth\n    const top = element.offsetTop\n    const bottom = element.offsetTop + element.offsetHeigth\n\n    const maxLeft = window.innerWidth - element.offsetWidth\n    const maxTop = window.innerHeight - element.offsetHeigth\n\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      maxLeft,\n      maxTop,\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DragBox.js","import $ from 'jquery'\nimport BindedProperty from './BindedProperty'\nimport { debugError, mandatory, isNumeric, parseDate, passwordStrength, scorePassword } from './utilities'\n\nexport default class BindedField extends BindedProperty {\n  // this class holds an active input field (select, text input, slider component)\n  // it creates a field from the selected type and bind a binded property to it\n  constructor(\n    object = mandatory('object'),\n    property = mandatory('property'),\n    parent = null,\n    fieldType = 'input',\n    allowedValues = null,\n    hierarchy = null,\n    { constraints = '', title = null, baseMessage = '' } = {},\n  ) {\n    super(object, property, hierarchy)\n\n    // constant\n    this.VALID_FIELD_TYPE = ['input', 'select', 'slider', 'radio']\n\n    // field\n    this._field = undefined\n    this.fieldType = fieldType\n    this.fieldHTML = null\n    this.allowedValues = allowedValues\n    this.constraints = constraints || ''\n    this.tempClass = `binded-${typeof object}${property}`\n    this.subfields = []\n    this.errorDiv = null\n    this.messageDiv = null\n    this.title = (title || property).replace(/(^|\\s)[a-z]/g, f => f.toUpperCase())\n    this.baseMessage = baseMessage\n\n\n    // parent\n    this.parent = parent\n\n    // build the field html based on the fieldType: input, select, textaera, slider, radio\n    let html = ''\n    switch (this.fieldType) {\n      case 'input':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n        <input type=\"text\" class=\"form-control ${this.tempClass}\" data-binded=\"${property}\">\n          <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n            <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n          </div>\n          <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n            <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n          </div>\n        </div>`\n        break\n      case 'password':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n          <input type=\"password\" class=\"form-control ${this.tempClass}\" data-binded=\"${property}\">\n            <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n              <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n            </div>\n            <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n            <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n            </div>\n          </div>`\n        break\n      case 'select':\n        if (!allowedValues) {\n          debugError('fieldType selector needs at least one allowedValues')\n          return\n        }\n\n        html += `<div class=\"form-group\">\n        <label class=\"bindedfield-label\">${this.title}</label>\n        <select class=\"form-control ${this.tempClass}\" data-binded=\"${property}\">`\n\n        for (let i = 0; i < this.allowedValues.length; i++) {\n          html += `${this.fieldHTML}<option value=\"${\n          this.allowedValues[i]\n          }\">${\n          this.allowedValues[i]\n          }</option>`\n        }\n        this.fieldHTML = `${html}</select>\n        <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\"\n          <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n          </div>\n          <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n          <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n        </div>\n      </div>`\n        break\n      case 'textaera':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n                            <textarea class=\"form-control ${this.tempClass}\" rows=\"3\" data-binded=\"${property}\"></textarea>\n                            <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n                              <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n                            </div>\n                            <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n                              <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n                            </div>\n                          </div>`\n        break\n      case 'slider':\n        this.fieldHTML = `<div class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>\n      <input type=\"range\" data-binded=\"${property}\" class=\"form-control ${this.tempClass}\" min=\"${this.allowedValues[0]}\" max=\"${this.allowedValues[1]}\" step=\"${this.allowedValues[2]}\" />\n      <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n        <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n      </div>\n      <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n        <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n      </div>\n      </div>`\n        break\n      case 'radio':\n        if (!allowedValues) {\n          debugError('fieldType selector needs at least one allowedValues')\n          return\n        }\n        html = `<fieldset class=\"form-group\"><label class=\"bindedfield-label\">${this.title}</label>`\n        for (const value of this.allowedValues) {\n          html += `<div class=\"form-check\">\n            <label class=\"form-check-label\">\n              <input type=\"radio\" class=\"form-check-input ${this.tempClass}\" name=\"${property}\" value=\"${value}\" data-binded=\"${property}\" checked>\n              ${value}\n            </label>\n          </div> `\n        }\n\n        this.fieldHTML = `${html}\n          <div class=\"col-sm-10 bindedfield-errordiv ${this.tempClass}-error\" >\n            <i class=\"glyphicon glyphicon-remove\"></i><span class=\"bindedfield-error\"></span>\n          </div>\n          <div class=\"col-sm-10 bindedfield-messagediv ${this.tempClass}-message\" >\n            <i class=\"glyphicon glyphicon-info\"></i><span class=\"bindedfield-message\"></span>\n          </div>\n        </fieldset>`\n        break\n      default:\n        debugError('fieldType is invalid : input, selector and slider are the only valid type for now')\n        return\n    }\n\n    if (parent) {\n      this.placeInParent()\n    }\n  }\n\n  // ui function\n  placeInParent(parent = null) {\n    if (parent) {\n      this.parent = parent\n    }\n\n    // appends html to the parent\n    $(this.parent).append(this.fieldHTML)\n\n    // radio type has several fields\n    if (this.fieldType === 'radio') {\n      const fields = $(`.${this.tempClass}`)\n      let valueWasIn = false\n      let lastValue = ''\n      for (const field of fields) {\n        $(field).removeClass(`${this.tempClass}`)\n        if (field.value === this.value) {\n          valueWasIn = true\n          field.checked = true\n        }\n        this.subfields.push($(field))\n        // add event listener on change\n        $(field).change(() => {\n          this.update('field')\n        })\n\n        lastValue = field.value\n      }\n      if (!valueWasIn && !this.value) {\n        this.value = lastValue\n      }\n    } else {\n      this.field = $(`.${this.tempClass}`)\n      this.field.removeClass(`${this.tempClass}`)\n\n      if (this.allowedValues) {\n        if (this.allowedValues.constructor === Array) {\n          if (this.fieldType === 'slider') {\n            if (!this.value) { this.value = this.allowedValues[0] }\n            if (this.value < this.allowedValues[0]) { this.value = this.allowedValues[0] }\n            if (this.value > this.allowedValues[1]) { this.value = this.allowedValues[1] }\n            if (this.value % this.allowedValues[2] !== 0) { this.value = this.allowedValues[2] * Math.floor(this.value / this.allowedValues[2]) }\n            this.field.val(this.value)\n          } else if (this.allowedValues.indexOf(this.value) !== -1) {\n            this.field.val(this.value)\n          } else {\n            this.value = this.allowedValues[0]\n          }\n        } else {\n          this.field.val(this.value)\n        }\n      } else {\n        this.field.val(this.value)\n      }\n\n      this.errorDiv = $(`.${this.tempClass}-error`)\n      if (this.errorDiv.length) {\n        this.errorDiv.removeClass(`${this.tempClass}-error`)\n        this.errorDiv.hide()\n      } else {\n        this.errorDiv = null\n      }\n\n      this.messageDiv = $(`.${this.tempClass}-message`)\n      if (this.messageDiv.length) {\n        this.messageDiv.removeClass(`${this.tempClass}-message`)\n        this.messageDiv.hide()\n      } else {\n        this.messageDiv = null\n      }\n\n      this.message = this.baseMessage\n\n      // add event listener on change\n      this.field.change(() => {\n        this.update('field')\n      })\n\n      this.field.keydown((e) => {\n        switch (e.keyCode) {\n          case 13:\n          /* Pressed enter */\n            this.update('field')\n            break\n          default:\n          /**/\n        }\n      })\n    }\n  }\n\n  delete() {\n    // delete the div\n    this.field.parent().remove()\n    this.property = null\n    this.object = null\n  }\n\n  update(origin = 'field') {\n    if (typeof this.field === 'undefined') {\n      debugError('BindedField.update: undefined field.')\n    } else if (origin === 'field') {\n      if (this.value !== this.field.val()) {\n        this.value = this.field.val()\n        const [valid, msg] = this.verify()\n        if (valid) { this.correct(msg) } else { this.incorrect(msg) }\n      }\n      $(this.field).get(0).blur()\n    } else if (this.field.val() !== String(this.value)) {\n      this.field.val(this.value)\n      const [valid, msg] = this.verify()\n      if (valid) { this.correct(msg) } else { this.incorrect(msg) }\n    }\n  }\n\n  correct(msg) {\n    // remove incorrect class\n    this.field.removeClass('bindedfield-incorrect')\n    this.error = ''\n    this.message = msg\n  }\n\n  incorrect(msg = 'Field does not match constraints') {\n    // add incorrect class\n    this.field.addClass('bindedfield-incorrect')\n    this.error = msg\n    this.message = ''\n  }\n\n\n  /**\n   * Verifies that the current value respect the constraints\n   * @method verify\n   * @return {bool}\n   */\n  verify() {\n    // TODO Finish implementation of constraints\n    // TODO think of creating a parser for the constraints when all is gut --- if necessary... or not\n    let okMessage = ''\n    if ((typeof this.constraints === 'string') && (this.constraints !== '')) {\n      const constraintsArray = this.constraints.split(';')\n      for (let constraint of constraintsArray) {\n        const keyVal = constraint.split(':')\n        if (keyVal.length > 2) {\n          debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n        } else if (keyVal.length === 2) {\n          const key = keyVal[0].trim()\n          const val = keyVal[1].split(',')\n\n          switch (key) {\n            case 'length':\n              val[0] = Number(val[0].trim())\n              if (isNaN(val[0])) {\n                debugError(`BindedField.parsedConstraints: Invalid constraint value - ${constraint}`)\n              } else if ((val.length === 1) && (this.value.length !== val[0])) {\n                return [false, `Length must be ${val[0]}`]\n              } else if (val.length === 2) {\n                val[1] = Number(val[1].trim())\n                if (isNaN(val[1])) {\n                  debugError(`BindedField.parsedConstraints: Invalid constraint value - ${constraint}`)\n                } else if ((this.value.length < val[0]) || (this.value.length > val[1])) {\n                  return [false, `Length out of bounds: [${val[0]}, ${val[1]}]`]\n                }\n              }\n              break\n            case 'contains':\n              for (const char of val) {\n                if (!char) {\n                  debugError(`BindedField.parsedConstraints: Invalid values for the contains rule - ${constraint}`)\n                  continue\n                }\n                if (this.value.indexOf(char) === -1) {\n                  return [false, `Character ${char} must be present - all necessary characters are : ${keyVal[1].toString()}`]\n                }\n              }\n              break\n            case 'score':\n              val[0] = Number(val[0].trim())\n              if (isNaN(val[0])) {\n                debugError(`BindedField.parsedConstraints: Invalid non numeric constraint value - ${constraint}`)\n              } else {\n                const passwordScore = scorePassword(this.value)\n                if (passwordScore < val[0]) {\n                  return [false, `Password score must be above ${val[0]} -- currently score is ${passwordScore}`]\n                }\n                okMessage += `Security score: ${passwordScore} `\n              }\n              break\n            default:\n              debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n          }\n        } else {\n          constraint = constraint.trim()\n          // single word constraint\n          switch (constraint) {\n            case 'mandatory':\n              if ((this.value === '') || (this.value === null)) { return [false, 'Field is mandatory'] }\n              break\n            case 'alpha':\n              if ((this.value !== '') && (/^[a-zA-Z]+$/.test(this.value) === false)) { return [false, 'Value must contain only alphabetic characters'] }\n              break\n            case 'numeric':\n              if (!isNumeric(this.value)) { return [false, 'Value must contain only numeric characters'] }\n              break\n            case 'date':\n              if (parseDate(this.value) === null) { return [false, 'Invalid date format. Use dd/mm/yyyy.'] }\n              break\n            default:\n              debugError(`BindedField.parsedConstraints: Invalid constraint - ${constraint}`)\n          }\n        }\n      }\n    }\n\n    if (this.allowedValues !== null) {\n      if (this.allowedValues.constructor === Array) {\n        if (this.fieldType === 'slider' && ((this.value < this.allowedValues[0]) || (this.value > this.allowedValues[1]) || (this.value % this.allowedValues[2] !== 0))) {\n          return [false, 'Value not allowed']\n        } else if (this.fieldType !== 'slider' && (!this.allowedValues.includes(this.value))) {\n          return [false, 'Value not allowed']\n        }\n      }\n      if ((this.allowedValues.constructor === String) && (this.allowedValues !== this.value)) { return [false, 'Value not allowed'] }\n    }\n\n    return [true, okMessage]\n  }\n\n  // getters and setters\n  set value(value) {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error('The variable you are trying to bind is undefined - either this object or the property is incorrect')\n    } else {\n      this.object[this.property] = this.convertToType(value)\n      this.update('setter')\n    }\n  }\n\n  get value() {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error('The variable you are trying to bind is undefined - either this object or the property is incorrect')\n    } else {\n      return this.object[this.property]\n    }\n  }\n\n  get field() {\n    if (this.subfields.length) {\n      for (const field of this.subfields) {\n        if ($(field)[0].checked) {\n          return $(field)\n        }\n      }\n    }\n    return $(this._field)\n  }\n\n  set field(field) {\n    this._field = field\n  }\n\n  set error(message) {\n    if (this.errorDiv !== null) {\n      if (message) {\n        this.errorDiv.find('.bindedfield-error').text(message)\n        this.errorDiv.show()\n      } else {\n        this.errorDiv.find('.bindedfield-error').text('')\n        this.errorDiv.hide()\n      }\n    }\n  }\n\n  get error() {\n    return null\n  }\n\n  set message(message) {\n    if (this.messageDiv !== null) {\n      if (message) {\n        this.messageDiv.find('.bindedfield-message').text(message)\n        this.messageDiv.show()\n      } else {\n        this.messageDiv.find('.bindedfield-message').text('')\n        this.messageDiv.hide()\n      }\n    }\n  }\n\n  get message() {\n    return null // write only\n  }\n\n  get parsedConstraints() {\n    // TODO\n  }\n\n  set parsedConstraints(constraints) {\n    debugError('BindedField.parsedConstraints: read-only')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BindedField.js","\nexport default class BindedProperty {\n  constructor(object = null, property = null, hierarchy = null) {\n    // constants\n    this.HANDLED_VARIABLE_TYPES = ['number', 'string', 'boolean']\n\n    // data properties\n    this.property = property\n    this.object = object\n    this.propagate = false\n    // to add ? chain propagation? a subscription system maybe...\n    this.type = null\n\n    // export value as hierarchy if set, else set as property name\n    this.hierarchy = hierarchy !== null ? hierarchy : property\n    this.exportName = this.hierarchy.replace(/\\./g, '')\n\n    if (!this.object) {\n      // if parent object is not set consider that the binding is with a variable in the global scope\n      this.object = window\n    }\n\n    if (property !== null) {\n      this.bind(object, property)\n    }\n  }\n\n  /* ======== Binding function ======== */\n  bind(object, property) {\n    const propertyType = typeof this.object[this.property]\n    if (propertyType === 'undefined') {\n      throw new Error(`Parambox: The variable '${property}' you are trying to bind is undefined - either this object or the property is not defined`)\n    } else {\n      if (this.HANDLED_VARIABLE_TYPES.indexOf(propertyType) === -1) {\n        throw new Error('The variable you are trying to bind is of a non-handled type (string, number or boolean)')\n      }\n\n      /**\n       * Binded property key\n       * @type {string}\n       */\n      this.property = property\n\n      /**\n       * Parent object\n       * @type {object}\n       */\n      this.object = object\n\n      /**\n       * Binded property type constructor\n       * @type {function}\n       */\n      this.type = this.object[this.property].constructor\n    }\n  }\n\n  convertToType(value) {\n    if (this.type) {\n      if (this.type === Boolean) {\n        switch (String(value).toUpperCase()) {\n          case '0':\n            return false\n          case '1':\n            return true\n          case 'FALSE':\n            return false\n          case 'TRUE':\n            return true\n          default:\n            throw new Error('BindedProperty.convertToType: invalid string value for boolean type')\n        }\n      }\n      return this.type(value)\n    }\n    throw new Error('You are trying to convert a value to a the type of the binded property but the object has no property binded to it (or no type)')\n  }\n  // getters and setters\n  set value(value) {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error(\n        'The variable you are trying to bind is undefined - either this object or the property is incorrect',\n      )\n    } else {\n      this.object[this.property] = this.convertToType(value)\n    }\n  }\n\n  get value() {\n    if (typeof this.object[this.property] === 'undefined') {\n      throw new Error(\n        'The variable you are trying to bind is undefined - either this object or the property is incorrect',\n      )\n    } else {\n      return this.object[this.property]\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BindedProperty.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport { hasConstructor, delay } from './utilities'\n\n\n/** Helper class creating modals */\nexport default class SmartModal extends DragBox {\n\n  constructor(formatType = 'topCentralLarge', callback = null, buttonType = 'closebutton', boxElement = null,\n    { stayInWindow = true,\n    paddingTopBottom = 100,\n    freeHeight = true } = { stayInWindow: true, paddingTopBottom: 100, freeHeight: true }) {\n    // call super constructor\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartmodal-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      closebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button  smartmodal-closebutton\">Close</button>',\n      nextbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-nextbutton\">Next</button>',\n      blankbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-blankbutton\"></button>',\n      sendbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartmodal-sendbutton\">Send</button>',\n    }\n\n    // callback\n    this.callback = callback\n\n    // ui\n    this.draggable = false\n    this.formatType = this.DEFAULT_FORMAT_TYPES.hasOwnProperty(formatType) ? formatType : 'topCentralLarge'\n    this.stayInWindow = stayInWindow\n    this.freeHeight = freeHeight\n    this.initialFreeHeigth = freeHeight\n    this.maxHeight = null\n    this.lastUpdate = 0\n    this.paddingTopBottom = paddingTopBottom\n    this.buttonRowHtml = this.DEFAULT_BUTTON_ROW_HTML\n    this.scrollAppended = false\n\n    if (!(buttonType in this.DEFAULT_BUTTON_HTML)) {\n      throw new Error('buttonType invalid')\n    }\n    this.buttonType = buttonType\n\n    // row hold the row object in dom as well as the bindedField object {rowDom: row, bindedField: bindedField}\n    this.rows = []\n\n    // set dragbox title\n    this.title = '<center><h5>Smart Modal</h5></center>'\n\n    // setup the button\n    this.append(this.buttonRowHtml, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML[this.buttonType],\n      '.smartmodal-buttonrow',\n    )\n\n    this.button = $(this.boxElement).find(`.smartmodal-${this.buttonType}`)\n\n    // update position to fit the screen adequatly and show\n    this.callAfterConstructor()\n\n    // event listener for window resize updates the size and position.\n    const smartModalObject = this\n    $(window).resize(() => {\n      smartModalObject.updatePosition()\n    })\n\n    // event listener on the button\n    $(this.button).click(() => {\n      smartModalObject.callThenDestroy()\n    })\n  }\n\n  // after setup life cycle function\n  callAfterConstructor() {\n    // update position to fit the screen adequatly and show\n    this.updateSize()\n    this.updatePosition()\n    // this.show()\n  }\n\n  // look for a callback then destroy\n  callThenDestroy() {\n    if (this.callback) {\n      this.callback()\n    }\n\n    this.destroy()\n  }\n\n  // position function\n  updatePosition() {\n    // var coordinates = Dragbox.getCoordinateInWindow(this.boxElement);\n    const innerHeight = window.innerHeight\n    const innerWidth = window.innerWidth\n    const format = this.DEFAULT_FORMAT_TYPES[this.formatType]\n    let topPos = format[0] * innerHeight\n    const leftPos = innerWidth * ((1 - format[1]) / 2)\n    const width = innerWidth * format[1]\n    let height = innerHeight * format[2]\n\n    if (width !== this.width) {\n      this.width = width\n    }\n\n    this.freeHeight = this.initialFreeHeigth\n    if (this.initialFreeHeigth) {\n      this.contentElement.height('auto')\n    } else {\n      this.height = innerHeight * format[2]\n    }\n    this.maxHeight = null\n    if (this.scrollAppended) { $(this.boxElement).find('.smartmodal-scroll').hide() }\n\n    if (((this.initialFreeHeigth) && (!this.freeHeight)) || ((this.stayInWindow) && (this.boxElement.height() + topPos > (innerHeight - this.paddingTopBottom)))) {\n      if (this.maxHeight === null) {\n        this.maxHeight = this.initialFreeHeigth ? this.boxElement.height() : innerHeight * format[2]\n      }\n\n      this.freeHeight = false\n      const offset = innerHeight - this.maxHeight\n      topPos = offset > this.paddingTopBottom ? offset - (this.paddingTopBottom / 2) : this.paddingTopBottom / 2\n      height = offset > this.paddingTopBottom ? innerHeight - offset : innerHeight - this.paddingTopBottom\n      this.overflow = 'scroll'\n\n      if ((innerHeight - this.paddingTopBottom) > height + (format[0] * innerHeight)) {\n        if (this.initialFreeHeigth) {\n          this.contentElement.height('auto')\n        } else {\n          height = innerHeight * format[2]\n        }\n\n        topPos = format[0] * innerHeight\n        if (this.scrollAppended) { $(this.boxElement).find('.smartmodal-scroll').hide() }\n      }\n    }\n\n\n    this.height = height\n    $(this.boxElement).css({\n      left: leftPos,\n      top: topPos,\n    })\n    delay(1).then(() => {\n      if (!this.scrollAppended) {\n        this.prepend('<span class=\"smartmodal-scroll\">&darr; scroll down &darr;</span>', '.smartmodal-buttonrow')\n        this.scrollAppended = true\n        const scrollElement = $(this.boxElement).find('.smartmodal-scroll')\n        this.contentElement.scroll(() => {\n          if (this.contentElement.scrollTop() !== 0) {\n            scrollElement.hide()\n          } else {\n            scrollElement.show()\n          }\n        })\n      }\n\n      if ((this.scrollAppended) && (this.contentElement.get(0).scrollHeight > this.contentElement.innerHeight())) {\n        $(this.boxElement).find('.smartmodal-scroll').show()\n      } else if (this.scrollAppended) {\n        $(this.boxElement).find('.smartmodal-scroll').hide()\n      }\n    })\n\n    return false\n  }\n\n\n  set title(html) {\n    if (this.boxElement) {\n      $(this.boxElement).find('.dragbox-title').html(html)\n      this.updateSize()\n      delay(10).then(() => { this.updatePosition(); this.show() })\n    }\n  }\n\n  set content(html) {\n    if (this.boxElement) {\n      this.contentDiv.html(html)\n      this.updateSize()\n      delay(10).then(() => { this.updatePosition(); this.show() })\n    }\n  }\n\n\n  set buttonText(text = 'Close') {\n    if (hasConstructor($, this.button) && hasConstructor(String, text)) {\n      this.button.html(text)\n    }\n  }\n\n  get buttonText() {\n    if (hasConstructor($, this.button)) {\n      return this.button.html()\n    }\n    return undefined\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartModal.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport BindedField from './BindedField'\n\n/** Dragable box holding double binded parameters for live development */\nexport default class ParamBox extends DragBox {\n  constructor(boxElement = null) {\n    // call super constructor\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_ROW_HTML = '<div class=\"col-md-12 dragbox-row paramboxtmprow\"></div>'\n\n    this.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML = '<div class=\"col-md-12 dragbox-row paramboxtmprow\"><a class=\"parambox-subtitle\">Subtitle</a></div>'\n\n    this.PARAMBOX_EMPTY_ROW_HTML = '<div class=\"col-md-12 dragbox-row parambox-empty\"><center>No parameters binded.</center></div>'\n\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row parambox-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      savebutton: '<button type=\"button\" class=\"btn btn-secondary btn-block dragbox-button parambox-savebutton\">Save</button>',\n      importbutton: '<button type=\"button\" class=\"btn btn-secondary  btn-block dragbox-button parambox-importbutton\">Import</button>',\n      reloadbutton: '<button type=\"button\" class=\"btn btn-secondary btn-block dragbox-button parambox-reloadbutton\">Reload</button>',\n    }\n\n    // setup the buttons\n    this.append(this.DEFAULT_BUTTON_ROW_HTML, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML.savebutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.importbutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.reloadbutton,\n      '.parambox-buttonrow',\n      'col-xs-4',\n    )\n\n    const thisObject = this\n    this.boxElement[0].getElementsByClassName(\n      'parambox-savebutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.save(e)\n    })\n    this.boxElement[0].getElementsByClassName(\n      'parambox-importbutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.import(e)\n    })\n    this.boxElement[0].getElementsByClassName(\n      'parambox-reloadbutton',\n    )[0].addEventListener('click', (e) => {\n      thisObject.reloadAndImport(e)\n    })\n\n    $(document).on('click', '.parambox-subtitle', function clicked() {\n      const id = $(this).attr('subtitle-id')\n      $(`[parambox-belong-to='${id}']`).slideToggle(250)\n    })\n\n    // ui\n    this.rowHtml = this.DEFAULT_ROW_HTML\n    this.subtitleHtml = this.PARAMBOX_EMPTY_SUBTITLE_ROW_HTML\n\n    // row hold the row object in dom as well as the bindedField object {rowDom: row, bindedField: bindedField}\n    this.rows = []\n\n    this.subtitleRows = {}\n\n    // set dragbox title\n    this.title = '<h4><i class=\"fa fa-cog fa-1x\"></i> Parameter Box</h4>'\n\n    // set overflow\n    this.overflow = 'scroll'\n\n    // Prevent freeHeight\n    this.freeHeight = false\n\n    // set prefix for exports TODO: IMPLEMENT IT IN EXPORTS\n    if (typeof window.paramPrefixIncrement === 'undefined') {\n      window.paramPrefixIncrement = 0\n    } else {\n      window.paramPrefixIncrement += 1\n    }\n\n    this.prefix = `paramBox${window.paramPrefixIncrement}`\n\n    // update size and refreshView\n    this.updateSize()\n\n    this.refreshView()\n  }\n\n  // binding methods\n  bind(object, properties, options = null) {\n    if (typeof object === 'undefined') {\n      throw new Error('object is undefined')\n    }\n\n    let objectHierarchy = null\n\n    if (properties.constructor !== Array) {\n      properties = [properties]\n    }\n\n    for (let i = 0; i < properties.length; i++) {\n      objectHierarchy = this.getDescendantProp(object, properties[i])\n      // TODO use lodash ?\n      const objectTemp = objectHierarchy[0]\n      const property = objectHierarchy[1]\n\n      const underscoredHierarchy = properties[i].replace(/\\./g, '')\n      const subtitle = properties[i].substring(0, properties[i].lastIndexOf('.'))\n\n      const rowDom = this.newRowInDom(subtitle)\n      let bindedField = null\n\n      /* --- look for a value in the query string for this property --- */\n      let initialValue = null\n      if (typeof this.queryString[underscoredHierarchy] !== 'undefined') {\n        initialValue = this.queryString[underscoredHierarchy]\n      }\n\n      // look for a constrained field\n      if ((options !== null) && (typeof options[properties[i]] !== 'undefined')) {\n        let type = options[properties[i]].type || 'input'\n        let constraintValues = null\n        if (options[properties[i]].constructor === Array) {\n          constraintValues = options[properties[i]]\n          type = options[properties[i]].type || 'select'\n        } else if (typeof options[properties[i]].values !== 'undefined') {\n          constraintValues = options[properties[i]].values\n          type = options[properties[i]].type || 'select'\n        }\n\n\n        if (initialValue !== null) {\n          if ((constraintValues !== null) && (type !== 'slider') && (constraintValues.indexOf(initialValue) === -1)) {\n            throw new Error(`ParamBox.bind: cannot set initial value to query string value of ${initialValue} because it is not in the options array.`)\n          }\n\n          objectTemp[property] = objectTemp[property].constructor(initialValue)\n        }\n\n        bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            type,\n            constraintValues,\n            properties[i],\n          )\n      }\n\n\n      // if no constrained field found, create the most relevant type of field\n      if (bindedField === null) {\n        if (initialValue !== null) {\n          objectTemp[property] = objectTemp[property].constructor(initialValue)\n        }\n\n        if (objectTemp[property].constructor === Boolean) {\n          bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            'select', ['TRUE', 'FALSE'],\n            properties[i],\n          )\n        } else {\n          bindedField = new BindedField(\n            objectTemp,\n            property,\n            rowDom,\n            'input',\n            null,\n            properties[i],\n          )\n        }\n      }\n\n      this.rows.push(this.getBindedRow(rowDom, bindedField))\n    }\n\n    this.refreshView()\n  }\n\n  unbind(object, property) {\n    for (let i = 0; i < this.rows.length; i++) {\n      const bindedField = this.rows[i].bindedField\n\n      if (bindedField.object === object && bindedField.property === property) {\n        this.rows.splice(i, 1)\n        bindedField.delete()\n      }\n    }\n\n    this.refreshView()\n  }\n\n  // ui methods\n  newRowInDom(subtitle = '') {\n    if (subtitle !== '') {\n      if (!(subtitle in this.subtitleRows)) {\n        let subtitleRow = null\n        $(this.boxElement).find('.dragbox-content').append(this.subtitleHtml)\n        subtitleRow = this.boxElement.find('.paramboxtmprow')\n        $(subtitleRow)\n          .removeClass('paramboxtmprow')\n          .find('a')\n          .attr('subtitle-id', subtitle)\n          .text(subtitle)\n        this.subtitleRows[subtitle] = $(subtitleRow)\n      }\n    }\n\n    let row = null\n    $(this.boxElement).find('.dragbox-content').append(this.rowHtml)\n    row = this.boxElement.find('.paramboxtmprow')\n    $(row).removeClass('paramboxtmprow').attr('parambox-belong-to', subtitle)\n\n    return row\n  }\n\n  getBindedRow(rowDom, bindedField) { // eslint-disable-line\n    return {\n      rowDom,\n      bindedField,\n    }\n  }\n\n  refreshView() {\n    // TODO: maybe check if all binded field are displayed in the paramBox. if not add them. get rid of unbinded field\n    /* --- Add an export button if there is at least one binded property --- */\n    if (this.rows.length) {\n      this.boxElement[0].getElementsByClassName(\n        'parambox-buttonrow',\n      )[0].style.visibility = 'visible'\n    } else {\n      this.boxElement[0].getElementsByClassName(\n        'parambox-buttonrow',\n      )[0].style.visibility = 'hidden'\n      // TODO: add empty message\n    }\n\n    /* --- Adapt the box's height to the number of parameters --- */\n    let height = 80 + (this.rows.length * 75)\n    if (height > 600) {\n      height = 600\n    }\n\n    this.height = height\n  }\n\n  keyfunction(e) {\n    // check if shift + P hotkeys were stroke and toggle visibility if so\n    this.map[e.keyCode] = e.type === 'keydown'\n\n    // hide and show parameter box\n    if (this.map[16] && this.map[80]) {\n      // 16 == Shift - 80 == P\n      // make sure to reset value in case keyup event is ignored (keep shift true for rapid toggle)\n      this.map[80] = false\n\n      // toggle box visibility\n      this.toggle()\n\n      // prevent default action if any\n      e.preventDefault()\n    }\n  }\n\n  /* ======== Import/Export functions ======== */\n  getSummaryArray() {\n    const summaryArray = []\n    for (let i = 0; i < this.rows.length; i++) {\n      const bindedField = this.rows[i].bindedField\n      summaryArray.push({\n        property: bindedField.property,\n        value: bindedField.value,\n        hierarchy: bindedField.hierarchy,\n        exportName: bindedField.exportName,\n      })\n    }\n\n    return summaryArray\n  }\n\n  import() {\n    // make it a smart form\n    // but while smart forms are finished use a simple prompt\n    const importedString = prompt('Enter a JSON string:')\n    let importedJSON = null\n    try {\n      importedJSON = JSON.parse(importedString)\n    } catch (e) {\n      console.error('ParamBox.import: Invalid JSON string - Parsing error:', e)\n    }\n\n    if (importedJSON !== null) {\n      if (importedJSON.constructor !== Array) {\n        console.error(\n          'ParamBox.import: Invalid JSON string - the parent object needs to be of the same structure as the summaryArray',\n        )\n      }\n\n      for (let i = 0; i < importedJSON.length; i++) {\n        if (typeof importedJSON[i].property === 'undefined') {\n          console.error(\n            `ParamBox.import: importedJSON[${i\n            }].property is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray.`,\n          )\n        }\n        if (typeof importedJSON[i].value === 'undefined') {\n          console.error(\n            `ParamBox.import: importedJSON[${i\n            }].value is undefined. Invalid JSON string - the parent object needs to be of the same structure as the summaryArray.`,\n          )\n        }\n\n        this.setProperty(importedJSON[i].property, importedJSON[i].value)\n      }\n    }\n  }\n\n  save() {\n    // get summary array\n    const summaryArray = this.getSummaryArray()\n\n    // stringify summary object\n    const stringified = JSON.stringify(summaryArray, null, 2)\n\n    // opens a new window with the stringified json\n    let height = 30 + (summaryArray.length * 70)\n    if (height > 500) {\n      height = 500\n    }\n    window.open(\n      `data:application/json;${\n      window.btoa ? `base64,${btoa(stringified)}` : stringified}`,\n      'ParamBox.save',\n      `width=400,height=${height}`,\n    )\n  }\n\n  reloadAndImport() {\n    /* --- Serialize the parameters in URL format --- */\n    const summaryArray = this.getSummaryArray()\n    let str = ''\n    for (let i = 0; i < summaryArray.length; i++) {\n      if (str !== '') {\n        str += '&'\n      }\n      str += `${summaryArray[i].exportName}=${\n        encodeURIComponent(summaryArray[i].value)}`\n    }\n\n    /* --- Append the parameters and reload the page --- */\n    let url = window.location.href\n    const questionPosition = url.indexOf('?')\n    if (questionPosition !== -1) {\n      // delete arguments from the URL\n      url = url.substring(0, questionPosition)\n    }\n    url += `?${str}`\n    window.location.href = url\n  }\n\n  /**\n   * Gets the last object and property from a string description of object hierachy\n   * @param  {object} object      Top object from which the hierarchy starts\n   * @param  {string} description String describing the object hierachy (e.g this.object.has.property )\n   * @return {array}             [parentObject, lastProperty, propertyValue]\n   */\n  getDescendantProp(object, description) { // eslint-disable-line\n    const arr = description.split('.')\n    let parentObject = null\n    let lastProperty = null\n\n    while (arr.length) {\n      parentObject = object\n      lastProperty = arr.shift()\n\n      if (typeof object[lastProperty] === 'undefined') {\n        throw new Error(`object property ${lastProperty} is undefined`)\n      }\n\n      object = object[lastProperty]\n    }\n\n    /* the last object of the while is the value of the specified property */\n    const propertyValue = object\n\n    return [parentObject, lastProperty, propertyValue]\n  }\n\n  setProperty(property, value) {\n    if (property.constructor !== String) {\n      throw new Error('ParamBox.setProperty: property needs to be a string.')\n    }\n\n    let found = false\n    for (let i = 0; i < this.rows.length; i++) {\n      if (this.rows[i].bindedField.property === property) {\n        this.rows[i].bindedField.value = value\n        found = true\n      }\n    }\n\n    if (found === false) {\n      console.warn(`ParamBox.setProperty: did not find property ${property}`)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ParamBox.js","import Chart from 'chartjs'\nimport $ from 'jquery'\nimport SmartModal from './SmartModal'\nimport { mandatory } from './utilities'\n\n/** Wrapper class for easy chart creation using chart.js and SmartModal */\nexport default class SmartChart extends SmartModal {\n  constructor(options = mandatory(), callback = null, boxElement = null) {\n    if (typeof Chart === 'undefined') {\n      throw new Error('SmartChart.constructor: Chart.js is not loaded.')\n    }\n\n    if (options.constructor !== Object) {\n      throw new Error(\n        'SmartChart.constructor: options needs to be an object (chart.js chart options)',\n      )\n    }\n    super('overlay', callback, 'closebutton', boxElement)\n    // save options\n    this.chartOptions = $.extend(true, {}, options)\n\n    // set dragbox title\n    this.title = '<center><h5>Smart Chart</h5></center>'\n\n    // Create canvas\n    const canvasID = `chart-canvas${$('canvas').length + 1}`\n    this.content = `<canvas id=\"${canvasID}\" class=\"chart-canvas\"></canvas>`\n    this.canvas = document.getElementById(canvasID)\n\n    if (typeof options.options.title.text !== 'undefined') {\n      options.options.title.display = false\n      this.title = `<center><h5>${options.options.title.text}</h5></center>`\n    }\n\n    // Create chart\n    try {\n      Chart.defaults.global.responsive = true\n      Chart.defaults.global.maintainAspectRatio = false\n      this.chart = new Chart(this.canvas, options)\n    } catch (e) {\n      throw new Error(\n        `SmartChart.constructor: could not build the chart. Error: ${e}`,\n      )\n    }\n\n    this.canvas.style.background = 'white'\n    this.boxClass = 'dragbox dragbox-white-boxshadow'\n\n    // setup footer and buttons\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartchart-buttonrow\"><div class=\"col-xs-10\"></div></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      closebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button  smartchart-closebutton\">Close</button>',\n      savebutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartchart-savebutton\">Save</button>',\n    }\n\n    this.html('.dragbox-footer', this.DEFAULT_BUTTON_ROW_HTML)\n\n    this.append(\n      this.DEFAULT_BUTTON_HTML.savebutton,\n      '.smartchart-buttonrow',\n      'col-xs-1 centered',\n    )\n    this.append(\n      this.DEFAULT_BUTTON_HTML.closebutton,\n      '.smartchart-buttonrow',\n      'col-xs-1 centered',\n    )\n\n    this.closeButton = $(this.boxElement).find('.smartchart-closebutton')\n    this.saveButton = $(this.boxElement).find('.smartchart-savebutton')\n    this.button = this.closeButton\n\n    // event listener on the button\n    $(this.closeButton).click(() => {\n      this.callThenDestroy()\n    })\n\n    $(this.saveButton).click(() => {\n      this.save()\n    })\n\n    this.updatePosition()\n    this.updateSize()\n\n    setTimeout(() => {\n      this.chart.resize()\n      this.show()\n    },\n      250,\n    )\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  callAfterConstructor() { /* Overides super */ }\n\n  /** Overides SmartModal.callThenDestroy() function */\n  callThenDestroy() {\n    // look for a callback then destroy\n    if (this.callback) {\n      this.callback()\n    }\n\n    // if chart destroy the chart .destroy()\n    if (typeof this.chart !== 'undefined' && typeof Chart !== 'undefined') {\n      if (this.chart.constructor === Chart) {\n        this.chart.destroy()\n      }\n    }\n    // call Dragbox.destroy()\n    this.destroy()\n  }\n\n  save() {\n    // stringify summary object\n    const stringified = JSON.stringify(this.chartOptions, null, 2)\n\n    // opens a new window with the stringified json\n    let height = 150 + (this.chartOptions.data.datasets.length * 150)\n    if (height > 500) {\n      height = 500\n    }\n\n    window.open(\n      `data:application/json;${\n      window.btoa ? `base64,${btoa(stringified)}` : stringified}`,\n      'SmartChart.save',\n      `width=400,height=${height}`,\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartChart.js","import $ from 'jquery'\nimport DragBox from './DragBox'\nimport BindedField from './BindedField'\nimport { mandatory, Deferred, debuglog, extend, delay, debugError, hasConstructor } from './utilities'\n\n// TODO: Class generating a form based on preset fields and managing */\nexport default class SmartForm extends DragBox {\n  /**\n   * Smart form receives two parameters SmartForm({options}, boxElement)\n   * @method constructor\n   * options = {\n   * @param  {Object}       [fields=mandatory()]     type = null : input, select, textaera, slider, radio\n   *                                                 constraints =  null : list of constraints that will be automatically verified: mandatory; alpha; numeric; lenght:XX; contains:a,b,@,.;\n   *                                                 authorizedValues: '': authorized values TODO maybe merge it with constraints\n   *                                                 value: '': field value / initial value\n   * @param  {String}       [format='overlay']       [description]\n   * @param  {Numeric}      [height=null]           [description]\n   * @param  {Numeric}      [width=null]            [description]\n   * @param  {Function}     [callback=null]        [description]\n   * @param  {String}       [url=null]               [description]\n   * @param  {Function}     [verificationFunction=() => true }] [description]\n   * }\n   * @param  {Object}       [boxElement=null]        [description]\n   * @return {SmartForm}                             [description]\n   */\n  constructor({\n    fields = mandatory(),\n    title = 'Form',\n    format = 'overlay',\n    height = null,\n    width = null,\n    callback = null,\n    deferred = new Deferred(),\n    url = null,\n    target = '_blank',\n    verificationFunction = () => true,\n    freeHeight = true,\n    noPageScroll = true, // if set to true the height is free until reaching the limit of the page in heigh, then it is set not to go beyond it -20px\n  }, boxElement = null) {\n    if (fields.constructor !== Object) {\n      throw new Error('SmartForm: fields is not an object.')\n    }\n    /* --- Create the DragBox for the form --- */\n    super(boxElement)\n\n    // constants\n    this.DEFAULT_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartformtmprow\"></div>'\n\n    this.EMPTY_SUBTITLE_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartformtmprow\"><a class=\"smartform-subtitle\">Subtitle</a></div>'\n\n    this.smartform_EMPTY_ROW_HTML = '<div class=\"col-md-12 dragbox-row smartform-empty\"><center>No parameters binded.</center></div>'\n    this.DEFAULT_BUTTON_ROW_HTML = '<div class=\"col-xs-12 dragbox-row smartform-buttonrow\"></div>'\n    this.DEFAULT_BUTTON_HTML = {\n      sendbutton: '<button type=\"button\" class=\"btn btn-secondary dragbox-button smartform-sendbutton\">Send</button>',\n    }\n\n\n    // ui\n    this.rowHtml = this.DEFAULT_ROW_HTML\n    this.subtitleHtml = this.EMPTY_SUBTITLE_ROW_HTML\n\n\n    // TODO Create the form element IF url !== null, else only use the callback to handle data.\n    // constraints can be functions like checkPassword(x) { return (bool) }\n    // There is constraint function by default\n    this.formElement = null\n    this.formId = null\n    if (url !== null) {\n      this.formId = `smartform-${this.boxId}`\n      this.append(`<form id='${this.formId}' action=\"${url}\" method=\"post\" target=\"${target}\">`)\n      this.formElement = this.boxElement.find(`#${this.formId}`).get()\n    }\n\n    /**\n     * Holds a reference to the fields by key\n     * @type {Object}\n     */\n    this.fields = {}\n    const keys = Object.keys(fields)\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      // fields needs to have a name and type property\n      if (typeof fields[key].type === 'undefined') {\n        throw new Error(`SmartForm: field[${i}].type is undefinned`)\n      }\n      const baseField = {\n        type: null,\n        constraints: null, // list of constraints that will be automatically verified: mandatory; alpha; numeric; lenght:XX; contains:a,b,@,.;\n        authorizedValues: null, // athorized values\n        bindedField: null,\n        parent: null,\n        value: '',\n        row: null,\n        title: key,\n        baseMessage: '',\n      }\n      fields[key] = extend(baseField, fields[key])\n      this.fields[key] = fields[key]\n      this.fields[key].row = this.newRowInDom(this.fields[key].parent)\n\n      // we bind the value of the field object to the bindedField\n      this.fields[key].bindedField = new BindedField(this.fields[key], 'value', this.fields[key].row, this.fields[key].type, this.fields[key].authorizedValues, null,\n      { constraints: this.fields[key].constraints, title: this.fields[key].title, baseMessage: this.fields[key].baseMessage }) // TODO transform the call to an option object with parameters\n    }\n    if (url !== null) {\n      this.append('</form>')\n    }\n\n\n    // callback\n    this.callback = typeof callback === 'function' ? callback : (fields) => { debuglog(fields) }\n    this.verificationFunction = verificationFunction\n    if (hasConstructor(Deferred, deferred)) {\n      this._deferred = deferred\n    } else {\n      this._deferred = new Deferred()\n      debugError('SmartForm: deferred is not a valid Deferred class. Creating a new one.')\n    }\n\n    // ui\n    this.draggable = false\n    this.overflow = 'scroll'\n    this.freeHeight = freeHeight\n    this.initialFreeHeigth = freeHeight\n    this.noPageScroll = noPageScroll\n    this.scrollAppended = false\n    this.maxHeight = null\n    this.formatType = format // TODO add height/width custom definition\n    this.buttonRowHtml = this.DEFAULT_BUTTON_ROW_HTML\n\n    this.buttonType = 'sendbutton'\n\n    // set dragbox title\n    this.title = `<center>${title}</center>`\n\n    // setup the button\n    this.append(this.buttonRowHtml, '.dragbox-footer')\n    this.append(\n      this.DEFAULT_BUTTON_HTML[this.buttonType],\n      '.smartform-buttonrow',\n    )\n\n    this.button = $(this.boxElement).find(`.smartform-${this.buttonType}`)\n\n    // update position to fit the screen adequatly and show\n    this.callAfterConstructor()\n\n    // event listener for window resize updates the size and position.\n    $(window).resize(() => {\n      this.updatePosition()\n    })\n\n    // event listener on the button\n    $(this.button).click(() => {\n      if (this.verify() && this.verificationFunction()) {\n        this.callThenDestroy()\n      }\n    })\n\n    $(document).on('click', '.smartform-subtitle', function clicked() {\n      const id = $(this).attr('subtitle-id')\n      $(`[smartform-belong-to='${id}']`).slideToggle(250)\n    })\n  }\n\n  /* ======= Verification methods ======= */\n  verify() {\n    let returnValue = true\n    for (const field in this.fields) {\n      if (this.fields[field].hasOwnProperty('bindedField')) {\n        const [valid, msg] = this.fields[field].bindedField.verify()\n        if (!valid) {\n          this.fields[field].bindedField.incorrect(msg)\n          returnValue = false\n        } else {\n          this.fields[field].bindedField.correct(msg)\n        }\n      }\n    }\n    return returnValue\n  }\n\n  // after setup life cycle function\n  callAfterConstructor() {\n    // update position to fit the screen adequatly and show\n    delay(10).then(() => {\n      this.updatePosition()\n      this.updateSize()\n      this.show()\n    })\n  }\n\n  // look for a callback then destroy\n  callThenDestroy() {\n    if (hasConstructor(Function, this.callback)) {\n      this.callback(this.fields)\n    }\n\n    if (hasConstructor(Deferred, this.deferred)) {\n      this.deferred.resolve(this.fields)\n    }\n\n    if (this.formElement !== null) {\n      this.formElement.submit()\n    }\n\n    this.destroy()\n  }\n\n\n  /* ======= UI Methods ======= */\n  newRowInDom(subtitle = '') {\n    if (subtitle) {\n      if (!(subtitle in this.subtitleRows)) {\n        let subtitleRow = null\n        this.contentElement.append(this.subtitleHtml)\n        subtitleRow = this.boxElement.find('.smartformtmprow')\n        $(subtitleRow)\n          .removeClass('smartformtmprow')\n          .find('a')\n          .attr('subtitle-id', subtitle)\n          .text(subtitle)\n        this.subtitleRows[subtitle] = $(subtitleRow)\n      }\n    }\n\n    let row = null\n    this.contentElement.append(this.rowHtml)\n    row = this.boxElement.find('.smartformtmprow')\n    $(row).removeClass('smartformtmprow').attr('smartform-belong-to', subtitle)\n\n\n    return row\n  }\n\n  // position function\n  updatePosition() {\n    // var coordinates = Dragbox.getCoordinateInWindow(this.boxElement);\n    const innerHeight = window.innerHeight\n    const innerWidth = window.innerWidth\n    const format = this.DEFAULT_FORMAT_TYPES[this.formatType]\n    const topPos = format[0] * innerHeight\n    const leftPos = innerWidth * ((1 - format[1]) / 2)\n    $(this.boxElement).css({\n      left: leftPos,\n      top: topPos,\n    })\n\n    const width = innerWidth * format[1]\n    if (width !== this.width) {\n      this.width = width\n    }\n\n    this.freeHeight = this.initialFreeHeigth\n    if (this.initialFreeHeigth) {\n      this.contentElement.height('auto')\n    } else {\n      this.height = innerHeight * format[2]\n    }\n    this.maxHeight = null\n    if (this.scrollAppended) { $(this.boxElement).find('.smartmodal-scroll').hide() }\n\n    // delay(10).then(function update() { //eslint-disable-line\n    if (!this.initialFreeHeigth) {\n      this.height = innerHeight * format[2]\n    } else if (((this.initialFreeHeigth) && (!this.freeHeight)) || ((this.initialFreeHeigth) && (this.noPageScroll) && (this.boxElement.height() + topPos > innerHeight - 20))) {\n      if (this.maxHeight === null) { this.maxHeight = this.boxElement.height() }\n      this.freeHeight = false\n      const fullHeight = innerHeight - 20 - topPos\n\n      if (fullHeight > this.maxHeight) {\n        this.height = this.maxHeight\n        if (this.scrollAppended) { $(this.boxElement).find('.smartmodal-scroll').hide() }\n      } else {\n        this.height = fullHeight\n        if ((this.scrollAppended) && (this.contentElement.get(0).scrollHeight > this.contentElement.innerHeight())) {\n          $(this.boxElement).find('.smartmodal-scroll').show()\n        }\n      }\n    }\n\n    delay(1).then(() => {\n      if ((!this.scrollAppended) && (this.contentElement.get(0).scrollHeight > this.contentElement.innerHeight())) {\n        this.prepend('<span class=\"smartmodal-scroll\">&darr; scroll down &darr;</span>', '.smartform-buttonrow')\n        this.scrollAppended = true\n        const scrollElement = $(this.boxElement).find('.smartmodal-scroll')\n        this.contentElement.scroll(() => {\n          if (this.contentElement.scrollTop() !== 0) {\n            scrollElement.hide()\n          } else {\n            scrollElement.show()\n          }\n        })\n      }\n\n      if ((this.scrollAppended) && (this.contentElement.get(0).scrollHeight > this.contentElement.innerHeight())) {\n        $(this.boxElement).find('.smartmodal-scroll').show()\n      } else if (this.scrollAppended) {\n        $(this.boxElement).find('.smartmodal-scroll').hide()\n      }\n    })\n\n\n    // this.width = width\n    // }.bind(this))\n    // $(this.boxElement).animate({\n    //   left: leftPos,\n    //   top: topPos,\n    // }, 25, () => {})\n    return false\n  }\n\n  set promise(val) {\n    debugError('SmartForm: promise is a readonly property, set the deferred property')\n  }\n\n  get promise() {\n    if (hasConstructor(Deferred, this.deferred)) {\n      return this.deferred.promise\n    }\n    return null\n  }\n\n  set deferred(val) {\n    if (hasConstructor(Deferred, val)) {\n      this._deferred = val\n    } else {\n      debugError('SmartForm: value needs to be of class Deferred')\n    }\n  }\n\n  get deferred() {\n    return this._deferred\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/SmartForm.js","/**\n * Experiment-boxes\n * Created. 2016\n *\n * Plug and play tools for easy development in js. Part of the experiment.js toolbox.\n *\n * Authors. Albert Buchard\n *\n * Requires: bootstrap and jQuery\n *\n * LICENSE MIT\n */\n\nimport DragBox from './src/DragBox'\nimport ParamBox from './src/ParamBox'\nimport SmartModal from './src/SmartModal'\nimport SmartChart from './src/SmartChart'\nimport SmartForm from './src/SmartForm'\nimport BindedProperty from './src/BindedProperty'\nimport BindedField from './src/BindedField'\nimport { findAllIndices } from './src/utilities'\n\nif (typeof window !== 'undefined') {\n  window.DragBox = DragBox\n  window.ParamBox = ParamBox\n  window.SmartModal = SmartModal\n  window.SmartChart = SmartChart\n  window.SmartForm = SmartForm\n  window.BindedProperty = BindedProperty\n  window.BindedField = BindedField\n\n  /* === Get the absolute path of the library === */\n  let paramBoxFullpath = './'\n  const scripts = document.getElementsByTagName('script')\n  if (scripts.length) {\n    paramBoxFullpath = scripts[scripts.length - 1].src\n    const delimiterIndices = findAllIndices('/', paramBoxFullpath)\n    paramBoxFullpath = paramBoxFullpath.substr(0, delimiterIndices[delimiterIndices.length - 1])\n  }\n\n/* === Add the paramBox css once the page is loaded === */\n  document.addEventListener('DOMContentLoaded', () => {\n    const head = document.getElementsByTagName('head')[0]\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.type = 'text/css'\n    link.href = `${paramBoxFullpath}/experimentBoxes.css`\n    head.appendChild(link)\n  })\n}\n\nexport {\n  DragBox,\n  ParamBox,\n  SmartModal,\n  SmartForm,\n  SmartChart,\n  BindedProperty,\n  BindedField,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./builder.js","const DEBUG_MODE_ON = true\n\nexport { DEBUG_MODE_ON }\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 11\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"chartjs\",\"commonjs2\":\"chartjs\",\"amd\":\"chartjs\",\"root\":\"Chart\"}\n// module id = 12\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"experiment-mathjs\",\"commonjs2\":\"experiment-mathjs\",\"amd\":\"experiment-mathjs\",\"root\":\"math\"}\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}